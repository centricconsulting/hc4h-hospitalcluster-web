(function(){(function(){if(!this.ovi||!this.ovi.win){var h={},g=g||this.oviConfig||{},g={win:g.win||this,doc:g.doc||this.document,modulePaths:g.modulePaths||{},version:"1.0.0.$REPOSITORY_REVISION$",buildNS:function(c){var d;for(var c=c.split("."),a=0,j=ovi.win,b;b=c[a++];)d=j[b]=j[b]||{isNs:!0},j=d;return j},provide:function(c){h[c]=1;return ovi.buildNS(c)},isLoaded:function(c){return h[c]},require:function(c,a){if(h[c])return this;var j=ovi.getLoadPath(c);try{ovi.br(j)}catch(b){throw Error("Could not load "+
c+", reason: "+b.message);}if(!h[c]){if(a!==!1)throw Error("Namespace "+c+" was not provided by "+j);h[c]=1}return this},fk:function(){return ovi.win.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},$xhr:function(){return this.fk()},ej:function(c){c=c.status;try{return!c&&location.protocol==="file:"||c>=200&&c<300||c===304||c===1223||c===0}catch(a){}return!1},$isXHRSuccess:function(c){return this.ej(c)},br:function(c){var a=ovi.fk();a.open("GET",c,!1);a.send(null);if(!ovi.ej(a))throw Error("Unable to load "+
c+" status: "+a.status);return ovi.win.eval(a.responseText+"\n//@ sourceURL="+c+"\n")},getLoadPath:function(c,a){var j=ovi.modulePaths[c];if(!j)for(var b=c.split("."),e=b.pop(),l=[];b.length;){j=b.join(".");if(j=ovi.modulePaths[j]){j+=l.join("/");j+=j.charAt(j.length-1)!=="/"?"/"+e:e;break}l.splice(0,0,b.pop())}j+="."+(a||"js");return j}};if(this.ovi)for(var f in g)g.hasOwnProperty(f)&&(this.ovi[f]=g[f]);else this.ovi=ovi=g;ovi.modulePaths.ovi=ovi.modulePaths.ovi||function(){for(var c=document.getElementsByTagName("script"),
a=0,j=/(^|\/|\\)ovi[\.\w]*?\.js$/i,b="",e,l,d;e=c[a++];)if(e=e.ie8_src||e.src||"",l=e.match(j)){if(e.indexOf("://")===-1){b=ovi.win.location.href;d=b.indexOf("#");var n=b.indexOf("?");d=d>n&&n>-1?n:d;b=d>-1?b.substring(0,d):b;b=b.substring(0,b.lastIndexOf("/")+1)}d=b+e.substring(0,l.index);d=d.charAt(d.length-1)==="/"?d:d+"/"}return d}();ovi.basePath=""}}).call(this);ovi.provide("ovi.browser");var Ia=ovi,Oa=navigator,qb=Oa.userAgent.toLowerCase(),rb=Oa.appVersion;
Ia.platform={windows:/Windows/.test(rb),mac:/MacIntel/.test(Oa.platform),linux:/X11/.test(rb)&&!/tablet/.test(qb)&&!/armv7/.test(qb),maemo:/apple/.test(qb)&&/linux/.test(qb)&&/armv7/.test(Oa.platform),s60_v3:/Series60\/3/.test(rb),s60_v5_touch:/Nokia5800|NokiaN97/.test(rb)||/browserng/.test(qb)};var sb=Ia.platform;
Ia.browser={version:(qb.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],chrome:/chrome/.test(qb),safari:/Apple/.test(navigator.vendor)&&!/browserng/.test(qb),opera:/opera/.test(qb),mozilla:/firefox/.test(qb)&&!/Apple/.test(navigator.vendor),s60:/series60/.test(qb),cp:/browserng/.test(qb),s60_v3:sb.s60_v3,snc:sb.s60_v3||sb.s60_v5_snc,touch:sb.maemo||sb.s60_v5_touch,web:!(sb.s60_v3||sb.s60_v5_snc||sb.maemo||sb.s60_v5_touch),language:Oa.language||Oa.userLanguage};ovi.browser.msie=eval("/*@cc_on!@*/!1");
ovi.provide("ovi.lang");
(function(h){h.bind=function(d,e){if(arguments.length>2){var b=[].slice.call(arguments,2);return function(){return e.apply(d,b.concat(h.splat(arguments)))}}else return function(){return e.apply(d,arguments)}};h.each=function(d,e){if(d){var b=0,a=d.length,l;if(typeof a!=="number"||Object.prototype.toString.call(d)==="[object Object]"&&!(a-1 in d))for(l in d){if(d.hasOwnProperty(l)&&e.call(d,d[l],l,d)===!1)break}else for(l=d[0];b<a&&e.call(d,l,b,d)!==!1;l=d[++b]);}};h.extend=function(){var d="constructor toString valueOf toLocaleString isPrototypeOf propertyIsEnumerable hasOwnProperty unique".split(" "),
e,b={constructor:function(){}},a;for(e in b)a=null;a===void 0&&(a=function(e,b){for(var k=d.length,a;k--;)if(b.hasOwnProperty(a=d[k]))e[a]=b[a]});h.extend=function(d,e){for(var b=Array.prototype.slice.call(arguments,1),k=0,l=b.length;k<l;k++){var e=b[k],c;for(c in e)e.hasOwnProperty(c)&&(d[c]=e[c]);a&&e&&a(d,e,1)}return d};return h.extend.apply(null,arguments)};h.splat=function(d){var e=h.type(d);return e==="undefined"?[]:e==="arguments"?Array.prototype.slice.call(d):e==="array"?d:[d]};for(var g=
Object.prototype.toString,f={},c={1:"element",3:"textnode",9:"document",11:"fragment"},a="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),j=0,b,e;b=a[j++];)if(e=h.win[b])try{f[g.call(new e)]=b.toLowerCase()}catch(l){}h.type=function(d){return d===null&&"null"||d===void 0&&"undefined"||d.nodeType&&c[d.nodeType]||d.length!==void 0&&(typeof d.length=="number"||d.length.tagName)&&(d.callee&&"arguments"||
d.alert&&"window"||d.item&&"nodelist")||f[g.call(d)]}})(ovi);ovi.provide("ovi.Class");
(function(h){function g(a){function c(){var b=this.Xj;this.Xj=c;var e;try{e=this instanceof c?new a(arguments):a.apply(this,arguments)}finally{this.Xj=b}return e}return c}function f(){var a=this.Xj;delete this.Xj;return a.ln.apply(this,arguments)}function c(){}h.Class=function(a){function j(){this.Yi&&this.Yi();return this.initialize?this.initialize.apply(this,arguments):this}a=a||{};if(!(this instanceof h.Class))return new h.Class(a);var b;if(a.Mixins){var e=[].concat(a.Mixins),l=[],d=0,n;for(delete a.Mixins;n=
e[d++];)for(b in n=n.prototype||n)typeof n[b]==="function"&&(b!=="initialize"?a[b]||(a[b]=n[b]):l.push(n.initialize));if(l.length>0)a.Yi=function(){k.Yi.ln&&k.Yi.ln.call(this);for(var d=0,e;e=l[d++];)e.call(this)}}e=a.Extends;delete a.Extends;d=a.Statics;delete a.Statics;var k;if(typeof e==="function"){c.prototype=e.prototype;k=new c;for(b in a)if(a.hasOwnProperty(b)){if(typeof k[b]==="function"&&typeof a[b]==="function")a[b]=g(a[b]),a[b].ln=k[b];k[b]=a[b]}k._super=f;k.yt=e}else k=a;if(a.Name)k.className=
a.Name,j.Name=k.className;delete k.Name;j.constructor=h.Class;j.prototype=k;j.prototype.constructor=j;d&&h.extend(j,d);return j}})(ovi);ovi.provide("ovi.Array");
(function(h){var g="forEach indexOf lastIndexOf map filter every some reduce reduceRight".split(" "),f=/^\s*function\s+\w+\s*\(\s*\)\s*\{\s*\[\s*native\s+code\s*\]\s*\}\s*$/,c={forEach:function(e,b,d){for(var a=e.length>>>0,k=0;k<a;k++)k in e&&b.call(d,e[k],k,e)},map:function(e,b,d){var a,k,m,c;if(e==null)throw new TypeError(" array is null or not defined");k=Object(e);m=k.length>>>0;if({}.toString.call(b)!="[object Function]")throw new TypeError(b+" is not a function");e=Array(m);for(a=0;a<m;)a in
k&&(c=k[a],c=b.call(d,c,a,k),e[a]=c),a++;return e},lastIndexOf:function(e,b,d){return this.so(e,b,d,-1)},so:function(e,b,d,a){var a=a||1,k=e.length>>>0;isNaN(d)?d=a>0?0:k-1:(d=Math[d<0?"ceil":"floor"](d),d<0?d+=k:a<0&&d>=k&&(d=k-1));for(;d>-1&&d<k;d+=a)if(d in e&&e[d]===b)return d;return-1}},a={isOviArray:1},j=g.length;for(c.indexOf=c.so;j--;){var b=g[j];typeof g[b]==="function"&&f.test(g[b])&&(!g[b].toString||f.test(g[b].toString))?(g.splice(j,1),c[b]=Array[b]||new Function("var ap = Array.prototype; return ap."+
b+".apply(arguments[0], ap.slice.call(arguments, 1));")):a[b]=new Function("return ovi.Array."+b+".apply(ovi.Array, [this].concat(ovi.splat(arguments)));")}h.Array=g.length?function(e){return(e=arguments.length?e:[]).isOviArray?e:h.extend(e,a)}:function(e){return arguments.length?e:[]};h.extend(h.Array,c)})(ovi);ovi.provide("nokia.maps.clustering._packaging.base");ovi.provide("nokia.maps.heatmap._packaging.base");ovi.provide("nokia.maps.util");
(function(h){function g(e){return function(b){return d.call(b)===e}}function f(d){this.message=d;this.name="ParserError"}var c={},a=Math,j=a.min,b=a.max,a=document,e=a.createElement("p"),l=e.appendChild(a.createTextNode("")),d={}.toString,a="Array Boolean Date Error Function Number Object RegExp String".split(" "),n=a.length;for(h.isArguments=g(d.call(arguments));n--;)h["is"+a[n]]=g(d.call(new this[a[n]]));ovi.extend(h,{Na:function(d,e){var b;arguments.length>1&&e!==c?(b=Error(d+": "+e),b.type=d):
b=Error(d);throw b;},c:function(d){h.Na("IllegalArgument",arguments.length?d:c)},fc:function(d){h.Na("IllegalState",arguments.length?d:c)},qn:function(d){h.Na("UnsupportedOperation",arguments.length?d:c)},Ls:function(d){h.Na("InternalError",arguments.length?d:c)},Om:function(d,e){var d=(""+d).split("."),b=d.length,a=0;for(arguments.length<2&&(e=window);a<b&&e!==void 0&&e!==null;a++)e=e[d[a]];return e},now:Date.now||function(){return+new Date},flatMerge:function(d,e,b,a){var l,c;for(l in e)if(c=e[l],
e.hasOwnProperty(l)&&(b||!d.hasOwnProperty(l))&&(!a||a(l,c)))d[l]=c;return d},getRootNameSpace:function(d){return ovi.win[d.split(".")[0]]},u:function(){},iq:function(){h.Na("Unimplemented abstract method.",c)},me:function(d,e){return(d%e+e)%e},cb:function(d,e,a){return j(b(+d,+e),+a)},jk:function(d){return function(e){return d&&d[e]||null}},Pq:self.XPathResult?function(d,e,b){d=(d.ownerDocument||d).evaluate(e,d,new nokia.maps.util.jk(b),XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);for(e=[];b=d.iterateNext();)e.push(b);
return e||[]}:function(d,e,b){var a=d.ownerDocument||d,l=a.getProperty("SelectionLanguage"),c=a.getProperty("SelectionNamespaces"),n,j="";for(n in b)b.hasOwnProperty(n)&&(j+="xmlns:"+n+'="'+b[n]+'" ');a.setProperty("SelectionLanguage","XPath");a.setProperty("SelectionNamespaces",j);d=d.selectNodes(e);a.setProperty("SelectionLanguage",l);a.setProperty("SelectionNamespaces",c);return d},wm:function(d){var e,b;if(window.ActiveXObject)e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.resolveExternals=
!1,e.validateOnParse=!1,e.loadXML(d),e.parseError.errorCode&&(b="error on line ".concat(e.parseError.line,": ",e.parseError.reason));else if(self.DOMParser&&(e=new DOMParser,e=e.parseFromString(d,"text/xml"),ovi.Array.indexOf([e.documentElement.nodeName,(e.documentElement.firstChild||{}).nodeName],"parsererror")>=0))d=e.getElementsByTagName("parsererror")[0],b=(d.childNodes[0].nodeType===3?d.childNodes[0].nodeValue+"\n":"")+d.childNodes[1].firstChild.nodeValue;if(b)throw new f(b);return e||null},
getConstructor:function(d){try{return!d.isNs?d:null}catch(e){return null}},sanitizeText:function(d){l.nodeValue=d;return e.innerHTML},wq:function(){var d=document.createElement("div"),e="";d.innerHTML="<svg></svg>";if(!d.firstChild)return!0;e=d.firstChild.toString();return this.Gk||(this.Gk=!(!window.SVGSVGElement||!(e==="[object HTMLElement]"||e==="[object SVGSVGElement]")))},Xb:function(d,e){for(var b=(d=d.split(" ")).length,a={};b--;)a[d[b]]=e;return a}})})(nokia.maps.util);ovi.provide("nokia.maps.util.OObject");
(function(h){var g={},f=0;h.OObject=new ovi.Class({initialize:function(c){for(var a in c)this.set(a,c[a])},set:function(c,a,j){var b;if(a===void 0&&j===void 0&&typeof c!=="string")for(b in c)this.He(b,c[b]);else this.He(c,a,j);return this},He:function(c,a,j){var b=this[c],e=this[g[c]||++f&&(g[c]=c+"Setter")];f>5E3&&(g={},f=0);if(j||a!==b)e&&(a=e.call(this,a)),b!==a&&this.Be(c,this[c]=a,b)},get:function(c){return this[c]},remove:function(c){var a=this[c];this.hasOwnProperty(c)&&(delete this[c],a!==
this[c]&&this.Be(c,this[c],a))},Be:function(c,a,j){var b=this.pe,e,l,d=1,n;if(b){n=b["*"];do if(n){n=n.slice(0);e=n.length;for(l=0;l<e;)if(n[l++].call(n[l++],this,c,a,j),this[c]!==a)return}while(d--&&(n=b[c]))}},addObserver:function(c,a,j){var b=this.pe||(this.pe={});(b[c]||(b[c]=[])).push(a,j);return this},removeObserver:function(c,a,j){var b=this.pe,e,l,d=0;if(b&&(e=b[c]))for(l=e.length;d<l;)e[d]===a&&e[d+1]===j&&(e.splice(d,2),l===2&&delete b[c]),d+=2;return this},observersSetter:function(c){for(var a in c)this.addObserver(a,
c[a])}})})(nokia.maps.util);ovi.provide("nokia.maps.util.ResourceLoader");
(function(h){var g=nokia.maps.util.c,f={css:function(c){/###RESOURCE_START###/im.test(c)&&(c=c.replace(/[\s\S]*###RESOURCE_START###\*\//im,""),c=c.replace(/\/\*###RESOURCE_END###[\s\S]*/im,""));return c},html:function(c){/###RESOURCE_START###/im.test(c)&&(c=c.replace(/[\s\S]*###RESOURCE_START###--\>/im,""),c=c.replace(/<\!--###RESOURCE_END###[\s\S]*/im,""));return c}};h.requireString=function(c){var a=c.split("."),c=a.pop(),j=a.join("."),b=ovi.getLoadPath(j,c),a=ovi.fk();a.open("GET",b,!1);a.send(null);
ovi.ej(a)?(j=ovi.provide(""+j),a=a.responseText,a.replace(/\n/g,""),f[c]&&(a=f[c](a)),j[c]=a):g("Unable to load "+this.hr+" status: "+a.status)};h.requireI18n=function(c){for(var a=h.config.packages.language,j=a.length,b=c||"nokia.maps";j--;)c=a[j].split("-"),h.requireString(b+".resources.ui.i18n."+(c.length===2?c[0]+"."+c[1]:c[0])+".translation.json")}})(nokia.maps);ovi.provide("nokia.maps.Config");
(function(h){function g(b,e){c(e)!=="string"&&(e="");return e+(e&&e.substr(-1)!=="."?".":"")+b}var f={},c=ovi.type,a=h.util.getRootNameSpace("nokia.maps").Settings,j=h.Config=new ovi.Class({initialize:function(){this.Fa={}},Statics:{setDefault:function(b,e,a){if(!a||!f[b])e===void 0||e===null?delete f[b]:f[b]=e},setDefaultNS:function(b,e,a,d){j.setDefault(g(e,b),a,d)},setDefaults:function(b,e){var a,d;for(a in b)if(!e||!f[a])d=b[a],d===void 0||d===null?delete f[a]:f[a]=d},setDefaultsNS:function(b,
e,a){var d,c,k;for(d in e)if(k=g(d,b),!a||!f[k])c=e[d],c===void 0||c===null?delete f[k]:f[k]=c},getDefault:function(b){return f[b]},getDefaultNS:function(b,e){return f[g(e,b)]}},get:function(b){return b in this.Fa?this.Fa[b]:f[b]},getNS:function(b,e){e=g(e,b);return e in this.Fa?this.Fa[e]:f[e]},set:function(b,e){this.Fa[b]=e;return this},setNS:function(b,e,a){this.Fa[g(e,b)]=a;return this},reset:function(b){delete this.Fa[b];return this},resetNS:function(b,e){e=g(e,b);delete this.Fa[e];return this}});
a&&(a.secureConnection&&j.setDefault("secureConnection",a.secureConnection),a.addObserver("secureConnection",function(){j.setDefault("secureConnection",a.secureConnection)}))})(nokia.maps);ovi&&ovi.provide("nokia.maps.Detector");nokia.maps=nokia.maps||{};
(function(h){function g(f,c){for(var a=c.length,j=null;a--;)if(c[a][0]===f){j=c[a];break}return j}h.Detector=function(f,c){this.definitions=f;this.omitted=c};h.Detector.prototype={detect:function(f){switch(f){case void 0:return this.detect(this.omitted);case "auto":return this.autoDetect();case "none":return null;default:return g(f,this.definitions)===null?null:f}},autoDetect:function(){for(var f=this.definitions,c=f.length,a=0;a<c;a++)if(this.isCapable(f[a][0]))return f[a][0]},isCapable:function(f){return(f=
g(f,this.definitions))&&f[1]()}}})(nokia.maps);ovi.provide("nokia.maps.util.LinkedList");
(function(h){var g=nokia.maps.util.c,f=!f,c=!f,a=h.LinkedList=Function(),j=h.LinkedList.Element=function(b){this.data=b};ovi.extend(a.prototype,{j:null,k:null,length:0,first:function(){return this.j},last:function(){return this.k},elementOf:function(b,e){for(var a=e||this.j;a&&a.data!==b;)a=a.next;return a||null},lastElementOf:function(b,e){for(var a=e||this.k;a&&a.data!==b;)a=a.prev;return a||null},toArray:function(b){for(var e=this.j,a=[];e;)b?a.push(e):a.push(e.data),e=e.next;return a},indexOf:function(b){var e=
b instanceof j,a=0,d=this.j;if(this.length>0)for(;d;){if(e){if(d===b)return a}else if(d.data===b)return a;a++;d=d.next}return-1},lastIndexOf:function(b){var e=b instanceof j,a=this.length-1,d=this.k;if(this.length>0)for(;d;){if(e){if(d===b)return a}else if(d.data===b)return a;a--;d=d.prev}return-1},get:function(b){var e=this.j;if(b instanceof j)return b;if((b=+b)<0)for(e=this.k;e&&++b;)e=e.prev;else for(;e&&b--;)e=e.next;return e},set:function(b,e){var a=this.j;if(b instanceof j)a=b,a.list!==this&&
g("Invalid index!");else if((b=+b)<0){for(a=this.k;a&&++b;)a=a.prev;if(!a)return this.unshift(e)}else if(b!==b)g("Invalid index!");else{for(;a&&b--;)a=a.next;if(!a)return this.push(e)}if(e instanceof j)return this.splice(b,1,e)&&this;a.data=e;return this},remove:function(b){var e,a;b instanceof j||(b=this.elementOf(b));if(!b||b.list!==this)return c;if(--this.length===0)this.j=this.k=null;else if(this.j===b){if(this.j=b.next)this.j.prev=null}else if(this.k===b){if(this.k=b.prev)this.k.next=null}else e=
b.prev,a=b.next,e.next=a,a.prev=e;b.list=b.prev=b.next=null;return f},sort:function(b,e){var a=this.j,d;if(!a)return this;this.j=this.k=null;for(this.length=0;a;)d=a.next,a.list=a.prev=a.next=null,this.addSorted(b,e,a),a=d;return this},addSorted:function(b,e){var a=arguments,d=a.length,e=e||this,c=1,k,m,p;a:for(;++c<d;)if(m=a[c],m instanceof j?m.list&&m.list.remove(m):m=new j(m),m.list=this,p=this.j,++this.length===1)this.j=this.k=m;else{for(;p;){k=b.call(e,m.data,p.data,m,p);if(k<=0){m.next=p;p===
this.j?this.j=p.prev=m:(m.prev=p.prev,m.prev.next=m,p.prev=m);continue a}p=p.next}m.prev=this.k;this.k=this.k.next=m}return this},shift:function(){var b;if(this.length<=0)return null;this.length--;b=this.j;if(this.j.next){if(this.j=this.j.next)this.j.prev=null}else this.j=this.k=null;b.list=b.prev=b.next=null;return b},unshift:function(){for(var b=arguments,e=b.length,a,d=-1;++d<e;)a=b[d],a instanceof j?a.list&&a.list.remove(a):a=new j(a),a.list=this,++this.length===1?this.j=this.k=a:(this.j.prev=
a,a.next=this.j,this.j=a);return this.length},next:function(a){a!==void 0&&a!==null&&!(a instanceof j)&&(a=this.elementOf(a));if(!a)return this.j;return a.next},prev:function(a){a!==void 0&&a!==null&&!(a instanceof j)&&(a=this.elementOf(a));if(!a)return this.k;return a.prev},push:function(){for(var a=arguments,e=a.length,l,d=-1;++d<e;)l=a[d],l instanceof j?l.list&&l.list.remove(l):l=new j(l),l.list=this,++this.length===1?this.j=this.k=l:(this.k.next=l,l.prev=this.k,this.k=l);return this.length},pop:function(){var a=
this.k;if(!a)return null;--this.length===0?this.j=this.k=null:(this.k=this.k.prev,this.k.next=null);a.list=a.prev=a.list=null;return a},splice:function(a,e){var l=arguments,d=l.length,c=1,k=this.j,m,p=[],f;if(ovi.type(a)!=="number")a instanceof j?(k=a,!k.list===this&&g("Invalid index given to LinkedList.splice!")):(k=this.elementOf(a))||g("Invalid index given to LinkedList.splice!");else if(a>=0)for(;--a>=0&&k;)k=k.next;else{for(k=this.k;++a<0&&k;)k=k.prev;if(!k)k=this.j}if(k)for(;--e>=0&&k;){m=k.next;
p[p.length]=k;if(--this.length===0)this.j=this.k=k.list=null;else if(k===this.j){if(this.j=k.next)this.j.prev=null;k.next=k.list=null}else k===this.k?(this.k=k.prev,this.k.next=k.prev=k.list=null):(f=k.prev,f.next=k.next,f.next.prev=f,k.prev=k.next=k.list=null);k=m}else k=this.k;if(!k)k=this.k;for(;++c<d;)(f=l[c])instanceof j?f.list&&f.list.remove(f):f=new j(f),++this.length===1?k=this.j=this.k=f:k===this.k?(k.next=f,f.prev=k,k=this.k=f):(f.next=k.next,f.next.prev=f,f.prev=k,k=k.next=f);return p}});
ovi.extend(j.prototype,{list:null,next:null,prev:null})})(nokia.maps.util);ovi.provide("nokia.maps.util.OList");
(function(h){var g=h.c;h.OList=new ovi.Class({initialize:function(f){this.U=ovi.Array(f||[])},J:function(f,c,a){this.U.splice(c,0,f);if(f=this.wa("add",f,c,a))return a&&h.fc(),this.ad(c,f),f},add:function(f,c){if(arguments.length<2)c=this.U.length;c!==+c&&g();this.J(f,c);return this},addAll:function(f,c){var a=f.length,j=this.U.length,b=0,e=Math;arguments.length<2&&(c=j);c!==+c&&g();for(j=c<0?e.max(0,j+c):e.min(j,c);b<a;b++)this.J(f[b],j+b);return this},remove:function(f){f=this.indexOf(f);return f<
0?null:this.removeAt(f)},removeAll:function(f){for(var c=f.length,a=0;a<c;a++)this.remove(f[a]);return this},ad:function(f,c){var a=this.U.splice(f,1)[0],j;if(j=this.wa("remove",a,f,c))return c&&h.fc(),this.J(a,f,j),j},removeAt:function(f){var c=this.get(f);return this.ad(f)?null:c},clear:function(){for(var f=this.U.length;f--;)this.ad(f)},set:function(f,c){var a;a=this.get(c);if(!this.ad(c))if(this.J(f,c))this.J(a,c);else return a},indexOf:function(f){return this.U.indexOf(f)},get:function(f){var c=
this.U;(f!==+f>>>0||f>=c.length)&&g();return c[f]},getLength:function(){return this.U.length},asArray:function(){return[].concat(this.U)},wa:function(f,c,a,j){var b=this.na,e,l;j||(j=1/0);if(b)for(l=0;l in b&&l<j;)if(b[l++].call(b[l++],this,f,c,a)){e=l;break}return e},addObserver:function(f,c){!h.isFunction(f)&&g("callback");var a=this.na||(this.na=[]),j=a.length;a[j++]=f;c&&(a[j]=c);a.length=++j},removeObserver:function(f,c){var a,j=0,b;if(a=this.na)for(b=a.length;j<b;)a[j]===f&&a[j+1]===c&&(a.splice(j,
2),b===2&&delete this.na),j+=2;return this}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Point");
(function(h){var g=Math,f=g.abs,c=g.sqrt,a=g.pow,j=g.round,b=g.floor,e=g.ceil,l=g.min,d=g.max,n=h.c,k=h.Point=function(d,e){this.x=+d;this.y=+e};ovi.extend(k.prototype,{validate:function(){return this.x===+this.x&&this.y===+this.y},equals:function(d){return d?this===d||this.x===d.x&&this.y===d.y:!1},clone:function(){return new k(this.x,this.y)},toString:function(){return this.x+", "+this.y},add:function(d){return new k(this.x+d.x,this.y+d.y)},sub:function(d){return new k(this.x-d.x,this.y-d.y)},multiply:function(d){return new k(this.x*
d,this.y*d)},divide:function(d){d===0&&n("divisor can not be Zero");return new k(this.x/d,this.y/d)},modulo:function(d){d===0&&n("divisor can not be Zero");return new k(this.x%d,this.y%d)},round:function(){return new k(j(this.x),j(this.y))},floor:function(){return new k(b(this.x),b(this.y))},ceil:function(){return new k(e(this.x),e(this.y))},len:function(){return c(this.x*this.x+this.y*this.y)},min:function(d){return new k(l(this.x,d.x),l(this.y,d.y))},max:function(e){return new k(d(this.x,e.x),d(this.y,
e.y))},span:function(d){return new k(f(this.x-d.x),f(this.y-d.y))},distance:function(d){return c(a(this.x-d.x,2)+a(this.y-d.y,2))},getNearest:function(d,e){var a=e.x-d.x,b=e.y-d.y,l;l=d;if(a||b)l=((this.x-d.x)*a+(this.y-d.y)*b)/(a*a+b*b),l=l<=0?d:l>=1?e:new k(d.x+l*a,d.y+l*b);return l},Oc:function(d,e,a){return d>=e-a&&d<=e+a},Vd:function(d,e,a,b){b=b||0;return e-b<=d&&a+b>=d||e+b>=d&&a-b<=d},Vg:function(d,e,b,k,l,n){return c(a((d-l)*(k-n)-(e-n)*(b-l),2)/(a(b-l,2)+a(k-n,2)))},isCoveredBy:function(d,
e,a){for(var b=this.x,k=this.y,l=d.length,c=l,n,j,f,g=d[0],h,E=0,H=0,O=e/2||0,T=a?1:3;h!="V"&&c>T;){n=d[--c];e=d[--c];f=d[c?c-1:(l+(c-1))%l];j=d[c?c-2:(l+(c-2))%l];if(this.Oc(e,b,O)&&this.Oc(n,k,O)||this.Oc(j,b,O)&&this.Oc(f,k,O))h="V";else if(!h&&e===b)j===b&&(n<k&&f>k||n>k&&f<k)||(g<=b&&j>b||g>=b&&j<b)&&(n>=k?++E:++H),h=this.Vd(k,n,f,O)&&this.Vg(b,k,e,n,j,f)<=O&&"E";else if(!h&&this.Vd(b,e,j,O)){if(e<b&&j>b||e>b&&j<b)g=n+(f-n)*((b-e)/(j-e)),E+=g>k,H+=g<k;h=this.Vd(k,n,f,O)&&this.Vg(b,k,e,n,j,f)<=
O&&"E"}g=e}return a&&h==="S"&&h||h||a&&H&&E%2&&"S"||!1}});k.fromObject=function(d){var e,a;return d instanceof k?d:d&&("x"in d&&"y"in d&&(e=d.x,a=d.y,1)||d.length===2&&(e=d[0],a=d[1],1))?new k(e,a):null};k.prototype.toString=function(){return this.x+", "+this.y}})(nokia.maps.util);ovi.provide("nokia.maps.util.Rectangle");
(function(h){var g=Math.max,f=h.Point,c=h.Rectangle=function(a){for(var c=a.length,b=this.topLeft=a[0].clone(),e=this.bottomRight=b.clone(),l,d;--c>=0;){d=(l=a[c]).x;l=l.y;if(d<b.x)b.x=d;else if(d>e.x)e.x=d;if(l<b.y)b.y=l;else if(l>e.y)e.y=l}return this};ovi.extend(c.prototype,{equals:function(a){var c,b,e,l;return!!a&&(c=this.topLeft).x===(e=a.topLeft).x&&c.y===e.y&&(b=this.bottomRight).x===(l=a.bottomRight).x&&b.y===l.y},addPoint:function(a){return new c([this.topLeft,this.bottomRight,a])},addPoints:function(a){return a.length?
new c(a.concat(this.topLeft,this.bottomRight)):this},getCenter:function(){var a=this.topLeft,c=this.bottomRight;return new f((a.x+c.x)/2,(a.y+c.y)/2)},centerTo:function(a){var j=this.bottomRight,b=a.span(this.topLeft),e=a.span(j),j=g(b.x,e.x),b=g(b.y,e.y);return new c([new f(a.x-j,a.y-b),new f(a.x+j,a.y+b)])},intersection:function(a){var j,b;return a&&(j=this.topLeft.max(a.topLeft||a)).x<=(b=this.bottomRight.min(a.bottomRight||a)).x&&j.y<=b.y?new c([j,b]):null},merge:function(a){return a?new c([this.topLeft.min(a.topLeft||
a),this.bottomRight.max(a.bottomRight||a)]):this.clone()},pad:function(a){return a?new c([this.topLeft.sub(new f(a,a)),this.bottomRight.add(new f(a,a))]):this.clone()},getWidth:function(){return this.bottomRight.x-this.topLeft.x},getHeight:function(){return this.bottomRight.y-this.topLeft.y},toString:function(){return"{ "+this.topLeft+", "+this.bottomRight+" }"},contains:function(a){if(a)var c=this.topLeft,b=this.bottomRight,e=e=a.topLeft||a,l=a.bottomRight||a;return!!a&&c.x<=e.x&&c.y<=e.y&&b.x>=
l.x&&b.y>=l.y},clone:function(){return new c([this.topLeft,this.bottomRight])},initialize:c});c.prototype.toString=function(){return"{ "+this.topLeft+", "+this.bottomRight+" }"}})(nokia.maps.util);ovi.provide("nokia.maps.util.RTreeNode");
(function(h){var g=Math.max,f=Math.min;h.RTreeNode=new ovi.Class({initialize:function(c,a){this.Leaf=c;this.ParentNode=a||null;this.Entries=[]},Leaf:null,Root:null,ParentNode:null,ParentEntry:null,Entries:null,X1:0,X2:0,Y1:0,Y2:0,Volume:null,addChild:function(c){this.Entries.push(c);this.Leaf=!1;c.ParentNode=this;c.ParentEntry=this.Entries.length-1;this.updateBoundingBox(c.X1,c.X2,c.Y1,c.Y2)},removeChild:function(c,a){for(var j=this.Entries,b=j.splice(c,1)[0],e=c,l=j.length;e<l;e++)j[e].ParentEntry--;
a&&this.calculateBoundingBox();return b},calculateBoundingBox:function(){var c=this.Entries,a=c.length;this.X1=Infinity;this.X2=-Infinity;this.Y1=Infinity;for(this.Y2=-Infinity;entry=c[--a];){if(entry.X1<this.X1)this.X1=entry.X1;if(entry.Y1<this.Y1)this.Y1=entry.Y1;if(entry.X2>this.X2)this.X2=entry.X2;if(entry.Y2>this.Y2)this.Y2=entry.Y2}this.Volume=(this.X2-this.X1)*(this.Y2-this.Y1)},updateBoundingBox:function(c,a,j,b){this.Volume===null?(this.X1=c,this.X2=a,this.Y1=j,this.Y2=b):(this.X1=f(c,this.X1),
this.X2=g(a,this.X2),this.Y1=f(j,this.Y1),this.Y2=g(b,this.Y2));this.Volume=(this.X2-this.X1)*(this.Y2-this.Y1)},getEnlargement:function(c,a,j,b){return(g(this.X2,a)-f(this.X1,c))*(g(this.Y2,b)-f(this.Y1,j))-this.Volume},overlaps:function(c,a,j,b){return c<this.X2&&a>this.X1&&j<this.Y2&&b>this.Y1}})})(nokia.maps.util);ovi.provide("nokia.maps.util.RTreeRecord");
(function(h){var g=Math.max,f=Math.min;h.RTreeRecord=new ovi.Class({initialize:function(c,a,j,b){var e;c>j&&(e=c,c=j,j=e);a>b&&(e=a,a=b,b=e);this.X1=c||0;this.Y1=a||0;this.X2=j||0;this.Y2=b||0;this.Leaf=!0},Id:null,X1:0,X2:0,Y1:0,Y2:0,Volume:null,Priority:32,getEnlargement:function(c,a,j,b){return(g(this.X2,a)-f(this.X1,c))*(g(this.Y2,b)-f(this.Y1,j))-this.Volume},overlaps:function(c,a,j,b){return c<this.X2&&a>this.X1&&j<this.Y2&&b>this.Y1}})})(nokia.maps.util);ovi.provide("ovi.Logger");
(function(h){function g(a,j){for(var b=c.length-1;b>-1;--b)try{c[b][a].apply(c[b],j)}catch(e){}}var f=!0,c=[];h.Logger={addLogger:function(a){if(a===null||typeof a!=="object"||typeof a.debug!=="function"||typeof a.info!=="function"||typeof a.warn!=="function"||typeof a.error!=="function")throw new TypeError("Illegal logger object");for(var j=c.length-1;j>-1;--j)if(c[j]===a)return g("warn",["The logger is already attached"]),!1;typeof a.initLogger==="function"&&a.initLogger();c.push(a);return!0},removeLogger:function(a){for(var j=
c.length-1;j>-1;--j)if(c[j]===a)return c.splice(j,1),typeof a.cleanupLogger==="function"&&a.cleanupLogger(),!0;g("warn",["The passed logger wasn't attached"]);return!1},removeAllLoggers:function(){var a=c;c=[];for(var j=a.length-1;j>-1;--j)if(typeof a[j].cleanupLogger==="function")try{a[j].cleanupLogger()}catch(b){}},isEnabled:function(){return f},enable:function(){f=!0},disable:function(){f=!1},debug:function(){f&&g("debug",arguments)},info:function(){f&&g("info",arguments)},warn:function(){f&&g("warn",
arguments)},error:function(){f&&g("error",arguments)}};h.debug=function(){h.Logger.debug.apply(this,arguments)};h.info=function(){h.Logger.info.apply(this,arguments)};h.warn=function(){h.Logger.warn.apply(this,arguments)};h.error=function(){h.Logger.error.apply(this,arguments)}})(ovi);ovi.provide("nokia.maps.util.Vector3D");
(function(h){var g=Math,f=h.c,c=g.sqrt,a=g.acos,j=180/Math.PI,b=h.Vector3D=function(e,a,d){this.x=+e;this.y=+a;this.z=+d};ovi.extend(b.prototype,{add:function(e){return new b(this.x+e.x,this.y+e.y,this.z+e.z)},subtract:function(e){return new b(this.x-e.x,this.y-e.y,this.z-e.z)},multiply:function(e){e instanceof b||f("Parameter should be an instanceof nokia.maps.util.Vector3D");return new b(this.x*e.x,this.y*e.y,this.z*e.z)},divide:function(e){(e.x===0||e.y===0||e.z===0)&&f("Vectors should not be divided by zero");
return new b(this.x/e.x,this.y/e.y,this.z/e.z)},angle:function(e,b,d,n){e=+e||0;d=d?e-this.x:this.x-e;e=n?e-this.y:this.y-(+b||0);e=!d&&!e?0:a(e/c(d*d+e*e))*j;d<0&&(e=360-e);return e},dot:function(e){e=this.multiply(e);return e.x+e.y+e.z},magnitude:function(){return c(this.dot(this))},normal:function(e){var a=this.x,d=this.y,c=this.z,k=e.x,m=e.y,e=e.z;return new b(d*e-c*m,-(a*e-c*k),a*m-d*k)},normalize:function(){var e=this.magnitude();return new b(this.x/e,this.y/e,this.z/e)}})})(nokia.maps.util);
ovi.provide("nokia.maps.util.Matrix3D");
(function(h){var g=Math,f=g.sqrt,c=g.sin,a=g.cos,j=g.tan,b=h.Point,e=h.Vector3D,l=h.Matrix3D=function(d){this.rows=d||[[1,0,0,0],[0,1,0,0],[0,0,1,0]]};ovi.extend(l.prototype,{ua:function(d){for(var e=this.rows,a=[[],[],[]],b=d[0],c=d[1],d=d[2],j,q,f,g,h,x=3;x--;)j=a[x],q=e[x],f=q[0],g=q[1],h=q[2],j[0]=f*b[0]+g*c[0]+h*d[0],j[1]=f*b[1]+g*c[1]+h*d[1],j[2]=f*b[2]+g*c[2]+h*d[2],j[3]=f*b[3]+g*c[3]+h*d[3]+q[3];return new l(a)},concat:function(d){return this.ua(d.rows)},scale:function(d,e,a){return this.ua([[d,
0,0,0],[0,e,0,0],[0,0,a,0]])},getScale:function(){var d=this.rows[0],a=this.rows[1],b=this.rows[2];return new e(f(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]),f(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),f(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]))},translate:function(d,e,a){return this.ua([[1,0,0,d],[0,1,0,e],[0,0,1,a]])},getTranslate:function(){return new e(this.rows[0][3],this.rows[1][3],this.rows[2][3])},rotateX:function(d){var e=c(d),d=a(d);return this.ua([[1,0,0,0],[0,d,e,0],[0,-e,d,0]])},rotateY:function(d){var e=c(d),d=a(d);
return this.ua([[d,0,-e,0],[0,1,0,0],[e,0,d,0]])},rotateZ:function(d){var e=c(d),d=a(d);return this.ua([[d,e,0,0],[-e,d,0,0],[0,0,1,0]])},skewX:function(d){return this.ua([[1,j(d),0,0],[0,1,0,0],[0,0,1,0]])},skewY:function(d){return this.ua([[1,0,0,0],[j(d),1,0,0],[0,0,1,0]])},transformVector:function(d){var a=this.rows,b=a[0],l=a[1],a=a[2],c=d.x,j=d.y,d=d.z;return new e(b[0]*c+b[1]*j+b[2]*d+b[3],l[0]*c+l[1]*j+l[2]*d+l[3],a[0]*c+a[1]*j+a[2]*d+a[3])},transformPoint:function(d){var e=this.rows,a=e[0],
e=e[1],l=d.x,d=d.y;return new b(a[0]*l+a[1]*d+a[3],e[0]*l+e[1]*d+e[3])},transformVectors:function(d,e){var a=this.rows,b=a[0],l=a[1],a=a[2],c,j,f,g,h=d.length;for(g=0;g<h;)c=+d[g++],j=+d[g++],f=+d[g++],e.splice.apply(e,[e.length,0,b[0]*c+b[1]*j+b[2]*f+b[3],l[0]*c+l[1]*j+l[2]*f+l[3],a[0]*c+a[1]*j+a[2]*f+a[3]])},transformPoints:function(d,e){var a=this.rows,b=a[0],a=a[1],l,c,j,f=d.length;for(j=0;j<f;)l=+d[j++],c=+d[j++],e.splice.apply(e,[e.length,0,b[0]*l+b[1]*c+b[3],a[0]*l+a[1]*c+a[3]])},clone:function(){for(var d=
this.rows,e=[],a=-1;++a<3;)e.push([].concat(d[a]));return ovi.extend(new l(e),this)}})})(nokia.maps.util);ovi.provide("nokia.maps.util.clipping");
(function(){var h=Math.sqrt,g=Math.random,f=nokia.maps.util.clipping={INTERSECTION:0,UNION:1,COMPONENT_SHAPE:2,COMPONENT_WINDOW:3,wl:function(c){var a=1,j=1;switch(~~(1*c)){case 1:j=a=0;break;case 2:a=0;j=1;break;case 3:a=1,j=0}return{pS:a,pC:j}},create:function(c,a,j,b,e,l,d,n,k,m){var p={};p.x=c;p.y=a;p.next=j;if(p.prev=b)p.prev.next=p;if(j)p.next.prev=p;p.nextPoly=e;p.neighbor=l;p.intersect=d;p.entry=n;p.visited=k;p.alpha=m;return p},mh:function(c){for(;c&&c.intersect;)c=c.next;return c},be:function(c){if(c)for(;c.next;)c=
c.next;return c},rl:function(c){var a=c;if(a){do a=a.next;while(a!=c&&(!a.intersect||a.intersect&&a.visited))}return a},ig:function(c){var a=f.be(c);a.prev.next=c;c.prev=a.prev},dist:function(c,a,j,b){return h((c-j)*(c-j)+(a-b)*(a-b))},intersect:function(c,a,j,b,e){function l(){d=c.x+k*(a.x-c.x);n=c.y+k*(a.y-c.y);p=f.dist(c.x,c.y,d,n)/f.dist(c.x,c.y,a.x,a.y);r=f.dist(j.x,j.y,d,n)/f.dist(j.x,j.y,b.x,b.y);q=1*d;h=1*n;e.alpha_p=p;e.alpha_q=r;e.xi=q;e.yi=h}var d,n,k,m,p,r,q,h;m=(a.x-c.x)*(b.y-j.y)-(a.y-
c.y)*(b.x-j.x);if(!m&&(c.origx=c.x,c.origy=c.y,c.x+=(g()-0.5)/1E4,c.y+=(g()-0.5)/1E4,m=(a.x-c.x)*(b.y-j.y)-(a.y-c.y)*(b.x-j.x),!m))return 0;k=((j.x-c.x)*(b.y-j.y)-(j.y-c.y)*(b.x-j.x))/m;m=((a.y-c.y)*(j.x-c.x)-(a.x-c.x)*(j.y-c.y))/m;if(k<0||k>1||m<0||m>1)return 0;l();if(p==0&&r>=0&&r<=1){if(!c.origx)c.origx=c.x,c.origy=c.y;c.x+=(g()-0.5)/1E4;c.y+=(g()-0.5)/1E4;l()}return 1},gi:function(c,a){var j,b,e=0,l;f.create(0,c.y,null,null,null,null,0,0,0,0);b=f.create(-2147483648,c.y,null,null,null,null,0,0,
0,0);for(j=a;j.next;j=j.next)(l=f.intersect(b,c,j,j.next,{}))&&e++;return e%2},hb:function(c,a,j){for(;a!=j&&a.alpha<c.alpha;)a=a.next;c.next=a;c.prev=a.prev;c.next.prev=c;c.prev.next=c},clip:function(c,a,j){var b,e,l,d,n,k,m;k={};b=f.wl(j);var j=b.pS,p=b.pC,r,q,g;if(a&&c){b=f.be(a);f.create(a.x,a.y,null,b,null,null,0,0,0,0);e=f.be(c);f.create(c.x,c.y,null,e,null,null,0,0,0,0);for(b=a;b.next;b=b.next)if(!b.intersect)for(e=c;e.next;e=e.next)if(!e.intersect&&(r=f.mh(b.next),q=f.mh(e.next),l=f.intersect(b,
r,e,q,k)))l=k.alpha_p,m=k.alpha_q,d=k.xi,n=k.yi,l=f.create(d,n,null,null,null,null,1,0,0,l),d=f.create(d,n,null,null,null,null,1,0,0,m),l.neighbor=d,d.neighbor=l,f.hb(l,b,r),f.hb(d,e,q);k=f.gi(a,c);j&&(k=1-k);for(b=a;b.next;b=b.next)if(b.intersect)b.entry=k,k=1-k;k=f.gi(c,a);p&&(k=1-k);for(e=c;e.next;e=e.next)if(e.intersect)e.entry=k,k=1-k;f.ig(a);for(f.ig(c);(c=f.rl(a))!=a;){for(j=null;!c.visited;c=c.neighbor)for(k=c.entry;;)if(j=f.create(c.x,c.y,j,null,null,null,0,0,0,0),c.visited=1,c=k?c.next:
c.prev,c.intersect){c.visited=1;break}j.nextPoly=g;g=j}return g}},En:function(c){c?console.log(c.intersect?"I":" ",c.entry?"E":" ",c.visited?"X":" ","(",c.origx?c.origx:c.x,",",c.origy?c.origy:c.y,")","alpha:",c.alpha,"point:",c,"neighbor:",c.neighbor,"nextPoly:",c.nextPoly):console.log("NULL")},Ws:function(c){var a=c;if(a){do f.En(a),a=a.next;while(a&&a!=c)}},prepareList:function(c){for(var a,j,b=0,e=c.length;b<e;b++){a=f.create(c[b].x,c[b].y,j,null,null,null,0,0,0,0);if(a.next=j)j.prev=a;j=a}return j}}})();
ovi.provide("nokia.maps.util.IBox");ovi.provide("nokia.maps.gfx.Color");
(function(){var h=Math,g=h.round,f=h.min,c=h.max,a=ovi.type,j=RegExp("^\\s*(maroon|red|orange|yellow|olive|purple|fuchsia|white|lime|green|navy|blue|aqua|teal|black|silver|gray)\\s*$|^\\s*[#]?([0-9a-f]{8,8})\\s*$|^\\s*[#]?([0-9a-f]{6,6})\\s*$|^\\s*[#]?([0-9a-f]{4,4})\\s*$|^\\s*[#]?([0-9a-f]{3,3})\\s*$|^\\s*(rgb[a]?)\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,?\\s*(\\d*[.]{0,1}\\d*)?\\s*\\)\\s*$","i"),b={maroon:"800000",red:"ff0000",orange:"ffa500",yellow:"ffff00",olive:"808000",purple:"800080",
fuchsia:"ff00ff",white:"ffffff",lime:"00ff00",green:"008000",navy:"000080",blue:"0000ff",aqua:"00ffff",teal:"008080",black:"000000",silver:"c0c0c0",gray:"808080"},e=nokia.maps.gfx.Color=new ovi.Class({Statics:{byteOf:function(e){return g(+e*255)&255},percentOf:function(e){e=+e*0.003921569;return e>1?1:e<0?0:e},compress:function(e,d,a,b){return(+e&255)<<24|(+d&255)<<16|(+a&255)<<8|+b&255},red:function(e){return+e>>>24},green:function(e){return+e>>>16&255},blue:function(e){return+e>>>8&255},alpha:function(e){return+e&
255},parseCss:function(l,d){var n=a(d)==="number"?g(d*255)&255:255,k=n.toString(16).toLowerCase(),m,p,r,q=j.exec(l);if(!q||q.length<2)return null;k.length<2&&(k="0"+k);if(q[1])p=b[q[1]]+k;else if(q[2])p=q[2];else if(q[3])p=q[3]+k;else if((m=q[4])||(m=q[5]))p=m.charAt(0)+m.charAt(0)+m.charAt(1)+m.charAt(1)+m.charAt(2)+m.charAt(2)+(m.length===4?m.charAt(3)+m.charAt(3):k);else if(q[6])return k=+q[7]&255,m=+q[8]&255,p=+q[9]&255,r=isNaN(r=f(1,c(0,q[10])))?n:e.byteOf(r)&255,e.compress(k,m,p,r);if(p&&p.length===
8)return parseInt("0x"+p,16)&4294967295;return null},getCssRGBA:function(a){return e.getCssRGB(a,!0)},getCssRGB:function(a,d){return"rgb"+(d=d===!0?"a":"")+"("+e.red(a)+", "+e.green(a)+", "+e.blue(a)+(d?", "+g(e.percentOf(e.alpha(a))*1E10)/1E10:"")+")"},getCssHex:function(e,d,b){e=+e;(d=a(d)==="boolean"?d:!1)||(e>>>=8);e<0&&(e=4294967296+e);b=b||"#";e=e.toString(16);for(d=d?8:6;e.length<d;)e="0"+e;return b+e}}})})();ovi.provide("nokia.maps.util.Brush");
(function(h){var g=nokia.maps.gfx.Color;h.Brush=new ovi.Class({color:"#05A6",fill:"solid",initialize:function(f,c){var a,j,b=h.c;f&&("color"in f&&(a=g.parseCss(f.color),a===null&&b("Invalid color set!")),"fill"in f&&f.fill!=="solid"&&f.fill!=="none"&&b("Invalid fill set!"));if(c instanceof nokia.maps.util.Brush)for(j in c)this[j]=c[j];for(j in f)this[j]=f[j]}})})(nokia.maps.util);ovi.provide("ovi.dom.common");
ovi.dom.addEvent=function(h,g,f,c){h.addEventListener?h.addEventListener(g,f,c!==void 0?c:!1):h.attachEvent&&h.attachEvent("on"+g,f)};ovi.dom.removeEvent=function(h,g,f,c){h.removeEventListener?h.removeEventListener(g,f,c!==void 0?c:!1):h.detachEvent&&h.detachEvent("on"+g,f)};ovi.dom.addClass=function(h){for(var g=Array.prototype.slice.call(arguments,1),f=h.className,c=" "+f+" ",a=0,j;j=g[a++];)c.indexOf(" "+j+" ")===-1&&(f+=(f?" ":"")+j);return h.className=f};
ovi.dom.removeClass=function(h){for(var g=Array.prototype.slice.call(arguments,1),f=h.className.split(" "),c=0,a=0,j=f.length,b;b=g[c++];)for(a=j;a--;)b===f[a]&&f.splice(a,1);return h.className=f.join(" ")};ovi.dom.hasClass=function(h){for(var g=Array.prototype.slice.call(arguments,1),f=" "+h.className+" ",c=g.length,a=0,j;c&&(j=g[a++]);)c=f.indexOf(" "+j+" ")>-1;return c};
ovi.dom.toggleClass=function(h){for(var g=Array.prototype.slice.call(arguments,1),f=" "+h.className+" ",c,a=0,j=g.length;a<j;a++)c=g[a],(f.indexOf(" "+c+" ")>-1?ovi.dom.removeClass:ovi.dom.addClass)(h,c)};ovi.dom.offset=function(h,g){var f=h.getBoundingClientRect(),c=h.ownerDocument,a=c.documentElement,j=c.body,c=f.top+(a.scrollTop||j.scrollTop)-a.clientTop,f=f.left+(a.scrollLeft||j.scrollLeft)-a.clientLeft;g&&(a=ovi.dom.offset(g),c-=a.top,f-=a.left);return{top:c,left:f}};
ovi.dom.dimensions=function(h){if("scrollTo"in h&&h.document)return h=h.document.documentElement,{width:h.clientWidth,height:h.clientHeight};return{width:h.offsetWidth,height:h.offsetHeight}};
ovi.dom.getStyle=function(){if(window.getComputedStyle){var h=["moz","ms","webkit"];ovi.dom.getStyle=function(c,a){var j=c.ownerDocument.defaultView;if(!j)return null;var j=j.getComputedStyle(c,null),b=j.getPropertyValue(a);if(b)return b;for(var e=0,l=h.length;e<l;e++)if(b=j.getPropertyValue("-"+h[e]+"-"+a))return b;return null}}else{var g=/-([a-z])/ig,f=function(c,a){return a.toUpperCase()};ovi.dom.getStyle=function(c,a){a=a==="float"?"styleFloat":a.replace(g,f);return c.currentStyle[a]||c.currentStyle["Ms"+
a.charAt(0).toUpperCase()+a.slice(1)]||null}}return ovi.dom.getStyle.apply(null,arguments)};ovi.provide("nokia.maps.map.component.Component");
nokia.maps.map.component.Component=new ovi.Class({Extends:nokia.maps.util.OObject,getId:function(){if(window)return this.d},getVersion:function(){return this.n},queryReference:function(){this.Qh++;return this},releaseReference:function(){return--this.Qh},attach:function(h){this.mapDisplay&&nokia.maps.util.c("Error: A component can only be attached to one display!");this.mapDisplay=h},detach:function(){delete this.mapDisplay},destroy:nokia.maps.util.u,Qh:1});
(function(h){function g(f){ovi.warn("There is no UI defined for the display. Are you missing the UI package?");var c=new h.Component;c.d=f+"Dummy";c.n="0";return c}h.Overview=function(){return g("Overview")};h.TypeSelector=function(){return g("TypeSelector")};h.DistanceMeasurement=function(){return g("DistanceMeasurement")};h.InfoBubbles=function(){return g("InfoBubbles")};h.RightClick=function(){return g("RightClick")};h.ScaleBar=function(){return g("ScaleBar")};h.ViewControl=function(){return g("ViewControl")};
h.ZoomBar=function(){return g("ZoomBar")};h.ZoomRectangle=function(){return g("ZoomRectangle")};h.OverlaysSelector=function(){return g("OverlaysSelector")};h.ContextMenu=function(){return g("ContextMenu")};h.Traffic=function(){return g("Traffic")};h.PublicTransport=function(){return g("PublicTransport")}})(nokia.maps.map.component);ovi.provide("nokia.maps.positioning._packaging.base");ovi.provide("ovi.json");
(function(){function h(f,c){if(typeof c==="string"){var a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?Z$/.exec(c);if(a)return new Date(Date.UTC(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6],+a[8]||0))}return c}var g=window.JSON||{};window.JSON||function(){function f(d){return d<10?"0"+d:d}function c(e){b.lastIndex=0;return b.test(e)?'"'+e.replace(b,function(e){var a=d[e];return typeof a==="string"?a:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function a(d,b){var j,
q,g,h,w=e,x,y=b[d];y&&typeof y==="object"&&(j=Object.prototype.toString.apply(y),j==="[object Date]"?y=y.getUTCFullYear()+"-"+f(y.getUTCMonth()+1)+"-"+f(y.getUTCDate())+"T"+f(y.getUTCHours())+":"+f(y.getUTCMinutes())+":"+f(y.getUTCSeconds())+"Z":k.test(j)&&(y=y.valueOf()));typeof n==="function"&&(y=n.call(b,d,y));switch(typeof y){case "string":return c(y);case "number":return isFinite(y)?String(y):"null";case "boolean":case "null":return String(y);case "object":if(!y)return"null";e+=l;x=[];if(Object.prototype.toString.apply(y)===
"[object Array]"){h=y.length;for(j=0;j<h;j+=1)x[j]=a(j,y)||"null";g=x.length===0?"[]":e?"[\n"+e+x.join(",\n"+e)+"\n"+w+"]":"["+x.join(",")+"]";e=w;return g}if(n&&typeof n==="object"){h=n.length;for(j=0;j<h;j+=1)q=n[j],typeof q==="string"&&(g=a(q,y))&&x.push(c(q)+(e?": ":":")+g)}else for(q in y)Object.hasOwnProperty.call(y,q)&&(g=a(q,y))&&x.push(c(q)+(e?": ":":")+g);g=x.length===0?"{}":e?"{\n"+e+x.join(",\n"+e)+"\n"+w+"}":"{"+x.join(",")+"}";e=w;return g}}var j=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,d={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n,k=/\[object (String|Number|Boolean)\]/;if(typeof g.stringify!=="function")g.stringify=function(d,b,k){var c;l=e="";if(typeof k==="number")for(c=0;c<k;c+=1)l+=" ";else typeof k==="string"&&(l=k);if((n=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");
return a("",{"":d})};if(typeof g.parse!=="function")g.parse=function(d,e){function a(d,b){var k,l,c=d[b];if(c&&typeof c==="object")for(k in c)Object.hasOwnProperty.call(c,k)&&(l=a(c,k),l!==void 0?c[k]=l:delete c[k]);return e.call(d,b,c)}var b;j.lastIndex=0;j.test(d)&&(d=d.replace(j,function(d){return"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(d.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=eval("("+d+")"),typeof e==="function"?a({"":b},""):b;throw new SyntaxError("JSON.parse");}}();ovi.json={parse:function(f,c){return g.parse(f,c===void 0?h:c)},stringify:g.stringify}})();ovi.provide("nokia.maps.net.IResult");ovi.provide("nokia.maps.behavior._packaging.base");ovi.provide("nokia.maps.map._packaging.base");ovi.provide("nokia.maps.dom.Touch");ovi.provide("nokia.maps.dom");
(function(h){function g(e,a){e.getContext&&e.getContext("2d").drawImage(a,0,0)}var f=null,c={type:"load"},a={type:"error"},j=function(){var e=document.createElement("script");e.text="//";return!e.cloneNode(!0).text}(),b=ovi.browser.msie;ovi.extend(h,{contains:b?function(e,a){return e.contains(a)}:function(e,a){for(;a;){if(a===e)return!0;a=a.parentNode}return!1},loadImg:function(e,a,d,b){var k,m,p=!0;e||(e=new Image);e.onload=e.onerror=function(a){e.onload=e.onerror=null;k=(a||e.ownerDocument.parentWindow.event).type===
"load";d&&d.call(b,e,k,p)};e.src=a;if(k===void 0){if(e.complete)e.onload.call(e,(m=e.naturalWidth)||m===void 0?c:1);p=!1}return k},cancelImg:function(e,b){var d=!1;b&&e.onerror?(e.onerror.call(e,a),d=!0):e.onload=e.onerror=null;e.removeAttribute("src");return d},cloneNode:j?function(e,a){for(var d=e.cloneNode(!!a),b=e.getElementsByTagName("script"),k=d.getElementsByTagName("script"),c=b.length;c--;)k[c].text=b[c].text;if(e.nodeName==="SCRIPT")d.text=e.text;a&&g(d,e);return d}:function(e,a){var d=
e.cloneNode(!!a);a&&g(d,e);return d},importNode:document.importNode&&document.importNode.toString().indexOf("[native code]")>0&&!b?function(e,a,d){e=e.importNode(a,!!d);d&&g(e,a);return e}:function(e,a,d){var b,k,c,p,j;if(e!==a.ownerDocument){c=a.attributes;b=e.createElement(a.nodeName);for(k=c.length;k--;)if((p=c[k]).specified)(j=p.name)==="style"?b.style.cssText=a.style.cssText:j==="class"?b.className=a.className:b.setAttribute(j,p.value);if(d)for(k=a.firstChild;k;)b.appendChild(h.importNode(e,
k,d)),k=k.nextSibling}else b=a.cloneNode(!!d);d&&g(b,a);return b},isQuirksMode:function(e){ovi.type(e)!=="document"&&(e=document);if(!e||typeof e.compatMode!=="string")return!0;return e.compatMode==="BackCompat"||e.compatMode==="QuirksMode"},getWindowSize:function(e){if(ovi.type(e)!=="window"&&(e=window,ovi.type(e)!=="window"))return null;var a=document.images&&document.compatMode&&document.compatMode.indexOf("CSS1")>=0,d=e.document;if(e.innerWidth)return{width:e.innerWidth,height:e.innerHeight};
if(a)return e=d.body.parentElement,{width:e.clientWidth,height:e.clientHeight};if(d.body&&d.body.clientWidth)return{width:d.body.clientWidth,height:d.body.clientHeight};return null},setStyle:function(e,a){var d={constructor:!0,prototype:!0};if(a&&e&&e.style)for(var b in a)!d[b]&&b in e.style&&(e.style[b]=a[b]);return e},getStyle:function(e,a){if(document.defaultView&&document.defaultView.getComputedStyle){var d=e.ownerDocument.defaultView.getComputedStyle(e,"");if(!d)return!1;return d[a]}else return e.currentStyle[a]},
ownerWindow:function(e){var a=ovi.type(e),d=null;if(!e)return null;if(a==="window")return e;if(a==="document")d=e;else if(e.ownerDocument)d=e.ownerDocument;else return null;return d.parentWindow||d.defaultView},getScrollBarSize:function(){if(f)return f;var e=document,a=0,d=0,b=0,k=0,c=0,p=0,j=e.createElement("P"),q=e.createElement("P"),g,h;try{g=j.style;h=q.style;g.height="200px";g.width="200px";h.position="absolute";h.top=0;h.left=0;h.visibility="hidden";h.width="100px";h.height="100px";h.overflow=
"hidden";q.appendChild(j);e.body.appendChild(q);d=q.offsetWidth;c=q.offsetHeight;h.overflow="scroll";b=q.offsetWidth;p=q.offsetHeight;if(d===b)b=q.clientWidth;if(c===p)p=q.clientHeight;e.body.removeChild(q);a=d-b;k=c-p}catch(w){k=a=0}return k!==k||a!==a||k<=0||a<=0?f={width:17,height:17}:f={width:a,height:k}},ha:function(a,b,d){b=a.ownerDocument.createElement(b);if(d)b.className=d;a.appendChild(b);return b},lq:function(a){var b=a.styleSheets,d=a.createElement("style");d.setAttribute("type","text/css");
a.getElementsByTagName("head")[0].appendChild(d);return d=b[b.length-1]},kq:b?function(a,b,d){a.addRule(b,d)}:function(a,b,d){var c=a.cssRules;a.insertRule(b.concat("{",d,"}"),c?c.length:0)},xd:b&&document.createElement("p").style.opacity===void 0?function(a,b){var d=a.style,c=Math.round(b*100);d.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+c+')"';d.filter="alpha(opacity="+c+")"}:function(a,b){a.style.opacity=b},ir:b?function(a){var b=this.yl(a),d=b.getPropertyValue("background-image"),
c,k,m,p=a.ownerDocument,j;if(d.toLowerCase().indexOf(".png")!=-1)c=b.getPropertyValue("background-position-x"),b=b.getPropertyValue("background-position-y"),j=p.createElement("img"),m=p.createElement("div"),m.style.position="absolute",m.style.left=c,m.style.top=b,k=p.createElement("div"),m.appendChild(k),k.style.position="absolute",a.style.overflow="hidden",j.onload=function(){k.style.filter=["progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src='",d,"', sizingMethod='scale')"].join("");
k.style.width=this.width+"px";k.style.height=this.height+"px";m.style.width=this.width+"px";m.style.height=this.height+"px"},d=d.substr(5,d.length-7),j.src=d,a.insertBefore(m,a.firstChild),a.style.background="",a.opacityWrapper=m}:function(){},yl:b&&!window.getComputedStyle?function(a){return new function(a){this.el=a;this.getPropertyValue=function(d){var a=/(\-([a-z]){1})/g;d=="float"&&(d="styleFloat");a.test(d)&&(d=d.replace(a,function(d,a,e){return e.toUpperCase()}));return this.el.currentStyle[d]?
this.el.currentStyle[d]:null}}(a)}:window.getComputedStyle,findElement:function(a,b){if(b.querySelectorAll){var d=b.querySelectorAll("."+a);return d.length?d[d.length-1]:null}for(var c=RegExp("(^|\\s)"+a+"($|\\s)"),d=b.getElementsByTagName("*"),k=d.length;k--;)if(c.test(d[k].className))return d[k];return null}})})(nokia.maps.dom);ovi.provide("nokia.maps.dom.TouchList");
window.navigator.msPointerEnabled&&function(h){function g(f){ovi.extend(f,{Kg:function(c){for(var a=this.length,j=-1;a--;)if(this[a].pointerId===c.pointerId){j=a;break}return j},nk:function(c){for(var a=0,j=c.length;a<j;a++)this.J(c[a])},J:function(c){var a=this.Kg(c);if(a===-1)a=this.length;c.type="MSPointerMove";c.identifier=c.pointerId;c.force=c.pressure;c.radiusX=c.radiusY=1;c.rotationAngle=0;this[a]=c},Da:function(c){c=this.Kg(c);c>=0&&this.splice(c,1)},identifiedTouch:function(c){for(var a=
this.length;a--;)if(this[a].identifier===c)return this[a];return null},item:function(c){return this[c]}})}h.TouchList=function(){function f(){var c=Object.create(Array.prototype),c=Array.apply(c,arguments)||c;g(c);return c}ovi.extend(f,{fromArray:function(c){return f.apply(null,c)},isArray:function(c){return Object.prototype.toString.call(c).toLowerCase()==="[object array]"}});return f}()}(nokia.maps.dom);ovi.provide("nokia.maps.gfx.Image");
(function(){var h=nokia.maps.gfx.Image=new ovi.Class({Statics:{d:0,fromObjectListener:[],fromObject:function(g,f){for(var c=h.fromObjectListener,a,j=c.length,b=-1;++b<j;)if(a=c[b](g,f||document))break;return a}}})})();ovi.provide("nokia.maps.gfx.BitmapImage");
(function(){var h=ovi.browser.msie&&ovi.browser.version<=9,g=ovi.browser.version>=8,f=nokia.maps.dom,c=ovi.type,a=f.setStyle,j=nokia.maps.gfx.Image,b=nokia.maps.util.c,e=nokia.maps.gfx.BitmapImage=new ovi.Class({Extends:nokia.maps.gfx.Image,initialize:function(a,d,e,k,m,p){var f=c(a),q;this.d=j.d++;this.D=d||document;this.width=e||0;this.height=k||0;this.opacity=1;this.offsetX=c(m)==="number"?m:void 0;this.offsetY=c(p)==="number"?p:void 0;if(f==="string")this.src=a;else if(f==="element"){if(this.src=
a.src,a.complete&&a.ownerDocument===this.D){try{this.da=q=a.clone()}catch(g){this.da=q=null}if(q)this.state=1,this.width=this.width||q.naturalWidth||q.width,this.height=this.height||q.naturalHeight||q.height,this.naturalWidth=q.naturalWidth||q.width,this.naturalHeight=q.naturalHeight||q.height}}else b("IllegalArgument 'image'")},isBitmap:1,getDocument:function(){return this.D},qh:function(){var a=-1,d=this.Sb,e=d&&d.length||0,b;for(this.Sb=null;++a<e;){b=d[a];try{b[0].apply(b[1],b[2])}catch(c){ovi.warn("Exception in user defined callback within gfx.BitmapImage!"),
ovi.debug(c)}}},qm:function(a,d){var e=-1,b=this.ue,c=b&&b.length||0;this.state=d?1:-1;if(this.state===1){this.naturalWidth=a.naturalWidth||a.width;this.naturalHeight=a.naturalHeight||a.height;this.width=this.width||a.naturalWidth||a.width;for(this.height=this.height||a.naturalHeight||a.height;++e<c;)this.Ha(b[e]);this.ue=null}this.qh()},prepare:function(a,d){var e,b,m=!1,p,d=d||this;if(c(a)==="function"){e=this.Sb||(this.Sb=[]);p=[].concat(arguments);p.splice(0,2,this);for(b=e.length;b--;)if(e[b][0]===
a&&e[b][1]===d){m=!0;break}!m&&e.push([a,d,p])}if(this.state===1)this.qh();else if(this.state!==0)this.state=0,this.da=this.da||this.D.createElement("IMG"),f.loadImg(this.da,this.src,this.qm,this)},Ha:function(e){var d=this.width&&this.height,b;if(c(this.state)!=="number"||this.state<=0)if(this.prepare(),this.state<=0)return e=e||this.D.createElement("DIV"),a(e,{position:"relative",overflow:"hidden",width:d?this.width+"px":"0",height:d?this.height+"px":"0"}),(this.ue||(this.ue=[])).push(e),e;d=c(this.offsetX)===
"number"&&c(this.offsetY)==="number";try{b=this.da.cloneNode(!0)}catch(k){b=this.D.createElement("IMG"),b.src=this.src}d&&a(b,{position:"absolute",left:-this.offsetX+"px",top:-this.offsetY+"px"});if(d||h){e=e||this.D.createElement("DIV");a(e,{position:"relative",overflow:"hidden",width:this.width+"px",height:this.height+"px"});e.appendChild(b);if(h)b.style.position="absolute";return e}b.style.width=this.width+"px";b.style.height=this.height+"px";if(e)return e.style.width=this.width+"px",e.style.height=
this.height+"px",e.appendChild(b),e;return b},createElement:function(a){var d=this.Ha();this.setOpacity(d,a);return d},setOpacity:function(e,d){var n=c(d)==="number"&&d>=0&&d<=1?d:this.opacity,k=e.ownerDocument,m,p=Math.round(n*100);((n=+n)!==n||n<0||n>1)&&b("Invalid opacity!");e.$n$opacity=n;if(h){if(n<1&&!e.$n$opacityHack){for(e.$n$opacityHack=!0;e.firstChild;)e.removeChild(e.firstChild);m=k.createElement("DIV");if(!g)m.style.filter="alpha(opacity="+p+")";a(m,{position:"relative",width:this.width+
"px",height:this.height+"px",overflow:"hidden"});e.$n$alphaImageLoader="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod='scale', src='"+this.src+"')";k=k.createElement("DIV");k.style.filter=e.$n$alphaImageLoader+(g?"progid:DXImageTransform.Microsoft.Alpha(opacity="+p+")":"");a(k,{position:"absolute",top:(this.offsetX||0)+"px",left:(this.offsetY||0)+"px",width:this.width+"px",height:this.height+"px"});m.appendChild(k);e.appendChild(m)}if(n<1||e.$n$opacityHack)if(e.firstChild.firstChild.style.filter=
e.$n$alphaImageLoader+(g?"progid:DXImageTransform.Microsoft.Alpha(opacity="+p+")":""),!g)e.firstChild.style.filter="alpha(opacity="+p+")"}else e.style.opacity=n;return this},clone:function(a,d,b,k,m){a=a||this.D;d=c(d)==="number"?d:this.width;b=c(b)==="number"?b:this.height;k=c(k)==="number"?k:this.offsetX;m=c(m)==="number"?m:this.offsetY;if(a===this.D)return a=new e(this.src,a,d,b,k,m),this.state>0&&ovi.extend(a,{state:this.state,da:this.da,naturalWidth:this.naturalWidth,naturalHeight:this.naturalHeight,
width:d,height:b,offsetX:k,offsetY:m}),a;return new e(this.src,a,this.width,this.height,this.offsetX,this.offsetY)}});j.fromObjectListener.push(function(a,d){if(a instanceof e)return a;var b=c(a);if(b==="element"&&c(a.src)==="string"&&a.ownerDocument)return new e(a,d);if(b==="string"&&a.length)return new e(a,d)})})();ovi.provide("nokia.maps.gfx.Painter");nokia.maps.gfx.Painter=new ovi.Class({Statics:{defaultPainter:null,Rf:function(h){return(h=+h)!==h||h<0||h>1?1:h}}});ovi.provide("nokia.maps.util.FontHelper");
(function(h){function g(a,c){return a=a.replace(RegExp("(?:((?:x*-)?small(?:er)?(?![-])|medium|(?:x*-)?large(?:r)?|[0-9]*\\.?[0-9]+(?:px|pt|em|ex|%)))(?:/((?:[0-9]*\\.?[0-9]+(?:px|pt|em|ex|%)|normal)))?","gi"),function(a,e,l){if(e&&e!=="")c.size=e;if(l&&l!=="")c.lineHeight=l;return""})}function f(a,c){var b=[],a=a.replace(RegExp("(?:(italic|oblique)|(small-caps)|(bold(?:er)?|lighter|[1-9]00)|(inherit|normal))+","gi"),function(a,l,d,n,k){l&&l!==""?c.style=l:d&&d!==""?c.variant=d:n&&n!==""?c.weight=
n:k&&k!==""&&b.push(k);return""});!c.style&&b.length&&(c.style=b.shift());!c.variant&&b.length&&(c.variant=b.shift());!c.weight&&b.length&&(c.weight=b.shift());return a}var c=h.c;h.FontHelper={parse:function(a){var c={},b=0,e=[],l,a=a.replace(RegExp("'.*'|\".*\"","gi"),function(d){l="_s_"+b;e[b]=d;b++;return l}),a=g(a,c),a=f(a,c),a=a.replace(/_s_([\d]+)/,function(d,a){return e[a]}),a=a.replace(/^[\s]+/,"");if(a!=="")c.family=a;if(typeof c.size==="string")c.size=h.FontHelper.ph(c.size);return c},ph:function(a){var j=
/([0-9]*(\.[0-9]*){0,1}(e[\+\-]{1}[0-9]*){0,1})\s*([a-zA-Z]+)/g,b=j.exec(a);j.exec("");if(b){a=parseFloat(b[1]);switch(b=b[4].toLowerCase()){case "pt":a=a*96/72;break;case "pc":a=a*96/72*12;break;case "mm":a=a*96/25.4;break;case "cm":a=a*96/25.4*10;break;case "in":a*=96;break;case "px":break;case "em":case "ex":c("Unsupported font size unit: "+b);break;default:c("Unknown font size unit: "+b)}return a+"px"}return parseFloat(a)+"px"},toString:function(a){var c=[];a.style&&c.push(a.style);a.variant&&
c.push(a.variant);a.weight&&c.push(a.weight);a.size&&(a.lineHeight?c.push(a.size+"/"+a.lineHeight):c.push(a.size));a.family&&c.push(a.family);return c.join(" ")}}})(nokia.maps.util);ovi.provide("nokia.maps.geo.Coordinate");
(function(h){var g=h.util,f=Math,c=f.abs,a=f.floor,j=f.round,b=f.min,e=f.log,l=f.tan,d=f.sqrt,n=f.pow,k=f.sin,m=f.cos,p=f.asin,r=f.atan2,q=f.PI,u=q/180,s=q/4,w=q/2,x=q*2,y=q*3,v=180/q,z=h.geo.Coordinate=function(d,a,e,b){b||z.isValid(d,a,e)||g.c("Coordinate: lat:"+d+", lng:"+a+(e?", alt:"+e:""));this.longitude=+a;this.latitude=+d;if(e!==void 0)this.altitude=+e};ovi.extend(z.prototype,{altitude:void 0,distance:function(a){var e=this.latitude*u,c=a.latitude*u;return 12742E3*p(b(1,d(n(k((e-c)/2),2)+
m(e)*m(c)*n(k((this.longitude*u-a.longitude*u)/2),2))))},Gn:function(d,a){if(a/=6371E3){d*=u;var e=u*this.latitude,b=k(e),c=k(a),l=m(a),n=u*this.longitude,j=m(e),e=p(j*m(d)*c+b*l),b=r(k(d)*j*c,l-b*k(e)),n=((n+b+q)%(2*q)-q)*v}return a?new z(e*v,(n+540)%360-180):this},walk:function(d,a,b){var p,n,j,f,r;if(b)return this.Gn(d,a);if(!(((d%=360)+90)%180))return d=this.longitude+a/(x*m(this.latitude*u)*6371E3)*(d===270?-360:360),new z(this.latitude,(d+540)%360-180);if(a/=6371E3)d*=u,p=this.latitude*u,n=
this.longitude*u,j=p+a*m(d),f=j-p,b=e(l(j/2+s)/l(p/2+s)),b=!isNaN(f/b)?f/b:m(p),r=a*k(d)/b,c(j)>w&&(j=j>0?q-j:-(q-j));return a?new z(j*v,((n+r+y+(c(p+f)>w?q:0))%x-q)*v):this},equals:function(d){return d&&this.latitude===d.latitude&&this.longitude===d.longitude}});ovi.extend(z,{isValid:function(d,a,e){return d!=null&&d===+d&&d>=-90&&d<=90&&a!=null&&a===+a&&a>=-180&&a<=180&&(e===void 0||e===+e&&c(e)!==Infinity)},fromObject:function(){var d,a,e,b;d=arguments;var k=d[0];b=d.length;if(k instanceof z)return k;
if(b>1)k=d;else if(k)b=k.length;else return null;d=k[0];a=k[1];e=k[2];if(b===2&&d===+d&&a===+a)return new z(d,a);if(b===3&&d===+d&&a===+a)return new z(d,a,e);b=k.lat;d=k.lng;if(b!==void 0&&d!==void 0){if(b===+b&&d===+d)return new z(+b,+d);return null}b=k.latitude;d=k.longitude;if(b!==void 0&&d!==void 0&&b===+b&&d===+d)return new z(+b,+d);return null},Yf:function(d,e,b){var k=j(c(d)*3600)/3600,m=a(k),k=(k-m)*3600,l=a(k/60);return m+"\u00b0 "+l+"' "+j(k-l*60)+'" '+(d<0?b:e)},asString:function(d){return z.Yf(d.latitude,
"N","S")+", "+z.Yf(d.longitude,"E","W")}});z.prototype.toString=function(){return z.asString(this)}})(nokia.maps);ovi.provide("nokia.maps.util.QuadTree");
(function(h){function g(a,b){for(var d,c,k,m,p,j,f,h=0,s,w,x=4,y;x--;){y=x+4;p=[];d=+!(x%3);j=b[x];for(s=(c=a[x]).length;s--;){k=c[s];if(m=k.B)for(w=m.length;w--;)if(((f=m[w][y])>j)-d)j=f;for(w=4;w--;)if(m=k[w])d?m[y]<j&&p.push(m):m[y]>j&&p.push(m)}h+=p.length;b[x]=j;a[x]=p}h&&(b=g(a,b));return b}function f(){h.c("Entry out of tree bounds")}var c=1,a=h.QuadTree=new ovi.Class({initialize:function(a,b,d,c,k){this.Cg=a||10;this.Oh=b||1;this.Ph=d||1;this.fg=c||0;this.gg=k||0;this.flush()},Statics:{MIN_X:"7",
MIN_Y:"4",MAX_X:"5",MAX_Y:"6",MID_X:"8",MID_Y:"9",TL:"0",TR:"1",BL:"2",BR:"3"},getExtremes:function(){var a,b;if(!(b=this.Lb))if(a=this.Hc,a.B||a["0"]||a["1"]||a["2"]||a["3"])b=[a],a=g([b,b,b,b],[a["6"],a["7"],a["4"],a["5"]]),this.Lb=b={},b["4"]=a[0],b["5"]=a[1],b["6"]=a[2],b["7"]=a[3];return b||void 0},flush:function(){this.Hc=this.cc=new j(0,0,this.fg-this.Oh,this.gg-this.Ph,this.fg+this.Oh,this.gg+this.Ph);this.Lb=0},remove:function(a){a.fa.Da(a,this);this.Lb=0},insert:function(a,b,d,c){var k,
m=this.cc;a<d?k=a:(k=d,d=a);b<c?(a=b,b=c):a=c;(k<m["7"]||a<m["4"]||d>m["5"]||b>m["6"])&&f();this.Lb=0;return this.hb(this.cc,k,a,d,b,this.Cg)},insertSorted:function(a,b,d,c){var k=this.cc;(a<k["7"]||b<k["4"]||d>k["5"]||c>k["6"])&&f();this.Lb=0;return this.hb(this.cc,a,b,d,c,this.Cg)},hb:function(a,b,d,c,k,m){var p=a["8"],j=a["9"];return m&&(c<p||c<a["5"]&&b>=p)&&(k<j||k<a["6"]&&d>=j)?this.hb(a.il((d>=j?2:0)|b>=p),b,d,c,k,m-1):a.J(b,d,c,k)},intersect:function(a,b,d,c,k){var m=[];this.Pb(this.Hc,m,
a,b,d,c,k);return m},Pb:function(a,b,d,c,k,m,p){var j,f,g=a.B;f=a["7"];var h=a["8"],w=a["5"],x=a["4"],y=a["9"],v=a["6"],z;if(g)if(j=g.length,d>f||k<w||c>x||m<v)for(;j--;)f=g[j],w=f["7"],x=f["4"],v=f["5"],z=f["6"],w>k||v<d||x>m||z<c||(p||w>=d&&v<=k&&x<=m&&z>=c)&&b.push(f);else for(;j--;)b.push(g[j]);k>=h&&(c<=y&&a["1"]&&this.Pb(a["1"],b,d,c,k,m,p),m>=y&&a["3"]&&this.Pb(a["3"],b,d,c,k,m,p));d<=h&&(c<=y&&a["0"]&&this.Pb(a["0"],b,d,c,k,m,p),m>=y&&a["2"]&&this.Pb(a["2"],b,d,c,k,m,p))}}),j=a.Quad=function(a,
b,d,c,k,m){if(a)this.fa=a,this.d=b,b&1?(d=a["8"],k=a["5"]):(d=a["7"],k=a["8"]),b&2?(c=a["9"],m=a["6"]):(c=a["4"],m=a["9"]);this["7"]=d;this["4"]=c;this["5"]=k;this["6"]=m;this["8"]=(d+k)/2;this["9"]=(c+m)/2},b=a.Entry=function(a,b,d,n,k){this.id=c++;this.fa=a;this["7"]=b;this["4"]=d;this["5"]=n;this["6"]=k};ovi.extend(j.prototype,{d:"",fa:null,il:function(a){return this[a]||(this[a]=new j(this,a))},J:function(a,c,d,n){a=new b(this,a,c,d,n);(this.B||(this.B=[])).push(a);return a},Da:function(a,b){var d=
this.B,c;if(d){for(c=d.length;c--;)if(d[c]===a){d.splice(c,1);delete a.fa;break}d.length||(delete this.B,this.jg(b))}},jg:function(a){if(this.fa&&!this.B&&!this[0]&&!this[1]&&!this[2]&&!this[3]){delete this.fa[this.d];if(this===a.Hc)a.Hc=this.fa;this.fa.jg(a)}}})})(nokia.maps.util);ovi.provide("nokia.maps.util.Strip");
(function(){var h=nokia.maps.util.Strip=function(g,f){var c=(this.names=g||[]).length,a=this.offsets={};for(this.data=f||[];c--;)a[g[c]]=c};ovi.extend(h,{stencil:function(g,f){var c=new h(1,f);c.offsets=g.offsets;c.names=g.names;return c},X_Y:new h(["x","y"]),LAT_LNG:new h(["latitude","longitude"])})})();ovi.provide("nokia.maps.util.Uint32Array");
(function(){var h=typeof Uint32Array!=="undefined",g=ovi.browser.msie?function(f){for(var c=Array(f);f--;)c[f]=0;return c}:h?function(f){return new Uint32Array(f)}:function(f){for(var c=[];c.length<f;)c.push(0);return c};nokia.maps.util.Uint32Array=function(f){var c;if(ovi.type(f)==="array")if(h){c=new Uint32Array(f.length);length=f.length;for(i=0;i<length;i++)c[i]=f[i]}else c=f;else c=h&&typeof f==="object"?new Uint32Array(f):g(arguments.length?+f:0);return c}})();ovi.provide("nokia.maps.geo");
(function(h){function g(a,b,e,c,d,n){var k=0;a<e?k|=1:a>d&&(k|=2);b<c?k|=4:b>n&&(k|=8);return k}var f=0,c=Number.POSITIVE_INFINITY,a;ovi.extend(h.geo,{newProjectionId:function(){return f++},clipLineVsRect:function(a,b,e,c,d,n,k,m,p){p?p.length=0:p=[];for(var f=!1,q,h=g(a,b,d,n,k,m),s=g(e,c,d,n,k,m),f=!1,w,x;;)if(h|s)if(h&s)break;else q=h?h:s,q&8?(w=a+(e-a)*(m-b)/(c-b),x=m):q&4?(w=a+(e-a)*(n-b)/(c-b),x=n):q&2?(x=b+(c-b)*(d-a)/(e-a),w=d):q&1&&(x=b+(c-b)*(k-a)/(e-a),w=k),q==h?(a=w,b=x,h=g(a,b,d,n,k,
m)):(e=w,c=x,s=g(e,c,d,n,k,m));else{f=!0;break}f&&p.push(a,b,e,c);return p},intersectLine:a=function(a,b,e,l){if(!b||b.length<4||!a||a.length<4){if(e)e.length=0;return 0}var l=!l,d=0,n=0,k=0,m=a.length,p,f,q,g,h,w=b[0],x=b[1],y=b[2],v=b[3],z=a[n++],B=a[n++];y<w&&(w^=y,y^=w,w^=y);v<x&&(x^=v,v^=x,x^=v);for(;n<m;){var E=a[n++],H=a[n++],O=(H-B)*(y-w)-(E-z)*(v-x),T=(E-z)*(x-B)-(H-B)*(w-z),D=(H-B)*(y-w)-(E-z)*(v-x),G=T/O,A=D/O,b=w+G*(y-w);p=x+G*(v-x);A=A>=0&&A<=1;l&&(z<E?(f=z,h=E):(f=E,h=z),B<H&&(q=B,g=
H));O===0&&T===0&&D===0?(b=p=c,A=l?(z>=w&&z<=y||E>=w&&E<=y)&&(B>=x&&B<=v||H>=x&&H<=v):!0):A&&l&&(A=G>=0&&G<=1&&b>=f&&b<=h&&p>=q&&p<=g);A?(d++,e&&(e[k++]=b,e[k++]=p)):e&&(e[k++]=e[k++]=NaN);z=E;B=H}if(e)e.length=k;return d},clipPolygonVsRect:function(j,b,e,l,d,n){if(!j||j.length<=4)return n&&((n.length=0)||n)||[];for(var n=n||[],k=n.length=0,m=-1,p,f=j.length,q=0,g,h,w=!1,x,y,v=!1,z=[],B=[],E=!1,H,O;++m<4;){g=j[f-2];h=j[f-1];m===0?(w=h>=e,p=[b,e,l,e]):m===1?(w=g<=l,p=[l,e,l,d]):m===2?(w=h<=d,p=[b,
d,l,d]):m===3&&(w=g>=b,p=[b,e,b,d]);for(;q<f;)x=j[q++],y=j[q++],m===0?v=y>=e:m===1?v=x<=l:m===2?v=y<=d:m===3&&(v=x>=b),v?(w||(z[0]=g,z[1]=h,z[2]=x,z[3]=y,a(p,z,B,!0),g=B[0],h=B[1],g===c&&(m===0?(g=x,h=e):m===1?(g=l,h=y):m===2?(g=x,h=d):m===3&&(g=b,h=y)),q!==2?(n[k++]=g,n[k++]=h):(E=!0,H=g,O=h)),n[k++]=x,n[k++]=y):w&&(z[0]=g,z[1]=h,z[2]=x,z[3]=y,a(p,z,B,!0),g=B[0],h=B[1],g===c&&(m===0?(g=x,h=e):m===1?(g=l,h=y):m===2?(g=x,h=d):m===3&&(g=b,h=y)),n[k++]=g,n[k++]=h),g=x,h=y,w=v;E&&(n[k++]=H,n[k++]=O);
E=!1;j=n;n.length=f=k;k=q=0}return n}})})(nokia.maps);ovi.provide("nokia.maps.geo.Corridor");ovi.provide("nokia.maps.geo.IProjection");ovi.provide("nokia.maps.geo.Proximity");ovi.provide("nokia.maps.kml._packaging.base");ovi.provide("ovi._kernel");ovi.provide("nokia.maps.language.Info");ovi.provide("nokia.maps.resources.ui.i18n");
(function(){var h=["al ALB","ar ARA ar-SA","be BEL","bg BUL bg-BG","bn BEN","bs BOS","ca CAT","cs CZE cs-CZ","cy WEL","da DAN da-DK","de GER de-DE","el GRE el-GR","en ENG en-GB","en-us ENG en-US","es SPA es-ES","eu BAQ","et EST et-EE","fa IRN fa-IR","fi FIN fi-FI","fr FRE fr-FR","ga GLE","gl GLG","hi IND hi-IN","he HBR","hr SCR hr-HR","hu HUN hu-HU","id IND id-ID","id-id IND id-ID","in-id IND id-ID","is ICE is-IS","it ITA it-IT","ja JPN","km KHM","ko KOR ko-KR","ky KIR","lt LIT lt-LT","lv LAV lv-LV",
"me MNE","mi MAO","mk MAC","mn MON","mo MOL","ms MAY ms-MY","nl DUT nl-NL","no NOR no-NO","pl POL pl-PL","pt POR pt-PT","pt-br BRA pt-BR","py PYN","ro RUM ro-RO","ru RUS ru-RU","sk SLO sk-SK","sl SLV","sr SRB sr-RS","sv SWE sv-SE","sw SWA","ta TAM","th THA th-TH","tl PHL tl-PH","tr TUR tr-TR","uk UKR uk-UA","ur PAK ur-PK","vi VNM vi-VN","zh CHI zh-CN"],g,f,c;nokia.maps.language.Info=new new ovi.Class({Extends:nokia.maps.util.OObject,initialize:function(){g&&nokia.maps.util.fc("Cannot instantiate singleton class");
g=this;var a={},c;for(c=h.length;c--;){var b=h[c].split(" "),e=b[0],l={};l.key=e;l.iso639_1=e.substr(0,2);l.marc=b[1];l.locale=b[2];a[e]=l}g.definitions=a},detect:function(a){f||(f=function(){var a=nokia.maps.language.Info,b=nokia.maps.Features&&nokia.maps.Features.getFeatureMap().language||["en-US"],e=b?b.length:0,l,d={},n=[];for(c=b&&b.length>0?b[0]:"en-US";e--;)if(l=b[e].toLowerCase(),(l=a.getDefinition(l))&&l.locale&&!d[l.key])d[l.key]=l,n.push(l.locale);return d}());return a==="none"?"en-US":
this.autoDetect(a)},autoDetect:function(a){var j=nokia.maps.language.Info,b=c,a=j.getDefinition(!a||a==="auto"?ovi.browser.language||b:a,f);if(!a||!a.locale)a=j.getDefinition(b,f);return a.locale},getDefinition:function(a,c){c=c||this.definitions;return a.length>=2?c[a.toLowerCase()]||c[a.substr(0,2).toLowerCase()]:null},languageSetter:function(a){var c=a.locale,b=c.substr(0,2).toLowerCase(),c=c.substr(3,2).toUpperCase(),e=nokia.maps.resources.ui.i18n;return e[b]&&e[b][c]?(this.translations=(new Function("return "+
e[b][c].translation.json+";"))(),a):this.language}})})();ovi.provide("nokia.maps.util.RTree");
(function(h){var g=Math,f=g.abs,c=g.min,a=g.max,j=g.sqrt,b=h.RTreeRecord,e=h.c,l=h.RTree=new ovi.Class({initialize:function(d,a,b){(typeof a!="number"||a<2)&&e("The given parameter 'max' is not a number, or less than 2! max is "+a);(typeof b!="number"||b>a/2)&&e("The given parameter 'min' is not a number, or is not at least 2 times smaller than max! min is "+b);this.MaxEntriesPerNode=a;this.MinEntriesPerNode=b;switch(d){case h.RTree.QUADRATIC_PARTITIONING:this.splitNode=this.hn;break;case h.RTree.LINEAR_PARTITIONING:this.splitNode=
this.fn;break;case h.RTree.LINEAR_MOD_PARTITIONING:this.splitNode=this.gn;break;case h.RTree.DUMMY_PARTITIONING:this.splitNode=this.dn;break;default:e("The given parameter 'partitioningAlgorithm' is not a valid option!")}this.Root=new h.RTreeNode(!0)},Statics:{QUADRATIC_PARTITIONING:0,LINEAR_PARTITIONING:1,LINEAR_MOD_PARTITIONING:2,DUMMY_PARTITIONING:3,Ad:Infinity},MaxEntriesPerNode:null,MinEntriesPerNode:null,Root:null,Eb:1,add:function(d){var b=this.Root,e=1,m=0,l=null,f=null,q=Infinity,g,s;for(d.Volume=
(d.X2-d.X1)*(d.Y2-d.Y1);e<this.Eb;){f=l=null;q=Infinity;m=b.Entries;for(m=m.length;g=b.Entries[--m];)if(s=d.X2==d.X1&&d.Y2==d.Y1?j((g.X1-d.X1)*(g.X1-d.X1)+(g.Y1-d.Y1)*(g.Y1-d.Y1)):(a(g.X2,d.X2)-c(g.X1,d.X1))*(a(g.Y2,d.Y2)-c(g.Y1,d.Y1))-g.Volume,s<q||s==q&&g.BoundingBox<f)l=m,q=s,f=g.Volume;b=b.Entries[l];e++}b.addChild(d,e==1);for(d=b.Entries.length>this.MaxEntriesPerNode?this.splitNode(b):[];b.ParentNode;)e=b.ParentNode,d.length!=2?e.updateBoundingBox(b.X1,b.X2,b.Y1,b.Y2):(e.removeChild(b.ParentEntry),
e.addChild(d[0],!1),e.addChild(d[1],!1),d=e.Entries.length>this.MaxEntriesPerNode?this.splitNode(e):[]),b=b.ParentNode;if(d.length==2)this.Root=new h.RTreeNode(!1),this.Root.addChild(d[0],!0),this.Root.addChild(d[1],!0),this.Eb++},remove:function(d){var a,k=[],c,l=this.MinEntriesPerNode;this.Root||e("Can't remove anything fro already empty tree");(!d||!(d instanceof b)||!d.Leaf||!d.ParentNode)&&e("Invalid node");c=d.ParentNode.Entries;a=c.indexOf(d);if(a!=-1){c.splice(a,1);c.length<l&&(k=c);do d=
d.ParentNode,d.Entries.length<l&&d.ParentNode&&d.ParentNode.removeChild(d.ParentEntry),d.ParentNode&&d.ParentNode.calculateBoundingBox();while(d.ParentNode);for(a=k.length;a--;)this.Jl(k[a]);if(this.Root.Entries.length==1&&!(this.Root.Entries[0]instanceof b))this.Eb--,this.Root=this.Root.Entries[0],this.Root.ParentNode=null;return!0}},removeAll:function(){this.Root=new h.RTreeNode(!0);this.Eb=1},searchByPriority:function(d,a,b,e){var c,l={},j=[[null,null]],f=this.Root,g=0;c=0;var h;d>a&&(c=d,d=a,
a=c);b>e&&(c=b,b=e,e=c);for(;f!=null;){if(f.Leaf)for(c=0;c<f.Entries.length;c++)f.Entries[c].overlaps(d,a,b,e)&&(typeof l[f.Entries[c].Priority]=="undefined"&&(l[f.Entries[c].Priority]=[]),l[f.Entries[c].Priority][l[f.Entries[c].Priority].length++]=f.Entries[c]);else{if(f.Entries.length>g+1)for(c=g+1;c<f.Entries.length;c++)if(f.Entries[c].overlaps(d,a,b,e)){j[j.length++]=[f,c];break}for(c=h=0;c<f.Entries[g].Entries.length;c++)if(f.Entries[g].Entries[c].overlaps(d,a,b,e)){f=f.Entries[g];g=c;h=1;break}if(h)continue}f=
j[j.length-1][0];g=j[j.length-1][1];j.length--}return l},search:function(d,a,b,e,c){var l=[],c=c||this.Root,j,f=0,g,h=[c];d>a&&(t=d,d=a,a=t);b>e&&(t=b,b=e,e=t);if(!c.overlaps(d,a,b,e))return l;for(;f<h.length;){curNode=h[f];j=curNode.Entries;for(g=j.length;c=j[--g];)c.overlaps(d,a,b,e)&&(c.Leaf?l.push(c):h.push(c));f++}return l},Jl:function(d,b){var e=this.Root,m=0,l=1,j,f,g,s;if(d){for(;l<b;){f=j=null;g=Infinity;for(m=0;m<e.Entries.length;m++)if(s=e.Entries[m],s=(a(s.X2,d.X2)-c(s.X1,d.X1))*(a(s.Y2,
d.Y2)-c(s.Y1,d.Y1))-s.Volume,s<g||s==g&&e.Entries[m].BoundingBox<f)j=m,g=s,f=e.Entries[m].Volume;e=e.Entries[j];l++}e.addChild(d);for(m=e.Entries.length>this.MaxEntriesPerNode?this.splitNode(e):[];e.ParentNode!=null;)m.length!=2?e.ParentNode.updateBoundingBox(e.X1,e.X2,e.Y1,e.Y2):(e.ParentNode.removeChild(e.ParentEntry),e.ParentNode.addChild(m[0],!1),e.ParentNode.addChild(m[1],!1),m=e.ParentNode.Entries.length>this.MaxEntriesPerNode?this.splitNode(e.ParentNode):[]),e=e.ParentNode;if(m.length==2)this.Root=
new h.RTreeNode(!1),this.Root.addChild(m[0]),this.Root.addChild(m[1]),this.Eb++}},splitNode:null,hn:function(d){var b=new h.RTreeNode(d.Leaf,d.ParentNode),e=new h.RTreeNode(d.Leaf,d.ParentNode),m=null,p=null,j=-1*l.Ad,q=null,g=null,s,w=d.Entries,x=w.length,y=s=0;for(s=0;s<x;s++){q=w[s];for(y=s+1;y<x;y++)g=w[y],g=(a(q.X2,g.X2)-c(q.X1,g.X1))*(a(q.Y2,g.Y2)-c(q.Y1,g.Y1))-q.Volume-g.Volume,g>j&&(m=s,p=y,j=g)}b.addChild(w.splice(m,1)[0]);for(e.addChild(w.splice(p-1,1)[0]);w.length>0;){x=w.length;if(this.MinEntriesPerNode-
b.Entries.length==x){for(;entry=w[--x];)b.addChild(entry);d.Entries=[];break}else if(this.MinEntriesPerNode-e.Entries.length==x){for(;entry=w[--x];)e.addChild(entry);d.Entries=[];break}m=null;p=-1;for(s=0;s<d.Entries.length;s++)j=d.Entries[s],j=f((a(b.X2,j.X2)-c(b.X1,j.X1))*(a(b.Y2,j.Y2)-c(b.Y1,j.Y1))*b.Volume-(a(e.X2,j.X2)-c(e.X1,j.X1))*(a(e.Y2,j.Y2)-c(e.Y1,j.Y1))*e.Volume),j>p&&(m=s,p=j);s=d.Entries[m];b.getEnlargement(s.X1,s.X2,s.Y1,s.Y2)<e.getEnlargement(s.X1,s.X2,s.Y1,s.Y2)?b.addChild(d.Entries.splice(m,
1)[0]):e.addChild(d.Entries.splice(m,1)[0])}return[b,e]},fn:function(d){for(var b=new h.RTreeNode(d.Leaf,d.ParentNode),e=new h.RTreeNode(d.Leaf,d.ParentNode),c=null,p=null,j=-1*l.Ad,q=0,g=0,s=null,w=null,x=d.Entries.length;q<x;q++){s=d.Entries[q];for(g=q+1;g<x;g++)w=d.Entries[g],w=a(a(f(s.X1-w.X1),f(s.X2-w.X2)),a(a(f(s.Y1-w.Y1),f(s.Y2-w.Y2)))),w>j&&(c=q,p=g,j=w)}b.addChild(d.Entries.splice(c,1)[0]);for(e.addChild(d.Entries.splice(p-1,1)[0]);d.Entries.length>0;){if(this.MinEntriesPerNode-b.Entries.length==
d.Entries.length){for(;d.Entries.length>0;)b.addChild(d.Entries.splice(0,1)[0]);break}else if(this.MinEntriesPerNode-e.Entries.length==d.Entries.length){for(;d.Entries.length>0;)e.addChild(d.Entries.splice(0,1)[0]);break}c=d.Entries[0];b.getEnlargement(c.X1,c.X2,c.Y1,c.Y2)-e.getEnlargement(c.X1,c.X2,c.Y1,c.Y2)<0?b.addChild(d.Entries.splice(0,1)[0]):e.addChild(d.Entries.splice(0,1)[0])}return[b,e]},gn:function(d){for(var a=new h.RTreeNode(d.Leaf,d.ParentNode),b=new h.RTreeNode(d.Leaf,d.ParentNode),
e=null,c=null,f=-1*l.Ad,q=0,g=0,s=null,w=null,x=d.Entries.length;q<x;q++){s=d.Entries[q];for(g=q+1;g<x;g++)w=d.Entries[g],w=j((s.X1-w.X1)*(s.X1-w.X1)+(s.Y1-w.Y1)*(s.Y1-w.Y1)),w>f&&(e=q,c=g,f=w)}a.addChild(d.Entries.splice(e,1)[0]);for(b.addChild(d.Entries.splice(c-1,1)[0]);d.Entries.length>0;){if(this.MinEntriesPerNode-a.Entries.length==d.Entries.length){for(;d.Entries.length>0;)a.addChild(d.Entries.splice(0,1)[0]);break}else if(this.MinEntriesPerNode-b.Entries.length==d.Entries.length){for(;d.Entries.length>
0;)b.addChild(d.Entries.splice(0,1)[0]);break}e=d.Entries[0];a.getEnlargement(e.X1,e.X2,e.Y1,e.Y2)-b.getEnlargement(e.X1,e.X2,e.Y1,e.Y2)<0?a.addChild(d.Entries.splice(0,1)[0]):b.addChild(d.Entries.splice(0,1)[0])}return[a,b]},dn:function(d){for(var a=new h.RTreeNode(d.Leaf,d.ParentNode),b=new h.RTreeNode(d.Leaf,d.ParentNode),e=d.Entries.length/2,c=0,c=0;c<=e;c++)a.addChild(d.Entries.splice(0,1)[0],!0);for(;d.Entries.length>0;)b.addChild(d.Entries.splice(0,1)[0],!0);return[a,b]}})})(nokia.maps.util);
ovi.provide("ovi.ConsoleLogger");
(function(){try{typeof window.loadFirebugConsole==="function"&&window.loadFirebugConsole()}catch(h){}var g=null;ovi.ConsoleLogger=function(){if(g!==null)return g;if(window&&window.console&&/function/.test(window.console.log+""))for(var f=function(a){a=/function/.test(window.console[a]+"")?a:"log";return typeof window.console[a]==="function"?function(){window.console[a].apply(window.console,arguments)}:function(e,c,d,j,k,m,p,f,q,g,h){window.console[a](e||"",c||"",d||"",j||"",k||"",m||"",p||"",f||"",
q||"",g||"",h?"...":"")}},c=["info","debug","warn","error"],a=0,j;j=c[a];a++)this[j]=f(j);else this.debug=this.info=this.warn=this.error=function(){};return g=this};ovi.Logger&&window&&window.console&&/function/.test(window.console.log+"")&&ovi.Logger.addLogger(new ovi.ConsoleLogger)})(ovi);ovi.provide("nokia.maps.util.ApplicationContext");
(function(h){var g,f=h.util.getRootNameSpace("nokia.maps").Settings,c=new new ovi.Class({Extends:h.util.OObject,initialize:function(){if(g)return g;g=this;g.defaultLanguageSetter=function(a){this.Ql&&h.util.fc("defaultLanguage cannot be set after a display was initialized");var c=h.language.Info,b=h.Features,e;if(h.Config.getDefault("language.overrideDetection")){a=a==="auto"?c.detect(a):a;try{e=b&&!b.isLoaded("language",a)}catch(l){e=!1}}else a=c.detect(a)||"en-US",e=b&&!b.isLoaded("language",a);
f.set("defaultLanguage",a);e?b.load({language:a},h.util.u,h.util.u,document,!1):c.set("language",c.getDefinition(a));return a};g.authenticationTokenSetter=function(a){f.set("authenticationToken",a);return a};g.appIdSetter=function(a){f.set("appId",a);return a}},authenticationToken:"",appId:"",defaultLanguage:"",useSSL:!1,lockLanguage:function(){this.Ql=!0}});h.util.ApplicationContext=c;f.addObserver("defaultLanguage",c.defaultLanguageSetter,c)})(nokia.maps);ovi.provide("nokia.maps.util.Pen");
(function(h){var g=nokia.maps.gfx.Color.parseCss;h.Pen=new ovi.Class({strokeColor:"#05A",lineWidth:1,lineCap:"round",lineJoin:"miter",miterLimit:10,stroke:"solid",initialize:function(f,c){var a,j,b=h.c;if(f){if("lineWidth"in f)!h.isNumber(f.lineWidth)&&b("width must be in range [0..100]"),f.lineWidth=h.cb(f.lineWidth,0,100);"stroke"in f&&f.stroke!=="solid"&&b("cannot set anything else than stroke=solid");"strokeColor"in f&&(j=g(f.strokeColor),j===null&&b("Invalid color set!"));if("lineJoin"in f)j=
f.lineJoin,j!=="miter"&&j!=="round"&&j!=="bevel"&&b("Invalid lineJoin set!");if("lineCap"in f)j=f.lineCap,j!=="butt"&&j!=="round"&&j!=="square"&&b("Invalid lineCap set!");"miterLimit"in f&&!h.isNumber(f.miterLimit)&&b("miterLimit must be a number")}if(c instanceof nokia.maps.util.Pen)for(a in c)this[a]=c[a];for(a in f)this[a]=f[a]}})})(nokia.maps.util);ovi.provide("ovi.dom");ovi.provide("nokia.maps.routing._packaging.base");ovi.provide("nokia.maps.net.Request");
(function(h){if(!h.util.getConstructor(h.net.Request))var g=h.net,f=h.util,c=f.u,a=f.isArray,j=f.isObject,b=f.isString,e=function(){return window.ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:window.XMLHttpRequest}(),l="withCredentials"in new e?e:typeof XDomainRequest!="undefined"?XDomainRequest:null,d=function(d){d.parentNode&&d.parentNode.removeChild(d)},n=g.Request=new ovi.Class({Extends:h.util.OObject,initialize:function(d,a){var b=this;b.F={};b.si={};b.ce=n.managerCounter++;
b.l=d===n.JSONP||d===n.XHR?d:n.JSONP;b.ki=3E4;b.Cd=!1;b.Ed="jsoncallback";b.pa=!1;b.d=null;a&&a.timeout&&(b.ki=a.timeout);a&&a.callbackKey&&(b.Ed=a.callbackKey);a&&a.standardJSONP&&(b.pa=a.standardJSONP);a&&a.autoSkip&&(b.Cd=a.autoSkip);d==n.XHR&&a&&a.xDomain&&(b.Jn=a.xDomain);b.l==n.JSONP&&b.pa==!1&&(g.Request.callbacks[b.ce]=function(d,a){b.cg(d,a)});if(b.l==n.XHR&&(b.jc={},b.wi=a||{},window.execScript&&window.ActiveXObject)){var e="BinaryToArray"+(new Date).getTime();window.execScript("Function "+
e+"(Binary)\nDim i\nReDim byteArray(LenB(Binary))\nFor i = 1 To LenB(Binary)\n  byteArray(i-1) = ChrW(AscB(MidB(Binary, i, 1)))\nNext\n"+e+" = byteArray\nEnd Function\n","vbscript")}},Statics:{JSONP:1,XHR:2,requestCounter:1,managerCounter:0,callbacks:{},requestParams:{},timeoutCallbacks:{},canceledRequests:{}},destroy:function(){this.cancelAll();this.pa==!1&&(g.Request.callbacks[that.ce]=c)},send:function(d,a,b){this.d=n.requestCounter++ +"_"+(new Date).getTime();this.F[this.d]=b!=void 0?b:this.d;
this.si[this.F[this.d]]=this.d;this.l==n.JSONP?this.Vm(d,a,this.d):this.Xm(d,a,this.d);return b!=void 0?b:this.d},cancel:function(d){d=d==void 0?this.d:this.si[d];n.canceledRequests[d]=!0;this.l==n.JSONP?this.oi(d):this.Ce(d);this.bc(d)},cancelAll:function(){for(var d in this.F)this.cancel(this.F[d])},rk:function(d){var a=this;g.Request.callbacks[d]=function(){a.cg(d,arguments)}},Vm:function(d,a,b){var e=document.createElement("script");this.pa&&this.rk(b);n.requestParams[b]=[d,a];this.an(e,d,a,b);
document.body.insertBefore(e,document.body.firstChild);this.ei(d,a,b)},Xm:function(d,a,b){var e=this.wi.method||"GET",c,l=this.wi;l.uri=d;this.vk(d,a,b);this.ei(d,a,b);try{if(this.jc[b]=c=this.Wk(b,l),c.open(e,this.Dn(e,l,this.cd),!l.sync,l.username,l.password),this.Wm(c,e,l,this.cd),l.sync&&ovi.browser.mozilla&&parseFloat(ovi.browser.version)<2)this.onreadystatechange()}catch(j){if(b in this.F)this.cd.error=!0,delete this.F[b],n.callbacks[b](this.cd)}},cg:function(d,a){if(!n.canceledRequests[d]){var b=
n.requestParams[d],e=b[1];if(!this.Cd||d==this.d)e({response:a.length<=1?a[0]:a,status:200,id:this.F[d],url:b[0],error:!1,timeout:!1});delete this.F[d];delete n.requestParams[d];this.pa&&delete g.Request.callbacks[d]}},vk:function(d,a,b){var e=this;g.Request.callbacks[b]=function(d){e.bc(b);(!e.Cd||b==e.d)&&a(d);e.Ce(b)}},Ce:function(d){this.jc[d]&&(this.jc[d].abort(),this.jc[d]=null,delete this.jc[d],delete g.Request.callbacks[d])},an:function(a,b,e,c){var l=this,j=b.indexOf("?")<0?"?":"&";b+=l.pa?
j+l.Ed+"=nokia.maps.net.Request.callbacks['"+c+"']":j+l.Ed+encodeURI("=(function () { nokia.maps.net.Request.callbacks["+l.ce+"]('"+c+"', arguments); })");a.setAttribute("src",b);a.setAttribute("charset","UTF-8");a.setAttribute("defer","defer");a.id=c;a.onload=a.onreadystatechange=function(){if(!this.readyState||this.readyState==="complete"||this.readyState==="loaded")l.bc(c),delete n.requestParams[c],l.pa&&delete g.Request.callbacks[c],d(this)};a.onerror=function(){n.canceledRequests[c]||(l.bc(c),
n.requestParams[c]&&(e=n.requestParams[c][1],e({id:l.F[c],url:n.requestParams[c][0],error:!0,timeout:!1})),delete l.F[c],delete n.requestParams[c],l.pa&&delete g.Request.callbacks[c],d(this))}},ei:function(d,a,b){n.timeoutCallbacks[b]=setTimeout(this.Vk(d,a,b),this.ki)},Vk:function(d,a,b){var e=this;return function(){n.canceledRequests[b]=!0;e.l==n.JSONP?(a=n.requestParams[b][1],d=n.requestParams[b][0],e.oi(b)):e.Ce(b);a({status:408,id:e.F[b],url:d,error:!1,timeout:!0});delete e.F[b];e.bc(b)}},oi:function(a){var b=
document.getElementById(a);if(b)b.onload=b.onreadystatechange=c,b.onerror=c,b.src="",d(b);delete n.requestParams[a];this.pa&&(g.Request.callbacks[a]=c)},bc:function(d){clearTimeout(n.timeoutCallbacks[d]);delete n.timeoutCallbacks[d]},Wm:function(d,a,b){var e="text/plain",c="",l;if(a!=="GET"&&a!=="DELETE")b.json?(e="application/json",c=ovi.json.stringify(b.json)):b.xml?(e="text/xml",XMLSerializer?c=(new XMLSerializer).serializeToString(b.xml):b.xml.xml?c=b.xml.xml:f.throwIllegalArgument("error")):
b.content&&a!=="GET"?(e="application/x-www-form-urlencoded",c=this.Hh(b.content)):c=b.body||"";e=b.mimeType||e;b.charset&&(e+="; charset="+b.charset);e={"content-type":e};a=b.headers||{};for(l in a)a.hasOwnProperty(l)&&(e[l.toString().toLowerCase()]=a[l]);if(b.preventCache==="headers"||b.preventCache==="both")e.pragma=e["cache-control"]="no-cache";for(l in e)e.hasOwnProperty(l)&&(l!=="content-type"||b.handleAs==="arraybuffer")&&d.setRequestHeader(l,e[l]);b.handleAs==="binary"&&d.overrideMimeType&&
(d.overrideMimeType(e["content-type"]="text/text; charset=x-user-defined"),c="",delete e["content-length"]);if(b.handleAs==="arraybuffer")d.responseType="arraybuffer";d.send(c)},Dn:function(d,a,b){d=a.uri;a.preventCache&&a.preventCache!=="headers"&&(d+=(d.indexOf("?")===-1?"?":"&")+"preventCache="+(new Date).getTime());(a=a.uriParameters)&&(d+=(d.indexOf("?")===-1?"?":"&")+this.Hh(a));return b.url=d},Hh:function(d,b){var e=[],c,l;if(j(d)){for(c in d)l=b?b+"."+c:c,e.push(this.params(d[c],l));return e.join("&")}else if(a(d)){for(c=
0;c<d.length;c++)d[c]=this.params(d[c],b);return d.join("&")}else if(!d)return"";return b?this.bi(b)+"="+this.bi(d):""+d},bi:function(d){return encodeURIComponent(d).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},Pm:function(d,a){function b(d){this.message=d;this.name="ParserError"}var e=a.handleAs||"text";e==="autodetect"&&(e=d.getResponseHeader("content-type")||"",e=e.match(/[+\/]json/)?"json":e.match(/[+\/]xml/)?"xml":"text");switch(e){case "json":e=
ovi.json.parse(d.responseText);break;case "xml":if(d.responseXML)if(window.ActiveXObject){if(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(d.responseText),e.documentElement===null)throw new b("Broken XML - parser error");}else if((e=d.responseXML.getElementsByTagName("parsererror"))&&e.length>0)throw new b(e.item(0).textContent);else e=d.responseXML;else if(DOMParser){if(e=(new DOMParser).parseFromString(d.responseText,"text/xml"),(ovi.browser.safari||ovi.browser.chrome)&&e.documentElement.textContent)throw new b(e.documentElement.textContent);
}else throw new b("Broken XML - parser error");break;case "arraybuffer":e=d.response;break;default:e=d.responseText}return e},Wk:function(d,a){var c=this,j,f,g={status:417};c.cd=g;a=b(a)?{uri:a}:a;j=a.window||window;try{f=a.xhr||c.Jn?new l:new e,c.onreadystatechange=f.onreadystatechange=function(){g.id=c.F[d];g.timeout=!1;g.error=!1;if(!n.canceledRequests[d]&&f.readyState===4)if(ovi.browser.msie&&(f.status===2||f.status===3))g.status=401;else{g.status=f.status>=300&&f.status!==1223||f.status===0&&
!(f.responseType==="arraybuffer"||f.responseType==="blob"?f.response:f.responseText)&&("file:"===j.location.protocol||"widget:"===j.location.protocol)?f.status||404:f.status||200;try{g.response=c.Pm(f,a)}catch(b){if(d in c.F)g.error=!0,delete c.F[d],n.callbacks[d](g)}ovi.browser.msie&&(f=null);if(!(g.status>=200&&g.status<300&&!g.error))g.error=!0;delete c.F[d];n.callbacks[d](g)}},j.location.protocol==="file:"&&j.netscape&&j.netscape.security&&j.netscape.security.PrivilegeManager&&j.netscape.security.PrivilegeManager.enablePrivilege&&
j.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")}catch(h){if(d in c.F)g.error=!0,delete c.F[d],n.callbacks[d](g)}return f}})})(nokia.maps);ovi.provide("nokia.maps.dom.EventTarget");
(function(h){if(!nokia.maps.util.getConstructor(nokia.maps.dom.EventTarget)){var g=!g,f=!g,c=g,a=h.EventTarget=function(a){var a=a||this,e;if(!a.isEventTarget){for(e in j)e in a||(a[e]=j[e]);a.draggable?a.enableDrag():a.disableDrag()}return a},j={isEventTarget:g,draggable:f,enableUserSelect:function(){var a=this.style;if(ovi.type(this)==="element")a.KhtmlUserSelect="auto",a.MozUserSelect="auto",a.OUserSelect="auto",a.WebkitUserSelect="auto",a.WebkitTouchCallout="auto";return this},disableUserSelect:function(){var a=
this.style;if(ovi.type(this)==="element")a.KhtmlUserSelect="none",a.MozUserSelect="none",a.OUserSelect="none",a.WebkitUserSelect="none",a.WebkitTouchCallout="none";return this},enableDrag:function(){var a=this.style;this.disableUserSelect();if(ovi.type(this)==="element")a.WebkitUserDrag="element",a.KhtmlUserDrag="element";this.draggable=g;return this},disableDrag:function(){var a=this.style;if(this.draggable&&ovi.type(this)==="element")a.KhtmlUserDrag="auto",a.WebkitUserDrag="auto";this.draggable=
f;return this},insertListener:function(a,e,c){return this.addListenerNS(null,a,e,c,g)},addListener:function(a,e,c){return this.addListenerNS(null,a,e,c)},addListeners:function(a){for(var e in a)a.hasOwnProperty(e)&&this.addListenerNS(null,e,a[e][0],a[e][1])},insertListenerNS:function(a,e,c,d){return this.addListenerNS(a,e,c,d,g)},addListenerNS:function(a,e,c,d,j){var k=this.eventListener||(this.eventListener={}),k=k[e]||(k[e]=[]),d=d||!1,m,p;if(e==="beforeunload")(p=h.Page.Zf)[p.length]=c;else if(e===
"resize")if((p=h.Page.Ee)[p.length]=m={node:this},(e=ovi.type(this))==="window")m.layoutWidth=(e=h.Page(this)).layoutWidth,m.layoutHeight=e.layoutHeight;else if(e==="element")m.offsetWidth=this.offsetWidth,m.offsetHeight=this.offsetHeight;j?k.unshift(c,d,a):k.push(c,d,a);return this},removeListener:function(a,e,c){return this.removeListenerNS(null,a,e,c)},removeListenerNS:function(a,e,c,d){var j=this.eventListener,k,m,p,d=d||!1;if(e==="beforeunload"){p=(k=h.Page.Zf).length;for(m=-1;++m<p;)if(k[m]===
c){k.splice(m,1);break}}else if(e==="resize"){p=(k=h.Page.Ee).length;for(m=-1;++m<p;)if(k[m].node===this){k.splice(m,1);break}}if(j&&j[e]){k=j[e];p=k.length;for(m=0;m<p;m+=3)if(k[m]===c&&k[m+1]===d&&k[m+2]===a){k.splice(m,3);break}k.length===0&&delete j[e]}return this},dispatch:function(b){return a.dispatchEvent(this,b)},hitTest:function(a,e){var c;if(this.parentNode&&this.ownerDocument&&(c=h.Page(this.ownerDocument).getClientRect(this))&&a>=c.left&&a<=c.right&&e>=c.top&&e<=c.bottom)return g;return f}};
ovi.extend(a.prototype,j);a.getDispatchPath=function(a,e,c){for(var d,j=[],k=c&&c.l==="display";a;)e?(d=a.eventListener)&&(d=d[e])&&d.length&&j.push(a):j.push(a),a=k&&a.l&&a.getParent?a.getParent(c):e&&a.parentNodes&&c&&a.parentNodes[c]?a.parentNodes[c]:a.parentNode;return j};a.catchException=function(a){c=a===g};a.dispatchEvent=function(b,e,l){var e=e instanceof h.Event?e:h.Page.parseEvent(e),d=e.type,j=e.namespaceURI,l=l||a.getDispatchPath(b,d,e.display||j),k=l.length,m,p,f,q;if(!d||k===0)return g;
e.target=e.target||b;e.eventPhase=1;for(b=e.canSicker?k-1:0;b>=0;b--)if(b===0&&e.eventPhase++,p=l[b],e.currentTarget=p,(q=p.eventListener&&p.eventListener[d])&&(f=q.length)){for(m=f-3;m>=0;m-=3)if((q[m+1]||b===0)&&!(q[m+2]!==null&&q[m+2]!==j)){if(c)try{q[m].call(p,e)}catch(u){ovi.warn("Exception in event listener #"+m/3+", capturing phase for event "+d),ovi.error(String(u)==="[object Error]"?u.message:u)}else q[m].call(p,e);if(e.propagation===2)return!e.defaultPrevented}if(e.propagation===1)return!e.defaultPrevented}e.eventPhase++;
if(e.canBubble)for(b=1;b<k;b++)if(p=l[b],e.currentTarget=p,(q=p.eventListener&&p.eventListener[d])&&(f=q.length)){for(m=f-3;m>=0;m-=3)if(!q[m+1]&&!(q[m+2]!==null&&q[m+2]!==j)){if(q[m])if(c)try{q[m].call(p,e)}catch(s){ovi.warn("Exception in event listener #"+m/3+", bubbling phase for event "+d),ovi.error(s)}else q[m].call(p,e);if(e.propagation===2)return!e.defaultPrevented}if(e.propagation===1)break}return!e.defaultPrevented}}})(nokia.maps.dom);ovi.provide("nokia.maps.dom.DataTransfer");
(function(h){if(!nokia.maps.util.getConstructor(nokia.maps.dom.DataTransfer)){var g=!g,f={text:"text/plain",url:"text/uri-list"},c={string:g,number:g,"boolean":g},a={uninitialized:{copy:g,move:g,link:g},none:{},copy:{copy:g},copyLink:{copy:g,link:g},copyMove:{copy:g,move:g},all:{copy:g,move:g,link:g},link:{link:g},linkMove:{move:g,link:g},move:{move:g}},j=h.util.Na,b=ovi.Array.indexOf,h=nokia.maps.dom.DataTransfer=function(a){var b=-1,d,c;this.types=[];this.data={};this.ndt=a||null;if(a&&(c=a.types)&&
(d=a.types.length))for(;++b<d;)this.types=c[b];this.files=a&&a.files||[]};ovi.extend(h.prototype,{lift:g,realTime:!g,cursor:"pointer",dropEffect:"none",effectAllowed:"uninitialized",clearData:function(a){var l=this.ndt,d,n=ovi.type(a),k=this.types;if(a===void 0)return l&&l.clearData(),this.types={},this.data={},this;c[n]||j("Invalid format supplied!");a=f[a=(""+a).toLowerCase()]||a;l&&l.clearData(a);delete this.data[a];(d=b(k,a))>=0&&k.splice(d,1);return this},setData:function(a,l){var d=this.ndt,
n=ovi.type(a),k=ovi.type(l),m=this.types;c[n]||j("Invalid format supplied!");a=f[a=(""+a).toLowerCase()]||a;d&&(k==="string"?d.setData(a,l):d.clearData(a));this.data[a]=l;b(m,a)<0&&(m[m.length]=a);return this},getData:function(a){var b,d=this.ndt,n=ovi.type(a);c[n]||j("Invalid format supplied!");a=f[a=(""+a).toLowerCase()]||a;if(d&&(b=d.getData(a)))return b;return this.data[a]},hasData:function(a){var b=this.ndt,d=ovi.type(a);c[d]||j("Invalid format supplied!");a=f[a=(""+a).toLowerCase()]||a;if(b&&
b.getData(a))return g;return a in this.data},setDragImage:function(){},addElement:function(){},allows:function(b){return a[this.effectAllowed][b]}})}})(nokia.maps);ovi.provide("nokia.maps.geo.mercator");
(function(h){var g=h.util,f=g.Point,c=g.Strip,a=g.Uint32Array,j=function(){for(var a=31,d={};a--;)d[Math.pow(2,a)]=a;return d}(),b=g.me,e=h.geo.Coordinate,g=Math,l=g.min,d=g.max,n=g.log,k=g.tan,m=g.atan,p=g.exp,r=g.floor,q=g.PI,u=q/4,s=q/2,w=180/q;h.geo.mercator={id:0,pointToGeo:function(a){var d=a.x,a=a.y;return new e(a<=0?90:a>=1?-90:w*(2*m(p(q*(1-2*a)))-s),(d===1?1:b(d,1))*360-180,void 0,1)},xyToGeo:function(a,d){return new e(d<=0?90:d>=1?-90:w*(2*m(p(q*(1-2*d)))-s),(a===1?1:b(a,1))*360-180,void 0,
1)},mapXYToGeo:function(a,d){return new e(d<=0?90:d>=1073741823?-90:w*(2*m(p(q*(1-2*d/1073741823)))-s),(a===1073741823?1:b(a/1073741823,1))*360-180)},mapPointsToGeo:function(a,d){for(var d=d||c.stencil(c.LAT_LNG),e=d.data,k=a.length,l=0,j=0,f=d.names.length,n=d.offsets.latitude,g=d.offsets.longitude,h,r;l<k;)e[j+g]=((h=a[l++])===1073741823?1:b(h/1073741823,1))*360-180,e[j+n]=(r=a[l++])<=0?90:r>=1073741823?-90:w*(2*m(p(q*(1-2*r/1073741823)))-s),j+=f;return d},geoToPoint:function(a){return new f(a.longitude/
360+0.5,l(1,d(0,0.5-n(k(u+s*a.latitude/180))/q/2)))},latLngToPoint:function(a,b){return new f(b/360+0.5,l(1,d(0,0.5-n(k(u+s*a/180))/q/2)))},latLngToMapPoint:function(a,b){return new f(r((b/360+0.5)*1073741823),r(l(1,d(0,0.5-n(k(u+s*a/180))/q/2))*1073741823))},geoToMapPoints:function(b,e){var c=b.data,m=c.length,p=0,j=0,f=b.names.length,g=b.offsets.latitude,h=b.offsets.longitude;for(e||(e=new a(m/f*2));j<m;)e[p++]=r((c[j+h]/360+0.5)*1073741823),e[p++]=r(l(1,d(0,0.5-n(k(u+s*c[j+g]/180))/q/2))*1073741823),
j+=f;return e},scaleMapXY:function(a,d,b,e){var c=30-j[b];return e?new f(a>>c,d>>c):(e=(b-=1)>>1,new f((a>>c)+((a&b)>e),(d>>c)+((d&b)>e)))},scaleMapPoints:function(d,b,e,c,k){var l=d.length,m=0,p=0,f=0,n=30-j[b],g,q,h,r;e||(e=new a(l));k=!!k;if(c)if(k)for(;m<l;)e[m]=d[m++]>>n;else{for(;p<l;)if(m=d[p++]>>n,q=d[p++]>>n,h!==m||r!==q)e[f++]=h=m,e[f++]=r=q;e.length=f}else{for(c=(b-=1)>>1;p<l;)if(m=((g=d[p++])>>n)+((g&b)>c),q=((g=d[p++])>>n)+((g&b)>c),k||h!==m||r!==q)e[f++]=h=m,e[f++]=r=q;if(!k)e.length=
f}return e}}})(nokia.maps);ovi.provide("nokia.maps.language._packaging.base");ovi.provide("nokia.maps.util.Coroutine");
(function(){function h(){var a=m(),b=a;P=0;f();if(Z)for(var e=m(),a=e+F.AF_MAX_EXEC_TIME;H.length&&e<a;)e=H.shift().data,e=e.run(),f();else{e=m();for(a=e+F.MAX_EXEC_TIME;E.length&&e<a;)C?(e=O.shift(),e||(e=O,O=T,T=e,V++,e=O.shift()),e=e.data):e=E.shift().data,e=e.run(),f(),C=!C}c(a=m());I&&d.clearTimeout(I);I=d.setTimeout(g,P+75);A+=a-b}function g(){I&&d.clearTimeout(I);I=setTimeout(g,500);m()>P&&h()}function f(){var a,d,b;for(a=a||m();(d=B.j)&&d&&(b=d.data).ic<=a;)F.resume(b)}function c(a){var d;
H.length&&ga();E.length?J(0):(d=B.j)?(a=d.data.ic-(a||m()),J(a<0?0:a)):J()}function a(a,d){return d.nice(!0)-a.nice(!0)}function j(a,d){return a.ic-d.ic}function b(a,d){q.call(this);l.prototype=v&&v.scope||y&&y.scope||{};var b=-1,e,c=a&&a.zk,k=new l(d);if(a&&a.defaults)for(e in a.defaults)this[e]=a.defaults[e];this.id="ctx#"+w++;this.parent=v||y||null;this.name=(this.coroutine=a)&&a.ne;this.N={length:0};this.K={length:0};if(d&&d.length)for(;++b<d.length&&b<c.length;)k[c[b]]=d[b];this.scope=k;this.Xc=
new r(this);this.dd=new r(this);this.fd=new r(this)}function e(a,d){var b=this,e=b.context;do if(b.has(a))return b[a]=d,this;while((e=e.parent)&&(b=e.scope));y.scope[a]=d;return this}function l(a){this.arguments=a;this.has=this.hasOwn=this.hasOwnProperty;this.set=e}var d=window,n=nokia.maps.util,k={0:{status:"terminated"},1:{status:"running"},2:{status:"blocking"}},m=n.now,p=n.LinkedList,r=p.Element,q=n.OObject,u=Array.prototype.slice,s=ovi.type,w=1,x=!0;b.prototype=new q({status:2,S:0,Qb:0,Tm:0,
eh:-1,Tk:0,priority:50,prioritySetter:function(a){if(s(a)!=="number")return this.priority;a<0&&(a=0);a>100&&(a=100);return a},useAnimationFrame:!1,Pc:0,nice:function(a){if(a&&this.Qb<this.timeStamp){this.S-=(this.timeStamp-this.Qb)/F.SLICE_SIZE/z.length;if(this.S<0)this.S=0;if(this.S>300)this.S=300;this.Pc=this.priority-this.S;this.Qb=this.timeStamp;this.realtime&&(this.Pc+=1E3)}return this.Pc},realtime:!1,precede:function(a){a instanceof b&&(this.N[a.id]=a,this.N.length++,a.K[this.id]=this,a.K.length++,
a.N[this.id]&&(delete a.N[this.id],a.N.length--,delete this.K[a.id],this.K.length--));return this},postpone:function(a){a instanceof b&&(this.K[a.id]=a,this.K.length++,a.N[this.id]=this,a.N.length++,a.K[this.id]&&(delete a.K[this.id],a.K.length--,delete this.N[a.id],this.N.length--));return this},clearPrecedence:function(){if(!this.N.length)return null;for(var a=[],d=this.N,b;void 0 in d;)b=d[void 0],delete b.K[this.id],b.K.length--,a.push(b);this.N={length:0};return a},clearPostponement:function(){if(!this.K.length)return null;
for(var a=[],d=this.K,b;void 0 in precedeList;)b=d[void 0],delete b.N[this.id],b.N.length--,a.push(b);this.K={length:0};return a},run:function(a,b){if(!b&&!this.useAnimationFrame&&this.K.length)return m();if(!b&&this.useAnimationFrame&&!Z)return m();var e=this.fd,c=this.Xc,l=this.dd,p=this.coroutine,j=v,f=this.scope,n,q,g,h=g=m();this.nice(!0);e.list&&e.list.remove(e);c.list&&c.list.remove(c);l.list&&l.list.remove(l);v=this;this.Tm++;this.Ln=a?1.0E20:g+(Z?F.AF_SLICE_SIZE:F.SLICE_SIZE);this.eh=V;this.set("status",
1);this.timeStamp=this.callTime=g;this.Rd=!0;if(x)try{q=p.Mb.call(f.that,f,this)}catch(r){n=r}else q=p.Mb.call(f.that,f,this);v=j;g=m();this.S+=(e=g-h)/F.SLICE_SIZE;if(this.S<0)this.S=0;if(this.S>300)this.S=300;this.Pc=this.priority-this.S;this.Tk+=e;this.Qb=g;D+=e;A-=e;this.clearPrecedence();if(n&&this.onError)try{n=this.onError(f,this,n)}catch(w){}if(n||this.Rd){this.Rd=!1;this.set("returnValue",q);F.kill(this);if(this.onTerminated)this.onTerminated(f,this);n&&(ovi.warn("Coroutine '"+p.ne+"' aborted abnormally with exception"),
ovi.info((n.name?n.name+": ":"")+n.message))}else if(k[this.status]!==q&&!this.Cl&&d.console&&d.console.warn)this.Cl=!0,console.warn("The coroutine with the name '"+this.coroutine.ne+"' returned in a blocked state, but didn't return the Coroutine.BLOCK object.\nThe reason may be a bug that the developer of the coroutine forgot a return, which can lead to errors!");return g}});var y=new b,v=null,z={length:0},B=new p,E=new p,H=new p,O=new p,T=new p,D=0,G=m(),A=0,C=!0,V=0,P=0,Z=!1,ga=function(){function a(){b=
!1;Z=!0;if(x)try{h()}catch(e){d&&d.console&&d.console.log&&d.console.log(e)}else h();Z=!1}var b=!1,e=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||function(a){setTimeout(a,10)};return function(){b||(b=!0,e(a))}}(),J=function(){function a(){q=null;h()}function b(a){a.source!==d&&a.data==="nm.util.Coroutine#postMessageHack"&&h();if(a.source===d&&a.data==="nm.util.Coroutine#postMessageHack")return a.stopImmediatePropagation?
a.stopImmediatePropagation():a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!j&&p?(j=p=!1,h()):j=p=!1,!1}function e(){c=null;h()}var c=null,k=d.setImmediate||d.webkitSetImmediate||d.mozSetImmediate||d.oSetImmediate||d.msSetImmediate||function(a){return setTimeout(a,0)},l=d.clearImmediate||d.webkitClearImmediate||d.mozClearImmediate||d.oClearImmediate||d.msClearImmediate||function(a){return clearTimeout(a)},p=!1,j=!1,f,n=function(){var a=navigator,b=a.userAgent.toLowerCase(),e=!1;if(f=a.appName===
"Microsoft Internet Explorer")+((((b.match(/(?:version|chrome|firefox|msie)[\/ ]([\d.]+)/)||[])[1]||"").match(/([\d]+(?:[.][\d]+){0,1})/)||[])[1]||0)>=9&&+d.document.documentMode>=9&&(e=!0);return e}(),g=f&&!n?!1:d.postMessage&&(d.addEventListener||d.attachEvent),q=null;g&&(d.addEventListener?d.addEventListener("message",b,!1):d.attachEvent("onmessage",b));return function(b,f){var f=f||m(),b=+b,n=f+b;if(n!==n||n<P||!P)q&&(d.clearTimeout(q),q=null),c&&(l(c),c=null),j=!0,P=0;if(n===n&&!P)if(P=n,b<16)if(g){if(!p||
j)p=!0,j=!1,d.postMessage("nm.util.Coroutine#postMessageHack","*")}else c||(c=k(e));else q||(q=d.setTimeout(a,b))}}(),I,F=nokia.maps.util.Coroutine={TERMINATED:0,RUNNING:1,BLOCKING:2,YIELDED:k[1],BLOCKED:k[2],KILLED:k[0],create:function(a,d){function e(){var a=arguments,d,c=new b(e,d=u.call(a,0));z[c.id]=c;z.length++;c.scope.that=this;c.scope.context=c;d.callee=a.callee;d.caller=a.callee.caller;c.Qb=c.createTime=c.timeStamp=c.callTime=m();F.resume(c);return c}e.zk=u.call(arguments,2);e.ne=a;e.Mb=
d;return e},createEx:function(a,d,b){var e=u.call(arguments,0),e=e.splice(2,1)&&this.create.apply(this,e);b&&(e.defaults=b);return e},forName:function(a){var d,b,e=[];for(d in z)if((b=z[d]).name&&b.name.match(a))e[e.length]=b;return e},all:function(){var a,d=[];for(a in z)d.push(z[a]);return d},forId:function(a){return z[a]},wait:function(a,d,b){var e=a.$blocking||(a.$blocking={});if(b=b||v)return e[b.id]=b,b.wc=a,F.suspend(b,d)},signal:function(a){var d;if(a=a&&a.$blocking)for(d in a)return F.resume(d=
a[d]),d},broadcast:function(a){var d,b=a&&a.$blocking;if(b){for(d in b)F.resume(b[d]);delete a.$blocking}},shallYield:function(){var a=v;return a&&(a.timeStamp=m())&&a.timeStamp>=a.Ln},yield:function(a){if(a=a||v)return F.suspend(a,0)},sleep:function(a,d){if(d=d||v)return d.wc=null,F.suspend(d,a)},kill:function(a){arguments.length===1?a instanceof b||(a=v):a=a||v;if(a){if(a.status===0)return F.KILLED;var d=a.Xc,e=a.fd,c=a.dd;d.list&&d.list.remove(d);e.list&&e.list.remove(e);c.list&&c.list.remove(c);
delete z[a.id];z.length--;F.broadcast(a);a.set("status",0);return F.KILLED}},suspend:function(d,b){if((d=d||v)&&d.status!==0){if(b===null)b=Number.NaN;b=+b;d.Rd=!1;var e=d.Xc,c=d.fd,k=d.dd;e.list&&e.list.remove(e);c.list&&c.list.remove(c);k.list&&k.list.remove(k);d.set("timeStamp",m());if(b<=0)return d.set("status",1),d.useAnimationFrame?(d.nice(!0),H.addSorted(a,null,e)):(T.push(k),d.nice(!0),E.addSorted(a,null,e)),F.YIELDED;if(b>0)d.ic=d.timeStamp+b,B.addSorted(j,null,c);d.set("status",2);return F.BLOCKED}},
resume:function(d){if(d&&d.status===2){var b=d.Xc,e=d.fd,k=d.dd,l=m();if(d.wc)delete d.wc.$blocking[d.id],d.wc=d.ic=null;e.list&&B.remove(e);d.set("timeStamp",l);d.nice(!0);d.useAnimationFrame?H.addSorted(a,null,b):(E.addSorted(a,null,b),d.realtime?O.unshift(k):d.eh<V?O.push(k):T.push(k));d.set("status",1);c(l)}},MIN_IDLE_TIME:15,MAX_EXEC_TIME:30,AF_MAX_EXEC_TIME:10,SLICE_SIZE:10,AF_SLICE_SIZE:10,count:function(){return z.length},taskCpuTime:function(){return D},schedulerCpuTime:function(){return A},
totalCpuTime:function(){return m()-G},current:function(){return v},scheduler:function(){h()},schedulerNextRuntime:function(){return P},killAll:function(){for(var a in z)F.kill(z[a],"killAll called!")},scope:function(a){eval("fn = "+a.toString());return a},catchException:function(a){x=!!a}};F.ExecutionContext=b;F.Scope=l;y.scope.global=y.scope;h()})();ovi.provide("nokia.maps.ui._packaging.base");ovi.provide("nokia.maps.net._packaging.base");ovi.provide("nokia.maps.dom.Page");
(function(h){if(!nokia.maps.util.getConstructor(nokia.maps.dom.Page)){var g=nokia.maps.util,f=g.Coroutine,c=g.now,a=Math.pow,j=Math.sqrt,b=ovi.type,e=h.TouchList,l=function(a,d){return d?a===d?!0:l(a,d.parentNode):!1},d=navigator,n=d.userAgent.toLowerCase(),k=d.appVersion,m={windows:/Windows/.test(k),mac:/MacIntel/.test(d.platform),linux:/X11/.test(k)&&!/tablet/.test(n)&&!/armv7/.test(n),maemo:/apple/.test(n)&&/linux/.test(n)&&/armv7/.test(d.platform),iphone:/iphone/.test(n),ipod:/ipod/.test(n),ipad:/ipad/.test(n),
android:/android/.test(n),meego:/meego/.test(n),windowsphone:/windows\ phone/.test(n)},p,r,q={msie:r=d.appName==="Microsoft Internet Explorer",chrome:/chrome/.test(n),safari:/apple/i.test(navigator.vendor)&&!/browserng/.test(n),opera:/opera/.test(n),mozilla:/firefox|fennec/.test(n)&&!/apple/.test(navigator.vendor),konqueror:/konqueror/.test(n),camino:/camino/.test(n),cp:/browserng/.test(n),fullVersion:p=(n.match(/(?:version|chrome|firefox|msie)[\/ ]([\d.]+)/)||[])[1]||"",version:+((p.match(/([\d]+(?:[.][\d]+){0,1})/)||
[])[1]||0),touch:m.android||m.iphone||m.ipad||m.meego||m.maemo,mobile:/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(n||d.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test((n||
d.vendor||window.opera).substr(0,4)),web:!this.mobile,language:d.language||d.userLanguage,webkit:/webkit/.test(n),gecko:/gecko\//.test(n),engineVersion:(n.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],realVersion:r&&(window.console&&console.profile&&9||document.documentMode!=void 0&&8)||Math.floor(+p),dnd:!1},u=q.webkit&&!q.touch?"offsetX":"layerX",s=q.webkit&&!q.touch?"offsetY":"layerY",w=window.MSGesture?new MSGesture:null,x,y=function(k){function p(a){a.pointerType===a.MSPOINTER_TYPE_TOUCH?
a.type.toLowerCase()==="mspointerdown"?D(a):a.type.toLowerCase()==="mspointermove"?y(a):a.type.toLowerCase()==="mspointerup"?r(a):G(a):G(a)}function n(a){A(F(a))}function r(a){for(var d=F(a),b=-1,e,l=d.changedTouches,m,p;++b<l.length;){p=new na(l[b]);for(e=0;e<ha.length;e++)if(p.id===ha[e].id){m=ha[e];ha.splice(e--,1);break}if(m){m.up=p;m.pressed=!1;if(ba)X.style.display="none",p.target=k.elementFromPoint(p.pageX,p.pageY),X.style.display="block";d.target=p.target;d.pageX=p.pageX;d.pageY=p.pageY;d.targetX=
p[u];d.targetY=p[s];A(d);if(!ba&&!d.defaultPrevented&&ha.length===0&&m.down.target===p.target&&!m.tapFired)m.tapFired=!0,A(new ca({type:"tap",target:p.target,pageX:p.pageX,pageY:p.pageY,targetX:p.pageX+a[u],targetY:p.pageY+a[s]})),e=c(),Qa>0&&e<Qa?(Qa=0,A(new ca({type:"dbltap",target:p.target,pageX:p.pageX,pageY:p.pageY}))):Qa=e+v.DOUBLE_TAP_TIME}}ba&&a.preventDefault();f.resume(ia)}function y(a){for(var d=F(a),b=-1,e,l=d.changedTouches,m=c(),p,j;++b<l.length;){j=new na(l[b]);j.timeStamp=m;for(e=
0;e<ha.length;e++)if(p=ha[e],p.id===j.id){p.current=j;if(ba)X.style.display="none",j.target=k.elementFromPoint(j.pageX,j.pageY),X.style.display="block";p.preventMoveDefault&&a.preventDefault()}if(!ba)d.target=j.target,d.pageX=j.pageX,d.pageY=j.pageY,d.targetX=j[u],d.targetY=j[s],A(d)}ba?(X.style.left=aa.current.pageX+"px",X.style.top=aa.current.pageY+"px",(K.realTime||!ta)&&ia.run()):ia.run();f.schedulerNextRuntime()<m-10&&f.scheduler();(ba||wa)&&a.preventDefault()}function D(a){for(var a=F(a),d=
-1,b=a.changedTouches,e=a.timeStamp,c,k,l;++d<b.length;){l=new ua;l.id=(c=new na(b[d])).id;l.down=c;l.current=c;l.pressed=!0;if(wa)l.longpressSent=l.tapFired=l.preventDrag=!0;c.timeStamp=e;ha.some(function(a){return l.id===a.id})||ha.push(l);k=l.down.target;try{for(;k;){if(k&&k.isEventTarget&&k.draggable){l.preventMoveDefault=!0;break}k=k.parentNode}}catch(m){}a.target=c.target;a.pageX=c.pageX;a.pageY=c.pageY;a.targetX=c[u];a.targetY=c[s];A(a)}f.resume(ia)}function G(a){C(a);A(F(a))}function A(d){var b=
d.type,e=d.button,c=d.touches,k=da[e],l,p=!1;if(m.android){if(b==="gesturechange")return;if(b==="touchstart"&&Ra>=2)return;b==="touchstart"&&(Ra++,Sa++);b==="touchend"&&(Ra--,Sa--)}if(b==="resizestart"||b==="resize"||b==="resizeend")return Aa(d.target,d);if(k&&(!x||Q.MSPointerEvent&&x!==Q.MSPointerEvent.MSPOINTER_TYPE_TOUCH))if(b==="mousedown"&&k)k.down=d.clone(),k.up=null,k.pressed=!0,k.preventClick=k.clickFired=k.longpressSent=!1,db|=1<<e;else if(b==="mouseup"&&k)k.up=d.clone(),k.pressed=!1,db&=
~(1<<e);else if(b==="click"){if(k.clickFired||k.preventClick)p=!0,k.preventClick&&d.preventDefault();k.clickFired=!0}else if(b==="longpress")k.longpressSent=!0;if(!Ja&&(b==="gesturestart"||Ra>=2)){wa=!0;for(l in ha)e=ha[l],e.tapFired=e.preventDrag=e.longpressSent=!0;if(m.android&&c&&c.length===2)d.type="gesturestart",d.scale=1,eb=j(a(c[0].screenX-c[0].screenY,2)+a(c[1].screenX-c[1].screenY,2)),fb=d.scale,Aa(d.target,d,!1),Ja=p=!0;f.resume(ia)}else if(Sa>1&&Ja){if(m.android&&c&&c.length===2)Aa(d.target,
d,!1),d.type="gesturechange",d.scale=j(a(c[0].screenX-c[0].screenY,2)+a(c[1].screenX-c[1].screenY,2))/eb,fb=d.scale,Aa(d.target,d,!1),p=!0}else if(b==="gestureend"||Sa===1&&Ja){wa=!1;if(m.android)d.type="gestureend",d.scale=c&&c.length===2?Math.sqrt(a(c[0].screenX-c[0].screenY,2)+a(c[1].screenX-c[1].screenY,2))/eb:fb,Aa(d.target,d,!1),p=!0,Ja=!1;f.resume(ia)}ba&&!tb[b]&&(p=!0);if(!p&&(d.shiftKey=gb,d.ctrlKey=Ta,d.altKey=hb,d.metaKey=ib,d.buttonState=db,Aa(d.target,d,b==="mouseout"||b=="mouseleave"?
d.Hg:!1),b==="click"&&d.defaultPrevented))k.preventClick=!0}function C(a){if(a){var d=a.target||a.srcElement||null,b=a.type,e="toElement"in a?a.toElement:a.relatedTarget;if(Gb[b])gb=a.shiftKey,Ta=a.ctrlKey,hb=a.altKey,ib=a.metaKey||!1;if(ub[b]){if("pageX"in a&&a.pageX!==void 0&&a.pageX!==null&&a.pageX===a.pageX)ka=a.pageX,la=a.pageY,Ba=a.clientX,Ca=a.clientY;else if("clientX"in a&&"scrollLeft"in $&&a.clientX!==void 0&&a.clientX!==null&&a.clientX==a.clientX)ka=a.clientX+(k.documentElement.scrollLeft?
k.documentElement.scrollLeft:$.scrollLeft),la=a.clientY+(k.documentElement.scrollTop?k.documentElement.scrollTop:$.scrollTop),Ba=a.clientX,Ca=a.clientY;else return;if(ba&&ta)X.style.display="none",d=k.elementFromPoint(a.clientX,a.clientY),X.style.display="block";if(d&&d.nodeType===3)d=d.parentNode;ma=d||null;b==="mouseout"&&!e&&(ma=null)}}}function V(a){b(a)==="element"&&X.appendChild(a)}function P(a,d,e){for(var c=b(a);pa.childNodes.length;)pa.removeChild(pa.childNodes[0]);if(c==="element")d=b(d)===
"number"?d===d?d:0:0,e=b(e)==="number"?e===e?e:0:0,pa.style.left=d+"px",pa.style.top=e+"px",pa.appendChild(a)}function Z(){jb[K.effectAllowed]?qa=K.effectAllowed:K.effectAllowed=qa}function ga(){jb[qa]&&jb[qa][K.dropEffect]?fa=K.dropEffect:fa=K.dropEffect="none"}function J(){if(X){for(X.parentNode&&X.parentNode.removeChild(X);X.childNodes.length;)X.removeChild(X.childNodes[0]);for(;pa.childNodes.length;)pa.removeChild(pa.childNodes[0])}}function I(){xa=Q.orientation;kb=k.body.clientWidth;Ka=k.body.clientHeight;
La=Q.innerWidth;Ua=Q.innerHeight;lb=Q.outerWidth;mb=Q.outerHeight;if(!m.iphone){if(!q.webkit)kb=null,La?Ka||(Ka=k.documentElement.offsetHeight||null):(La=k.body.clientWidth,Ua=k.body.clientHeight,Ka=null);lb=La;mb=Ua}xa?xa===-90?xa=90:xa===90&&(xa=270):xa=screen.width>screen.height?90:0;S.width=kb;S.height=Ka;S.layoutWidth=La;S.layoutHeight=Ua;S.viewportWidth=lb;S.viewportHeight=mb;S.orientation=xa}function F(a){if(a instanceof ca)return a;var b,c,m,p,j,f;m=(a=a||window.event)&&(a.target||a.srcElement)||
null;if((b=Va)&&Va.nativeEvent===a)return b.currentTarget=a.currentTarget,b.bubbles=a.bubbles,b.eventPhase=a.eventPhase,b.defaultPrevented=a.defaultPrevented,b;b=new ca;(b.nativeEvent=a)||g.c("Invalid or no event object supplied!");(!(b.type=a.type)||!b.type.length)&&g.c("Invalid or no type in event!");b.bubbles=a.bubbles===!0||a.bubbles===!1?a.bubbles:!1;b.cancelable=a.cancelable===!0||a.cancelable===!1?a.cancelable:!0;b.currentTarget=a.currentTarget;b.defaultPrevented=a.defaultPrevented===!0||a.defaultPrevented===
!1?a.defaultPrevented:!1;if(b.eventPhase)b.eventPhase=a.eventPhase;b.namespaceURI=a.namespaceURI;b.page=S;if(b.type==="DOMMouseScroll")b.type="mousewheel";c=b.type;if(b.target=m){if(b.target.nodeType===3)b.target=b.target.parentNode}else return Va=b;if(Hb[b.type]&&d.msPointerEnabled&&(x=a.pointerType,b.pointerId=a.pointerId,b.hwTimestamp=a.hwTimestamp,b.isPrimary=a.isPrimary,b.pointerType=a.pointerType,b.pressure=a.pressure,b.rotation=a.rotation,b.tiltX=a.tiltX,b.tiltY=a.tiltY,p=new na(a),a.pointerType===
a.MSPOINTER_TYPE_TOUCH)){if(b.type==="MSPointerDown"&&(oa.J(a),Ma[b.pointerId]=b.target,b.type=nb[b.type],oa.length>1)){w.target=b.target;for(f=0;f<oa.length;f++)w.addPointer(oa[f].pointerId)}b.target=m=p.target=Ma[b.pointerId];if(b.type==="MSPointerMove"&&oa.identifiedTouch(b.pointerId))oa.J(a),b.type=nb[b.type];if(b.type==="MSPointerUp")oa.Da(a),Ma[b.pointerId]=null,delete Ma[b.pointerId],b.type=nb[b.type],oa.length<=1&&w.stop();a.touches=new e;a.touches.nk(oa);a.changedTouches=new e;a.changedTouches.J(p);
a.targetTouches=new e;for(f=0;f<oa.length;f++)l(m,Ma[oa[f].identifier])&&a.targetTouches.J(oa[f])}if(Ib[b.type])b.touches=a.touches,b.targetTouches=a.targetTouches,b.changedTouches=a.changedTouches;if(Jb[c]||vb[c]){if(vb[c])b.type=Kb[c];b.pageX=a.pageX;b.pageY=a.pageY;b.targetX=a[u];b.targetY=a[s];b.scale=a.scale;b.rotation=a.rotation}b.view=void 0;b.relatedTarget="relatedTarget"in a?a.relatedTarget:a.fromElement===m?a.toElement:a.fromElement;b.detail=a.detail;if(a.display)b.display=a.display,b.displayX=
a.displayX,b.displayY=a.displayY;if(ub[c]){b.shiftKey=a.shiftKey;b.altKey=a.altKey;b.ctrlKey=a.ctrlKey;b.metaKey=a.metaKey||!1;b.screenX=a.screenX;b.screenY=a.screenY;b.clientX=a.clientX;b.clientY=a.clientY;"pageX"in a?(b.pageX=a.pageX,b.pageY=a.pageY,"layerX"in a?(b.targetX=q.msie&&q.version==9?a.offsetX:a[u],b.targetY=q.msie&&q.version==9?a.offsetY:a[s]):(b.targetX=a.offsetX,b.targetY=a.offsetY)):(b.pageX=a.clientX+(k.documentElement.scrollLeft||$.scrollLeft),b.pageY=a.clientY+(k.documentElement.scrollTop||
$.scrollTop),b.targetX=a.offsetX,b.targetY=a.offsetY);if(Lb[c]){c==="mousedown"&&(Pa=!1);m=a.button;if(sa<=8&&c==="mousedown")for(f=0;f<da.length;f++)da[f].pressed&&(m&=~ob[f]);else if(sa<=8&&(c==="click"||c==="contextmenu")&&m===0)for(f=j=m=0;f<da.length;f++)if(p=da[f],!p.pressed&&p.up&&p.up.timeStamp>j)m=ob[f],j=p.up.timeStamp;b.button=sa<=8||q.konqueror?Mb[m]:m}if(Nb[c])b.deltaX=a.deltaX,b.deltaY=a.deltaY,b.deltaZ=a.deltaY,b.deltaMode=a.deltaMode;else if(Ob[c])b.wheelDelta=(a.wheelDelta||-a.detail)<
0?-1:1}if(Pb[c])b.data=a.data,b.inputMode=b.inputMode;if(Qb[c])b.keyIdentifier=a.keyIdentifier,b.keyLocation=a.keyLocation,b.repeat=a.v,b.ctrlKey=a.ctrlKey,b.shiftKey=a.shiftKey,b.altKey=a.altKey,b.metaKey=a.metaKey||!1;return Va=b}function L(a){if(!a||!a.ownerDocument||!a.parentNode||a.parentNode===a)return null;var d,b=q.gecko&&k.getBoxObjectFor&&a.style.position==="absolute"&&(a.style.top===""||a.style.left==="");d=a.offsetParent;var e=a.offsetLeft,c=a.offsetTop,l,m;if(a.getBoundingClientRect)d=
k.documentElement,e=d.pageXOffset?d.pageXOffset:k.body.pageXOffset?k.body.pageXOffset:Q.pageXOffset?Q.pageXOffset:d.scrollLeft,c=d.pageYOffset?d.pageYOffset:k.body.pageYOffset?k.body.pageYOffset:Q.pageYOffset?Q.pageYOffset:d.scrollTop,b=a.getBoundingClientRect(),b={left:b.left+e-d.clientLeft,top:b.top+c-d.clientTop,right:b.right+e-d.clientLeft,bottom:b.bottom+e-d.clientTop,width:b.width,height:b.height};else if(k.getBoxObjectFor&&!b)b=k.getBoxObjectFor(a),d=k.getBoxObjectFor(viewport),b={left:b.screenX-
d.screenX,top:b.screenY-d.screenY},b.right=b.left+a.offsetWidth-1,b.bottom=b.top+a.offsetHeight-1;else{for(;d;){if((l=d.offsetLeft)&&l===l)e+=l;if((m=d.offsetTop)&&m===m)c+=m;if((l=d.clientLeft)&&l===l)e+=l;if((m=d.clientTop)&&m===m)c+=m;e-=d.scrollLeft;if(!q.opera||d.tagName!=="TR")c-=d.scrollTop;d=d.offsetParent}if(q.safari&&a.style.position==="absolute"||q.opera)c-=$.offsetTop;b={left:e,top:c,right:e+a.offsetWidth-1,bottom:c+a.offsetHeight-1}}if(!b.width)b.width=b.right-b.left+1,b.height=b.bottom-
b.top+1;return b}function ra(a,d){if(b(a)==="string")return za(k.createElement(a),d);a.tagName||g.c("tagName must be string or object with property 'tagName'");var e=k.createElement(a.tagName),c;for(c in a)Rb[c]||e.setAttribute(c,a[c]);(d||(d=a.style))&&za(e,d);return e}function za(a,d){if(d&&a&&a.style)for(var b in d)!Sb[b]&&b in a.style&&(a.style[b]=d[b]);return a}function ua(){}function na(a){if(a)for(var d in a)this[d]=a[d];this.id=this.identifier}function W(){this.pressed=this.longpressSent=
this.clickFired=this.preventClick=!1;this.down=this.up=null}var Q=k.parentWindow||k.defaultView,R=k.documentElement,$=k.getElementsByTagName("BODY")[0],Eb=k.getElementsByTagName("HEAD")[0],S=this,Pa=!1,Fb=m.mac&&q.webkit,sa=function(){var a;if(q.msie)a=5,k.documentMode?a=k.documentMode:k.compatMode&&k.compatMode==="CSS1Compat"&&(a=7);return a}(),ca=h.Event,Wa=h.EventTarget,Tb=h.DataTransfer,wb=Wa.getDispatchPath,Aa=Wa.dispatchEvent,M=ovi.dom.addEvent,xb=ovi.Array.indexOf;na.prototype={id:null,identifier:null,
target:null,timeStamp:0,pageX:0,pageY:0,screenX:0,screenY:0,clientX:0,clientY:0};ua.prototype={preventMoveDefault:!1,preventDrag:!1,pressed:!1,longpressSent:!1,tapFired:!1,id:null,down:null,current:null,up:null};var Sb={constructor:!0,prototype:!0},Rb={constructor:!0,prototype:!0,tagName:!0,style:!0},ya=Math.abs,Va=null,nb={MSPointerDown:"touchstart",MSPointerMove:"touchmove",MSPointerUp:"touchend",MSPointerCancel:"touchcancel"},oa=d.msPointerEnabled?new e:null,Ma={},Hb={MSPointerDown:!0,MSPointerMove:!0,
MSPointerUp:!0},vb={MSGestureStart:!0,MSGestureChange:!0,MSGestureEnd:!0},Kb={MSGestureStart:"gesturestart",MSGestureChange:"gesturechange",MSGestureEnd:"gestureend"},Ib={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0},Jb={gesturestart:!0,gesturechange:!0,gestureend:!0},tb={dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0},ub=ovi.extend(ovi.extend({},tb),{mousemove:!0,mouseup:!0,mousedown:!0,mouseover:!0,mouseout:!0,mouseenter:!0,mouseleave:!0,click:!0,dblclick:!0,
mousewheel:!0,contextmenu:!0}),Lb={mousedown:!0,mouseup:!0,contextmenu:!0,click:!0,dblclick:!0},Ob={mousewheel:!0},Nb={wheel:!0},Pb={},Qb={keydown:!0,keypress:!0,keyup:!0},ob={0:1,1:4,2:2,3:8,4:16},Mb={1:0,4:1,2:2,8:3,16:4},Ub=k.compatMode!=="CSS1Compat",kb=0,Ka=0,La=0,Ua=0,lb=0,mb=0,xa=0,Xa=function(){var a=0,d=0,b=0,e=0,c=0,k=0,l=ra("P",{height:"200px",width:"200px"}),m=ra("P",{position:"absolute",top:0,left:0,visibility:"hidden",width:"100px",height:"100px",overflow:"hidden"});try{m.appendChild(l);
$.appendChild(m);d=m.offsetWidth;c=m.offsetHeight;m.style.overflow="scroll";b=m.offsetWidth;k=m.offsetHeight;if(d===b)b=m.clientWidth;if(c===k)k=m.clientHeight;$.removeChild(m);a=d-b;e=c-k}catch(p){e=a=0}return e!==e||a!==a||e<=0||a<=0?{width:17,height:17}:{width:a,height:e}}(),ka=0,la=0,Ba=0,Ca=0,ma=null,ea=null,Da=[],da=[new W,new W,new W,new W,new W],db=0,ha=[],Qa=0,ba=!1,wa=!1,jb={uninitialized:{copy:!0,move:!0,link:!0},none:{},copy:{copy:!0},copyLink:{copy:!0,link:!0},copyMove:{copy:!0,move:!0},
all:{copy:!0,move:!0,link:!0},link:{link:!0},linkMove:{move:!0,link:!0},move:{move:!0}},Ya=!1,Za=0,$a=0,ja=null,aa=null,qa=null,ta=!0,fa=null,yb={none:q.msie?"not-allowed":"no-drop",link:q.msie||q.safari?"default":"alias",move:q.msie?"hand":"pointer",copy:q.msie||q.safari?"default":"copy"},va=null,Y=null,Ea=!1,K=null,X=null,Fa=null,zb=null,pa=null,gb=!1,Ta=!1,hb=!1,ib=!1,Gb={keydown:!0,keyup:!0,mousedown:!0,mouseup:!0},U=v.browser.mobile,Ab=U?5:150,Vb=U?1:25,ia=f.create("nokia.maps.dom.Page#queueCo",
function(a,d){var e,c,l=d.callTime,m=l-v.LONGPRESS_INTERVAL,p=!1,j=l+Ab,n,g,h,r=-1,w,s,u,x,y,z;if(ba){if(aa?(y=(n=aa.current.pageX)-Za,z=(x=aa.current.pageY)-$a,e=aa):(y=(n=ka)-Za,z=(x=la)-$a,e=da[ja]),Za=n,$a=x,X.style.left=n+"px",X.style.top=x+"px",!e.pressed&&e.up||wa||Ya){if(ta&&!wa&&!Ya&&Y&&fa!=="none")e=new ca({type:"drop",target:Y,relatedTarget:va,button:ja,pageX:n,pageY:x,deltaX:y,deltaY:z,dataTransfer:K}),A(e),ga(),e.defaultPrevented||(e=K.getData("text/plain"),b(Y)==="element"&&(Y.nodeName===
"TEXTAREA"||Y.nodeName==="INPUT"&&Y.type.toLowerCase()==="text")?fa==="copy"||fa==="move"?e&&e.length&&(Y.value+=e):fa="none":fa="none");else if(!ta)K.dropEffect=fa="none",e=new ca({type:"dragleave",target:Y,relatedTarget:va,button:ja,cancelable:!1,pageX:n,pageY:x,deltaX:0,deltaY:0,dataTransfer:K}),A(e);K.dropEffect=fa;K.effectAllowed=qa;e=new ca({type:"dragend",target:va,relatedTarget:Y,button:ja,pageX:n,pageY:x,deltaX:0,deltaY:0,dataTransfer:K});A(e);ia.realtime=!1;if(q.msie)$.releaseCapture&&$.releaseCapture(),
$.style.cursor=zb;J();ba=Ya=!1;K=aa=ja=null}}else if(!wa){if(ha.length===1&&(e=ha[0])&&e.current)if(y=e.current.pageX-e.down.pageX,z=e.current.pageY-e.down.pageY,e.pressed&&!e.preventDrag&&ya(y)+ya(z)>8)aa=e,n=e.current.pageX,x=e.current.pageY;if(!aa)for(r in da)if(e=da[r],e.down&&(y=ka-e.down.pageX,z=la-e.down.pageY,e.pressed&&ya(y)+ya(z)>1)){ja=+r;n=ka;x=la;break}if((aa||ja!==null)&&e){Pa=!0;g=e.down.target;try{for(;g;){if(g.isEventTarget&&g.draggable)break;g=g.parentNode}}catch(E){g=null}if(g){aa?
(y=(n=aa.current.pageX)-aa.down.pageX,z=(x=aa.current.pageY)-aa.down.pageY,e=aa):(y=(n=ka)-e.down.pageX,z=(x=la)-e.down.pageY,e=da[ja]);Za=n;$a=x;if(!X)X=ra("DIV",{position:"absolute",top:e.down.pageX+"px",left:e.down.pageY+"px",zIndex:65535,overflow:"visible",width:0,height:0}),pa=ra("DIV",{position:"absolute",top:0,left:0,zIndex:255,overflow:"visible",width:0,height:0}),Fa=ra("DIV",{position:"absolute",top:"-25px",left:"-25px",zIndex:65535,overflow:"visible",width:"50px",height:"50px"}),Fa.innerHTML=
"&nbsp;";X.appendChild(pa);!q.msie&&!aa&&X.appendChild(Fa);X.style.left=n+"px";X.style.top=x+"px";Fa.style.cursor="default";$.appendChild(X);K=new Tb;K.setDragImage=P;K.addElement=V;h=new ca({type:"dragstart",target:g,relatedTarget:null,button:ja,pageX:e.down.pageX,pageY:e.down.pageY,targetX:e.down.targetX,targetY:e.down.targetY,deltaX:0,deltaY:0,dataTransfer:K});A(h);if(h.defaultPrevented)J(),e.preventDrag=!0,ba=!1,K=aa=ja=null;else if(ia.realtime=K.realtime,va=e.down.target=g,ba=!0,ta=K.lift!==
!1,Y=null,e.longpressSent=e.tapFired=e.preventClick=!0,Ea=!1,Z(),K.effectAllowed=qa,K.dropEffect=fa,$.setCapture&&$.setCapture(),q.msie)zb=$.style.cursor||"auto",$.style.cursor="default"}else ja=aa=null}}if(ba){c=aa?aa.current.target:ma;if(ta&&Y&&Y!==c){g=c;try{for(;g;){if(g===Y)break;g=g.parentNode}}catch(H){g=null}if(!g||g===Q||g===k||g===$)e=new ca({type:"dragleave",target:Y,relatedTarget:va,button:ja,pageX:n,pageY:x,dataTransfer:K}),A(e),K.effectAllowed=qa,K.dropEffect=fa="none",Y=null,Ea=!1}if(ta&&
!Y&&c){g=c;try{for(;g;){if(g.isEventTarget)break;g=g.parentNode}}catch(O){g=null}if(g)c=new ca({type:"dragenter",target:Y=g,relatedTarget:va,button:ja,pageX:n,pageY:x,dataTransfer:K}),A(c),c.defaultPrevented?(Ea=!0,ga(),K.effectAllowed=qa):(Ea=!1,K.effectAllowed=qa,K.dropEffect=fa="none")}if(ta&&Y&&Ea)c=new ca({type:"dragover",target:Y,relatedTarget:va,button:ja,pageX:n,pageY:x,deltaX:y,deltaY:z,dataTransfer:K}),A(c),c.defaultPrevented?(ga(),K.effectAllowed=qa):(Ea=!1,K.effectAllowed=qa,K.dropEffect=
fa="none");n=new ca({type:"drag",target:va,relatedTarget:Y,button:ja,pageX:n,pageY:x,deltaX:y,deltaY:z,dataTransfer:K});A(n);n.defaultPrevented&&(Ya=!0);if(K)if(Z(),K.dropEffect=fa,ta){if(Fa.style.cursor=yb[fa],q.msie)$.style.cursor=yb[fa]}else q.msie?$.style.cursor=K.cursor==="pointer"?"hand":K.cursor||"hand":Fa.style.cursor=K.cursor==="hand"?"pointer":K.cursor||"pointer";return f.sleep(Vb)}for(r in da)if(e=da[r],e.pressed&&(c=e.down))if(p=!0,!e.longpressSent&&c.target&&ya(ka-c.pageX)+ya(la-c.pageY)<=
1&&c.timeStamp<=m){if(e.longpressSent=!0,n=c.clone(),n.type="longpress",n.nativeEvent=null,A(n),n.defaultPrevented)e.preventClick=!0}else!e.longpressSent&&j>c.timeStamp+v.LONGPRESS_INTERVAL&&(j=c.timeStamp+v.LONGPRESS_INTERVAL);for(s in ha)if(e=ha[s],e.pressed&&(w=e.down))if(p=!0,!e.longpressSent&&(u=e.current)&&w.target&&ya(u.pageX-w.pageX)+ya(u.pageY-u.pageY)<=8&&w.timeStamp<=m){if(e.longpressSent=!0,n=new ca(ovi.extend({type:"longpress"},w)),A(n),n.defaultPrevented)e.tapFired=!0}else!e.longpressSent&&
j>w.timeStamp+v.LONGPRESS_INTERVAL&&(j=w.timeStamp+v.LONGPRESS_INTERVAL);if(ba)return f.sleep(Ab);if(p){if((n=j-l)<0)n=1;return f.sleep(n)}return f.sleep()})(),Ra=0,Sa=0,fb,eb,Ja=!1,ab=!1,Ga=0,Ha=!1,pb=0,Na=null,bb=0,cb=f.create("nokia.maps.dom.Page#mouseMoveCo",function(a,d){var b,e,c,l;l=ea;var m=d.callTime;m>=bb&&(Na&&A(Na),Na=null,bb=m+v.MOUSEMOVE_THRESHOLD);if(ea&&ea!==ma)c=new ca({type:"mouseout",target:ea,relatedTarget:ma,pageX:ka,pageY:la,clientX:Ba,clientY:Ca,Hg:d.mouseCurrentOverDispatchPath}),
d.mouseCurrentOverDispatchPath=null,A(c),ea=null;for(c=-1;++c<Da.length;)if(e=Da[c],(b=xb(Da,e))>=0&&(!e.hitTest||!e.hitTest(ka,la)))Da.splice(b,1),b=new ca({type:"mouseleave",target:e,pageX:ka,pageY:la,clientX:Ba,clientY:Ca,Hg:d.mouseCurrentEnterDispatchPath}),d.mouseCurrentEnterDispatchPath=null,A(b),c--;if(ma&&!ea){ea=ma;if(ea!==Q&&ea!==k&&ea!==$&&ea!==R&&xb(Da,ea)<0)c=new ca({type:"mouseenter",target:ea,pageX:ka,pageY:la,clientX:Ba,clientY:Ca}),Da.push(ea),c=F(c),d.mouseCurrentEnterDispatchPath=
Wa.getDispatchPath(ea,c.type,c.display),A(c);l=new ca({type:"mouseover",target:ea,relatedTarget:l,pageX:ka,pageY:la,clientX:Ba,clientY:Ca});l=F(l);d.mouseCurrentOverDispatchPath=Wa.getDispatchPath(ea,l.type,l.display);A(l)}if(!Na||bb<=m)return f.sleep();return f.sleep(bb-m)})(),Bb=!1,U=sa<=8?k:Q,N=sa<=8?!1:!0;ia.onError=cb.onError=function(){};M(k,"touchstart",D,N);M(k,"touchmove",y,N);M(k,"touchend",r,N);M(U,"gesturestart",n,N);M(U,"gesturechange",n,N);M(U,"gestureend",n,N);M(U,"orientationchange",
function(){A(F(event));A(new ca({type:"resize",target:Q}))},N);M(U,"MSPointerDown",p,N);M(U,"MSPointerMove",p,N);M(U,"MSPointerUp",p,N);M(U,"MSGestureStart",n,N);M(U,"MSGestureChange",n,N);M(U,"MSGestureEnd",n,N);M(U,"resize",function(){f.resume(z)},N);M(U,"mouseover",function(a){C(a)},N);M(U,"mouseout",function(a){var d=F(a),b,e;C(a);if(!q.msie&&(b=a.relatedTarget)&&b.nodeName==="IFRAME")for(e in da)if(da[e].pressed)a=d.clone(),a.target=ma,a.type="mouseup",a.button=e,A(a);f.resume(cb)},N);M(U,"click",
function(a){var d;C(a);d=F(a);if(!(q.opera&&a.button===2)){if(q.opera&&a.button===2)(time=c())-Ga<v.DOUBLE_CLICK_TIME?(doubleClickEvent=d.clone(),doubleClickEvent.type="dblclick",A(doubleClickEvent),Ga=0):Ga=time;A(d)}},N);M(U,"wheel",G,N);M(U,"mousewheel",G,N);M(U,"DOMMouseScroll",G,N);M(U,"dblclick",G,N);M(U,"mousedown",function(a){var d=F(a),b;b=d.target;var e=d.pageX,k=d.pageY,l,m;C(a);d.target=ma;if(sa<=8&&d.button===0&&b&&b.style&&(b.style.overflow==="auto"||b.style.overlfow==="scroll"))if(a=
L(b),l=a.right-Xa.width,m=a.bottom-Xa.height,b.clientHeight<b.scrollHeight&&e>=l&&e<=a.right||b.clientWidth<b.scrollWidth&&k>=m&&k<=a.bottom)return;ab=d.button===2?!0:!1;A(d);if(q.opera&&q.version<11&&d.button===2)ab=!1,d=d.clone(),d.type="mouseup",A(d),b=d.clone(),b.type="click",A(b),(d=c())-Ga<v.DOUBLE_CLICK_TIME?(d=b.clone(),d.type="dblclick",A(d),Ga=0):Ga=d;f.resume(ia)},N);M(U,"mouseup",function(a){var d=F(a),b,e=da[d.button];if(!q.opera||!(q.version<11&&a.button===2)){C(a);d.target=ma;if(sa<=
8&&!e.pressed)Ha=!0,b=d.clone(),b.type="mousedown",A(b);if(e.pressed){!ba&&!wa&&ia.run();A(d);if(b&&Ha)a=d.clone(),a.type="click",A(a),b.button!==2&&(Ha=!1);f.resume(ia)}}},N);M(U,"contextmenu",function(a){var d=F(a),b;C(a);if(ba)d.preventDefault();else{if(ab&&!q.gecko&&!Ha&&(a=d.clone(),a.type="click",A(a),a.button===2&&(q.chrome||q.safari||q.opera||sa>=9)))(b=c())-pb<v.DOUBLE_CLICK_TIME?(a=a.clone(),a.type="dblclick",A(a),pb=0):pb=b;if(Ha)a=d.clone(),a.type="dblclick",A(a);d.target.isEventTarget&&
(da[2].pressed||da[0].pressed&&Ta&&Fb)?(setTimeout(function(){if(!Pa)d.defaultPrevented=!1,A(d)},250),d.preventDefault()):Pa?d.preventDefault():A(d);ab=Ha=!1}},N);M(U,"mousemove",function(a){var d,b,e,k=-1,l=c();C(a);d=F(a);d.target=ma;ba?(X.style.left=ka+"px",X.style.top=la+"px",(K.realTime||!ta)&&ia.run()):(Na=d,f.resume(cb),ia.run());if(sa<=8){for(;++k<da.length;)if(e=da[k],e.pressed&&!(a.button&ob[k])&&(e=e.down.target,b=d.clone(),b.type="mouseup",b.button=k,A(b),!ba&&!b.defaultPrevented))b=d.clone(),
b.type="click",b.button=k,b.target=e,A(b);f.schedulerNextRuntime()<l-10&&f.scheduler()}},N);M(U,"keydown",G,N);M(U,"keypress",G,N);M(U,"keyup",G,N);M(U,"focus",G,N);M(U,"blur",G,N);M(k,"selectstart",function(a){for(var a=F(a),d=wb(a.target),b=-1,e=d.length;++b<e;)if(d[b].draggable)return a.preventDefault(),!1},N);M(k,"dragstart",function(a){if(!q.dnd)for(var d=wb(a.target),b=d.length,e=-1;++e<b;)if(d[e].isEventTarget&&d[e].draggable)return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},
N);M(k,"drag",function(a){var d=ma;C(a);ma=d||null},N);M(k,"dragover",function(a){if(a&&a.target&&a.target.droppable)a.preventDefault?a.preventDefault():a.returnValue=!1},N);M(k,"dragenter",function(a){var a=F(a),d;if(Y)d=a.target,a.target=Y,a.type="dragleave",A(a),a.type="dragenter",a.target=d;A(a)},N);M(k,"drop",function(a){A(a=F(a));if(a.defaultPrevented)a.type="dragleave",a.target=Y,A(a);if(Bb)a.type="dragend",a.target=va,A(a)},N);M(k,"dragend",function(a){Bb=!0;!Y&&A(F(a))},N);M(Q,"beforeunload",
G,!1);I();k.$jslPage=S;S.window=Q;S.document=k;S.html=R;S.head=Eb;S.body=$;S.documentMode=sa;S.quirksMode=Ub;S.scrollbarsWidth=Xa.width;S.scrollbarsHeight=Xa.height;S.parseEvent=F;S.update=I;S.processEvent=A;S.$=function(a){return this.document.getElementById(a)};S.setStyle=za;S.createElement=ra;S.getClientRect=L;S.destroy=function(){f.kill(z);f.kill(ia);f.kill(cb)};S.Xs=function(a){eval("fn = "+a.toString());return a};S.ctrlKeyDown=function(){return Ta};S.shiftKeyDown=function(){return gb};S.altKeyDown=
function(){return hb};S.metaKeyDown=function(){return ib}},v=h.Page=function(a){var d=document,e;if(!a){if(d.$jslPage)return d.$jslPage;return new y(d)}if(a.$jslPage)return a.$jslPage;if((e=b(a))!=="document"){if(e==="window")d=a.document;else if(a.ownerDocument)d=a.ownerDocument;else if(a.parentNode)for(d=null;a&&a.parentNode;){if((e=b(a))==="document"){d=a;break}if(e==="window"){d=a.document;break}if(a.ownerDocument){d=a.ownerDocument;break}a=a.parentNode}d||g.c("Invalid node given!")}else d=a;
if(d.$jslPage)return d.$jslPage;return new y(d)},n={parseEvent:function(a){if(a instanceof h.Event)return event;var d=(a=a||window.event)&&(a.target||a.srcElement)||null,d=d&&d.ownerDocument||document;if(!d)return v().parseEvent(a);if(d.$jslPage)return d.$jslPage.parseEvent(a);return(new y(d)).parseEvent(a)},LONGPRESS_INTERVAL:500,MOUSEMOVE_THRESHOLD:0,DOUBLE_TAP_TIME:500,DOUBLE_CLICK_TIME:300,RESIZE_IDL_TIME:1E3,RESIZE_SLEEP_MIN_TIME:125,RESIZE_SLEEP_MAX_TIME:500,platform:m,browser:q,Zf:[],Ee:[]},
z=f.create("nokia.maps.dom.Page#resizeCo",function(a,d){var e=h.Event,c=v.Ee,k=c.length,l=d.callTime,m,p,j;switch(a.ip){default:a.ip=0;case 0:a.resizeData=[],a.ip++;case 1:a.i=-1,a.resizesRunning=0,a.ip++;case 2:for(;++a.i<k;){k=c[a.i];j=k.node;c=!1;k.mode=k.mode||0;if((m=b(j))==="window"){if(p=v(j),p.update(),p.layoutWidth!==k.layoutWidth||p.layoutHeight!==k.layoutHeight)k.layoutWidth=p.layoutWidth,k.layoutHeight=p.layoutHeight,c=!0}else if(m==="element"&&(p=v(j),k.offsetWidth!==j.offsetWidth||k.offsetHeight!==
j.offsetHeight))k.offsetWidth=j.offsetWidth,k.offsetHeight=j.offsetHeight,c=!0;if(c){if(k.mode===0)k.mode=1,p.processEvent(new e({type:"resizestart",target:j}));k.lastResizeTime=l;p.processEvent(new e({type:"resize",target:j}));a.resizesRunning++}else if(k.mode===1)l>k.lastResizeTime+v.RESIZE_IDL_TIME?(k.mode=0,p.processEvent(new e({type:"resizeend",target:j}))):a.resizesRunning++;return f.yield()}a.ip++;case 3:if(a.ip=1,a.resizesRunning)return f.sleep(v.RESIZE_SLEEP_MIN_TIME)}return f.sleep(v.RESIZE_SLEEP_MAX_TIME)})();
ovi.extend(v,n);z.onError=function(){};if(m.ipad||m.iphone)f.MAX_EXEC_TIME=10,f.AF_MAX_EXEC_TIME=10,f.SLICE_SIZE=5,f.AF_SLICE_SIZE=5}})(nokia.maps.dom);ovi.provide("nokia.maps.gfx.IDL");
(function(){var h={},g=nokia.maps.dom.Page.browser,f=g.mozilla&&!g.fullVersion.indexOf("3.6"),c=nokia.maps.util.c,a=[],j={BEGIN_2D_IMAGE:["-","begin2dImage"],BEGIN_PATH:["@","beginPath"],MOVE_TO:["M","moveTo"],LINE_TO:["L","lineTo"],BEZIER_CURVE_TO:["C","bezierCurveTo"],STROKE_TEXT:["t","strokeText"],FILL_TEXT:["T","fillText"],CLOSE_PATH:["x","closePath"],FILL:["f","fill"],STROKE:["s","stroke"],SAVE:[">","save"],RESTORE:["<","restore"],SET:["#","set"],DRAW_IMAGE:["I","drawImage"],END:["X","end"]},
b=function(){var a={},d,b;for(d in j)b=j[d],a[d]=b[0].charCodeAt(0),h[a[d]]=d;return a}(),e=[["strokeColor",255,1],["fillColor",255,2],["lineWidth",1,3],["lineCap","round",4],["lineJoin","miter",5],["miterLimit",10,6],["font","10px sans-serif",7],["textAlign","start",8],["textBaseline","middle",9],["opacity",1,10]],l=nokia.maps.util.Matrix3D,d=function(){for(var a=-1,d=e.length,b=[];++a<d;)b.push(e[a][0]);return b}(),n=nokia.maps.gfx.IDL=new ovi.Class({initialize:function(a){this.data=a&&a.length>
3?a:a=[];this.width=a[1];this.height=a[2];this.description=a[3];this.resetState()},Statics:{attributeToIdentifier:{},identifierToAttribute:{},opcodes:b},resetState:function(){var a=-1,d=e.length;this.pb=[];for(this.matrix=new l;++a<d;)this[e[a][0]]=e[a][1]},saveState:function(a){var b=this.pb,e=d.length,c=-1;b.push(a);for(b.push(this.matrix.clone());++c<e;)b.push(this[d[c]])},restoreState:function(){var a=this.pb,b=d.length;if(!a.length)return this.resetState();for(;b;)this[d[--b]]=a.pop();this.matrix=
a.pop();return a.pop()},push:function(){for(var a=this.data,d=this.matrix.rows,e=d[0],d=d[1],l,j,n,g,w,x,y,v=-1,z=arguments,B=z.length;++v<B;)l=z[v],l===b.BEGIN_2D_IMAGE?a.push(l,this.width=+z[++v],this.height=+z[++v],this.description=""+z[++v]):l===b.MOVE_TO||l===b.LINE_TO?(x=+z[++v],y=+z[++v],a.push(l,e[0]*x+e[1]*y+e[3],d[0]*x+d[1]*y+d[3])):l===b.STROKE_TEXT||l===b.FILL_TEXT?(j=z[++v],x=+z[++v],y=+z[++v],n=+z[++v],g=+z[++v],a.push(l,j,e[0]*x+e[1]*y+e[3],d[0]*x+d[1]*y+d[3],e[0]*n+e[1]*g+e[3],d[0]*
n+d[1]*g+d[3])):l===b.BEZIER_CURVE_TO?(j=+z[++v],n=+z[++v],g=+z[++v],w=+z[++v],x=+z[++v],y=+z[++v],a.push(l,e[0]*j+e[1]*n+e[3],d[0]*j+d[1]*n+d[3],e[0]*g+e[1]*w+e[3],d[0]*g+d[1]*w+d[3],e[0]*x+e[1]*y+e[3],d[0]*x+d[1]*y+d[3])):l===b.SET?a.push(l,z[++v],z[++v]):l===b.DRAW_IMAGE?a.push(l,z[++v],z[++v],z[++v],z[++v],z[++v],z[++v],z[++v],z[++v],z[++v]):h[l]?(l===b.CLOSE_PATH&&f&&a.push(l),a.push(l)):c('Invalid opcode "'+l+'" found in IDL')},concat:function(d){var b=new n,e;for(e in this)b[e]=this[e];b.data=
this.data.concat(d.data.slice(4));b.pb=this.pb.concat(a);return b},append:function(a){this.data=this.data.concat(a.data.slice(4));return this},clone:function(){var d=new n,b;for(b in this)d[b]=this[b];d.data=this.data.concat(a);d.pb=this.pb.concat(a);return d}});(function(){for(var a=-1,d=e.length,b,c;++a<d;)b=e[a],c=b[0],b=b[2],n.attributeToIdentifier[c]=b,n.identifierToAttribute[b]=c})()})();ovi.provide("nokia.maps.gfx.Graphics");
(function(){var h=ovi.type,g=1/(180/Math.PI),h=ovi.type,f=nokia.maps.gfx,c=nokia.maps.util,a=f.Color.parseCss,j=f.IDL,b=j.opcodes,e=j.attributeToIdentifier;nokia.maps.gfx.Graphics=new ovi.Class({initialize:function(a){if(a instanceof j)this.e=a},beginImage:function(a,d,e){(this.e=new j).push(b.BEGIN_2D_IMAGE,a,d,""+e);return this},getIDL:function(){return this.e},setIDL:function(a){this.e=a instanceof j?a:c.c("idl must be an instance of nokia.maps.gfx.IDL");return this},getWidth:function(){return this.e.width},
getHeight:function(){return this.e.height},getMatrix:function(){return this.e.matrix},getDescription:function(){return this.e.description},save:function(){this.e&&(this.e.push(b.SAVE),this.e.saveState());return this},restore:function(){this.e&&(this.e.push(b.RESTORE),this.e.restoreState());return this},set:function(c,d){var j=this.e;if(c==="width"||c==="height"){if((d=+d)<0)d=0;j[c]=d;this.beginImage(j.width,j.height,j.description)}else if(c==="description")j.data[3]=j.description=d;else{c==="fillStyle"&&
(c="fillColor");c==="strokeStyle"&&(c="strokeColor");if((c==="fillColor"||c==="strokeColor")&&h(d)==="string")d=a(d);j[c]=d;e[c]&&j.data.push(b.SET,e[c],d)}return this},fill:function(){this.e.data.push(b.FILL);return this},stroke:function(){this.e.data.push(b.STROKE);return this},scale:function(a,d){this.e.matrix=this.e.matrix.scale(a,d,1);return this},rotate:function(a){this.e.matrix=this.e.matrix.rotateZ(a*g);return this},translate:function(a,d){this.e.matrix=this.e.matrix.translate(a,d,0);return this},
drawRect:function(a,d,e,c,m,p){var j=this.e,f,g,m=+m||0,p=+p||m;m===0&&p===0?j.push(b.BEGIN_PATH,b.MOVE_TO,a,d,b.LINE_TO,f=a+e,d,b.LINE_TO,f,g=d+c,b.LINE_TO,a,g,b.CLOSE_PATH):(f=0.5522847498*m,g=0.5522847498*p,e=a+e,c=d+c,j.push(b.BEGIN_PATH,b.MOVE_TO,a+m,d,b.LINE_TO,e-m,d,b.BEZIER_CURVE_TO,e-m+f,d,e,d+p-g,e,d+p,b.LINE_TO,e,c-p,b.BEZIER_CURVE_TO,e,c-p+g,e-m+f,c,e-m,c,b.LINE_TO,a+m,c,b.BEZIER_CURVE_TO,a+f,c,a,c-p+g,a,c-p,b.LINE_TO,a,d+p,b.BEZIER_CURVE_TO,a,d+p-g,a+f,d,a+m,d,b.CLOSE_PATH));return this},
drawEllipse:function(a,d,e,c){var m=this.e,p=a,j=a+e,f=d,g=d+c;e/=2;var h=c/2,w=0.5522847498*e,c=0.5522847498*h;a+=e;d+=h;e=a-w;w=a+w;h=d-c;c=d+c;m.push(b.BEGIN_PATH,b.MOVE_TO,a,g,b.BEZIER_CURVE_TO,w,g,j,c,j,d,b.BEZIER_CURVE_TO,j,h,w,f,a,f,b.BEZIER_CURVE_TO,e,f,p,h,p,d,b.BEZIER_CURVE_TO,p,c,e,g,a,g,b.CLOSE_PATH)},beginPath:function(){this.e.push(b.BEGIN_PATH);return this},moveTo:function(a,d){this.e.push(b.MOVE_TO,a,d);return this},closePath:function(){this.e.push(b.CLOSE_PATH);return this},lineTo:function(a,
d){this.e.push(b.LINE_TO,a,d);return this},polylineTo:function(a){for(var d=a.length,e=0,c=[];e<d;)c.push(b.LINE_TO,a[e++],a[e++]);this.e.push.apply(this.e,c);return this},quadraticCurveTo:function(a,d,b,e){return this.bezierCurveTo(a,d,a,d,b,e)},bezierCurveTo:function(a,d,e,c,m,p){this.e.push(b.BEZIER_CURVE_TO,a,d,e,c,m,p);return this},fillText:function(a,d,e,c,m){var p=this.e,c=h(c)==="number"?c:d+1,m=h(m)==="number"?m:e;p.push(b.FILL_TEXT,a,d,e,c,m);return this},strokeText:function(a,d,e,c,m){var p=
this.e,c=h(c)==="number"?c:d+1,m=h(m)==="number"?m:e;p.push(b.STROKE_TEXT,a,d,e,c,m);return this}})})();ovi.provide("nokia.maps.gfx.SvgParser");
(function(){function h(a){for(var a=a.replace(/[\,]/g," ").replace(/\s+/g," ").replace(/([0-9])(\-|\+)([0-9])/g,"$1 $2$3").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" "),d=0,b=a.length;d<b;d++)a[d]=+a[d];return a}function g(a){a=b.FontHelper.ph(a);return+a.substr(0,a.length-2)}function f(a,d){var b=a.getAttribute(d);return b?g(b):0}function c(a,d,b){for(;a&&a.nodeType===1;){if(a.getAttribute(d))return a.getAttribute(d);a=a.parentNode}return b}var a=Math.PI,j=nokia.maps,b=j.util,e=b.Matrix3D,l=
b.FontHelper.toString,d=nokia.maps.gfx,n=d.Graphics,k=d.Color.parseCss,m=d.IDL.opcodes,d=document.documentElement,p=j.dom.getStyle(d,"fontFamily"),r=j.dom.getStyle(d,"fontSize");nokia.maps.gfx.SvgParser=new ovi.Class({svg:function(a){var d=this.H,b=d&&d.getIDL(),c=b?d.getWidth():f(a,"width"),k=b?d.getHeight():f(a,"height"),l=a.getAttribute("viewBox"),m=l?l.split(" "):[0,0,c,k],l=c/m[2],p=k/m[3],j=-m[0]*l,m=-m[1]*p;b||d.beginImage(c+0,k+0);d.getIDL().matrix=d.getIDL().matrix.concat(new e([[l,0,0,j],
[0,p,0,m],[0,0,1,0]]));this.Lh(a)},rect:function(a){var d=f(a,"x"),b=f(a,"y"),e=f(a,"width"),c=f(a,"height"),k=f(a,"rx"),l=f(a,"ry")||k;this.H.drawRect(d,b,e,c,k,l);this.Ca(a,!0)},circle:function(a){var d=f(a,"cx"),b=f(a,"cy"),e=f(a,"r");this.H.drawEllipse(d-e,b-e,2*e,2*e);this.Ca(a,!0)},ellipse:function(a){var d=f(a,"cx"),b=f(a,"cy"),e=f(a,"rx"),c=f(a,"ry");this.H.drawEllipse(d-e,b-c,2*e,2*c);this.Ca(a,!0)},line:function(a){var d=this.H,b=f(a,"x1"),e=f(a,"y1"),c=f(a,"x2"),k=f(a,"y2");d.beginPath();
d.moveTo(b,e);d.lineTo(c,k);this.Ca(a,!0)},polyline:function(a){var d=this.H,b=h(a.getAttribute("points")),e=b.length,c=2;d.beginPath();for(d.moveTo(b[0],b[1]);c<e;c+=2)d.lineTo(b[c],b[c+1]);this.Ca(a,!0)},polygon:function(a){var d=this.H,b=h(a.getAttribute("points")),e=b.length,c=2;d.beginPath();for(d.moveTo(b[0],b[1]);c<e;c+=2)d.lineTo(b[c],b[c+1]);d.closePath();this.Ca(a,!0)},path:function(a){var d=this.H,b=d.getIDL(),e;e=a.getAttribute("d").replace(/[\,]/g," ").replace(/\s+/g," ").replace(/([0-9])\-/g,
"$1 -").replace(/([0-9])\+/g,"$1 ").replace(/([a-zA-Z])([a-zA-Z])/g,"$1 $2").replace(/([a-df-zA-DF-Z])([0-9]|\.|\-|\+)/g,"$1 $2").replace(/([0-9])([a-df-zA-DF-Z])/g,"$1 $2").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" ");e=e.length===1&&e[0]===""?[]:e;var c=this.Ca(a,!1),a=c&1;c&=2;var k=0,l=0,p=-1,j,f,n,g,h,r,G,A,C,V,P,Z;for(b.push(m.BEGIN_PATH);;){if(!C){A=e[++p];if(!A)break;C=A.toLowerCase();A=A.toUpperCase()===A}V=C;if(C==="m")P=k=j=+e[++p]+(A?0:k),Z=l=f=+e[++p]+(A?0:l),b.push(m.MOVE_TO,j,
f),C=(G=+e[p+1])===G?"l":null;else if(C==="l")k=j=+e[++p]+(A?0:k),l=f=+e[++p]+(A?0:l),b.push(m.LINE_TO,j,f),C=(G=+e[p+1])===G?C:null;else if(C==="h")k=j=+e[++p]+(A?0:k),f=l,b.push(m.LINE_TO,j,f),C=(G=+e[p+1])===G?C:null;else if(C==="v")j=k,l=f=+e[++p]+(A?0:l),b.push(m.LINE_TO,j,f),C=(G=+e[p+1])===G?C:null;else if(C==="z")b.push(m.CLOSE_PATH),C=null,k=P,l=Z;else if(C==="c"||C==="q")n=+e[++p]+(A?0:k),g=+e[++p]+(A?0:l),C==="q"?(h=n,r=g):(h=+e[++p]+(A?0:k),r=+e[++p]+(A?0:l)),k=j=+e[++p]+(A?0:k),l=f=+e[++p]+
(A?0:l),b.push(m.BEZIER_CURVE_TO,n,g,h,r,j,f),C=(G=+e[p+1])===G?C:null;else if(C==="s"||C==="t")n==="c"||n==="q"||n==="s"||n==="t"?(h=k-h,r=l-r,n=k+=h,g=l+=r):g=n=k,C==="q"?(h=n,r=g):(h=+e[++p]+(A?0:k),r=+e[++p]+(A?0:l)),k=j=+e[++p]+(A?0:k),l=f=+e[++p]+(A?0:l),b.push(m.BEZIER_CURVE_TO,n,g,h,r,j,f),C=(G=+e[p+1])===G?C:null;else{ovi.warn("SvgParser hit unknown command '"+C+"' at path element!");break}n=V}a&&d.stroke();c&&d.fill()},text:function(a){var d=this.H;d.getIDL();var b=this.Ca(a,!1),e=c(a,"font",
null),k,e=e?this.um(e):{};e.style=c(a,"font-style",null)||e.style;e.variant=c(a,"font-variant",null)||e.variant;e.weight=c(a,"font-weight",null)||e.weight;e.size=g(c(a,"font-size",null)||e.size||r)+"px";e.family=c(a,"font-family",null)||e.family||p;d.set("font",l(e));d.set("textAlign",c(a,"text-anchor","start").replace("middle","center"));if(b&&(k=a.textContent||a.text))e=f(a,"x"),a=f(a,"y"),b&1&&d.strokeText(k,e,a),b&2&&d.fillText(k,e,a)},image:function(){},linearGradient:function(){},radialGradient:function(){},
use:function(){},g:function(a){this.Lh(a)},um:function(a){var d=b.FontHelper.parse;this.Td||(this.Td={});var e=this.Td[a];e||(e=this.Td[a]=d(a));return e},se:function(a,d){var e,c=ovi.type(a),k;if(c==="string")e=(k=nokia.maps.util.wm(a)).documentElement;else if(c==="document"&&a.documentElement)e=(k=a).documentElement;ovi.type(e)!=="element"&&b.c("svgMarkup needs to be a valid SVG string or XML document!");this.H=d||new n;this.Mh(e);return k},parseSvg:function(a){this.se(a);return this.H.getIDL()},
parseSvgInfo:function(a){return(a=this.se(a))?{width:this.H.getWidth(),height:this.H.getHeight(),document:a}:null},parseSvgToGraphics:function(a,d){this.se(a,d);return this.H},Mh:function(a){var d=this.H,b,e=this[a.nodeName];this.yn(a);d.save();(b=a.getAttribute("transform"))&&this.yk(b);e&&e.call(this,a);d.restore()},Lh:function(a){for(a=a.firstChild;a;a=a.nextSibling)a.nodeType===1&&this.Mh(a)},yn:function(a){var d=a.getAttribute("style"),b,e=/([^:\s*]+)\s*:\s*([^;]+?)\s*(;|$)/g;if(d){for(;b=e.exec(d);)a.setAttribute(b[1],
b[2]);a.removeAttribute("style")}},yk:function(d){for(var b,c=/([a-zA-Z]*)\s*\(([^\)]*)\)/g,k,l=this.H.getIDL(),m=l.matrix;b=c.exec(d);)switch(k=h(b[2]),b[1].toLowerCase()){case "matrix":m=m.concat(new e([[k[0],k[2],0,k[4]],[k[1],k[3],0,k[5]],[0,0,1,0]]));break;case "translate":m=m.translate(k[0],k.length>1?k[1]:0,0);break;case "scale":m=m.scale(k[0],k.length>1?k[1]:k[0],0);break;case "rotate":k.length>1&&(m=m.translate(k[1],k[2],0));m=m.rotateZ(-(k[0]/180)*a);k.length>1&&(m=m.translate(-k[1],-k[2],
0));break;case "skewx":m=m.skewX(k[0]);break;case "skewy":m=m.skewY(k[0])}l.matrix=m},Ca:function(a,d){var b=this.H,e=b.getIDL().matrix,l=0,m=c(a,"fill","#000"),p=c(a,"stroke","none");b.set("opacity",+c(a,"opacity","1"));m!=="none"&&(l|=2,b.set("fillColor",k(m,+c(a,"fill-opacity","1"))),d&&b.fill());if(p!=="none"){l|=1;var j,e=e.getScale();b.set("strokeColor",k(p,+c(a,"stroke-opacity","1")));(j=c(a,"stroke-width",0))&&b.set("lineWidth",g(j)*0.5*(e.x+e.y));b.set("lineCap",c(a,"stroke-linecap","flat").replace("flat",
"butt"));b.set("lineJoin",c(a,"stroke-linejoin","miter"));b.set("miterLimit",+c(a,"stroke-miterlimit",4));d&&b.stroke()}return l}})})();ovi.provide("nokia.maps.geo.Strip");
(function(h){var g=h.geo.Coordinate,f=h.util,c=f.Coroutine,a=f.c,j=h.geo.Strip=new ovi.Class({initialize:function(a,e){this.internalArray=[];this.addAll(a,0,e)},destroy:function(){this.bb&&c.kill(this.bb)},internalArray:null,bb:null,Statics:{fromObject:function(a){if(a instanceof j)return a;if(ovi.type(a)!=="array")return new j;return new j(a.length&&ovi.type(a[0])==="string"?j.convertToArray(a.slice(1),a[0]):j.convertToArray(a,"auto"),"values lat lng alt")},convertToArray:function(b,e){if(!b)return[];
if(b.length===0||e==="unsafe values lat lng alt")return b;if(b instanceof j)return b.asArray();var c=e?e.split(" "):["auto"],d=[],f=!1,k,m,p=c.length,g=0;c[0]==="unsafe"&&(f=!0,c.splice(0,1),p--);for(p>4&&a("convertToArray: i > 4");p--;)k=c[p],(k=this.nn[k])?(c[p]=k[0],g+=k[1]):a("convertToArray: no member found");(g!==100||!c.length)&&a("convertToArray: counter does not match 100");(m=this.Gd[c[0]])?m.call(this,f,b,d,c.slice(1)):a("convertToArray: function expected");return d},nn:{lat:["latitude",
1],lng:["longitude",2],alt:["altitude",0],unsafe:["unsafe",0],coords:["coords",100],auto:["auto",100],arrays:["arrays",97],values:["values",97]},Nk:{latitude:0,longitude:1,altitude:2},Gd:{auto:function(a,e,c){f.isNumber(e[0])?j.Gd.values(a,e,c,["latitude","longitude"]):j.Gd.coords(a,e,c)},coords:function(b,e,c){var d=e.length,j,k;for(j=0;j<d;j++)b?k=e[j]:(k=g.fromObject(e[j]))||a("coords: expected geo.Coordinate"),c.splice(c.length,0,k.latitude,k.longitude,k.altitude)},values:function(a,e,c,d){j.tg(!1,
a,e,c,d)},arrays:function(a,e,c,d){j.tg(!0,a,e,c,d)}},tg:function(b,e,c,d,f){var k=b?c[0].length:c.length,m=f.length,p=b?c.length:0,h,q;if(b)for(;p--;)c[p].length!==k&&a("_convertValues index out of bound");else k%m&&a("_convertValues members length is incorrect"),k/=m;for(p=0;p<k;p++){q=[p*3,0,void 0,void 0,void 0];for(h=0;h<m;h++)q[j.Nk[f[h]]+2]=b?c[h][p]:c[p*m+h];e||g.isValid.apply(this,q.slice(2))?d.splice.apply(d,q):a("_convertValues: expected coords")}}},add:function(b,e){var c=this.getLength(),
b=g.fromObject(b),e=~~(e===0||e>0?e:c);e>c&&a("add: index out of bound");b&&this.wa(this,e,1,this.internalArray.splice(e*3,0,b.latitude,b.longitude,b.altitude))},addAll:function(b,e,c){var d=this.getLength(),e=~~(e===0||e>0?e:d);e>d?a("addAll: index out of bound"):this.splice(e,0,b,c)},addAllAsync:function(b,e,l,d){var j=this,k=j.getLength(),m,p=b[0]instanceof g?1:l?l.match("alt")?3:2:2,e=~~(e===0||e>0?e:k);e>k?a("addAll: index out of bound"):m=c.create("nokia.maps.geo.Strip#addAllAsyncCo",function(a){for(var d,
b,e=a.idx,k=a.coords,l=a.multiplier;(d=k.length)>0;)if(d=k.splice(0,(b=300*l)<d?b:d),j.splice(e,0,d,a.mode),e=a.idx=e+300,c.shallYield())return c.yield();a.callback&&a.callback()},"coords","idx","mode","multiplier","callback");j.bb=m(b,e,l,p,d);j.bb.onTerminated=function(){j.bb=null};j.bb.run()},set:function(b,e){b=+b;(b<0||b>this.getLength()||isNaN(b))&&a("geo.Strip#set: index out of bounds");(e=g.fromObject(e))&&this.wa(this,b=~~b,1,this.internalArray.splice(b*3,3,e.latitude,e.longitude,e.altitude))},
remove:function(b){b=+b;b<0||b>=this.getLength()||isNaN(b)?a("geo.Strip#remove: index out of bound"):this.wa(this,b=~~b,0,this.internalArray.splice(b*3,3))},splice:function(b,e,c,d){(b=+b)>=0&&b<=this.getLength()&&(e=+e)>=0||a("splice: arguments out of bound, idx="+b+", remove="+e);c=j.convertToArray(c,d);if(e||c.length)this.wa(this,b=~~b,c.length/3,this.internalArray.splice.apply(this.internalArray,[b*3,~~e*3].concat(c)))},get:function(b){var e=this.internalArray;!(b>=0&&b<e.length/3)&&a("get: index out of bound");
b=~~b*3;return new g(e[b],e[b+1],e[b+2],1)},getLatLng:function(b,e){var c=[],d,j=0;d=this.getLength();var k,b=+b;k=e<0?d+e:e?e+b>d?d:e+b:b+1;(isNaN(b)||b<0||(k=~~k)<b)&&a("getLatLng: index and count combination out of bounds");for(d=~~b;d<k;d++)c[j++]=this.internalArray[d*3],c[j++]=this.internalArray[d*3+1];return c},getLength:function(){return this.internalArray.length/3>>>0},asArray:function(){return[].concat(this.internalArray)},wa:function(){var a=this.na,e;if(a)for(e=0;e in a;)a[e++].apply(a[e++],
arguments)},addObserver:function(a,e){typeof a!=="function"&&f.c("addObserver: callback is not a function");var c=this.na||(this.na=[]),d=c.length;c[d++]=a;e&&(c[d]=e);c.length=++d},removeObserver:function(a,e){var c,d,j=0;if(c=this.na)for(d=c.length;j<d;)c[j]===a&&c[j+1]===e&&(c.splice(j,2),d===2&&delete this.na),j+=2;return this}})})(nokia.maps);ovi.provide("nokia.maps.util._packaging.base");ovi.provide("nokia.maps.dom.Event");
(function(h){if(!nokia.maps.util.getConstructor(nokia.maps.dom.Event)){var g=!g,f=!g,c=nokia.maps.util.now,a=nokia.maps.util.Na,j=h.Event=function(a){if(a)for(var e in a)this[e]=a[e];if(!this.timeStamp)this.timeStamp=c()};ovi.extend(j.prototype,{CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,bubbles:g,canBubble:g,canSicker:g,cancelable:g,defaultPrevented:f,PROPAGATION_OK:0,PROPAGATION_STOP:1,PROPAGATION_STOP_IMMEDIATE:2,propagation:0,stopPropagation:function(){var a=this.nativeEvent;if(this.propagation===
0&&(this.propagation=1,a))try{a.stopPropagation?a.stopPropagation():a.cancelBubble=g}catch(e){}return this},cancel:function(){return this.stopImmediatePropagation().preventDefault()},stopImmediatePropagation:function(){var a=this.nativeEvent;if(this.propagation!==2&&(this.propagation=2,a))try{a.stopImmediatePropagation?a.stopImmediatePropagation():a.cancelBubble=g}catch(e){}return this},preventDefault:function(){var a=this.nativeEvent;if(!this.defaultPrevented&&(this.defaultPrevented=g,a))try{a.preventDefault?
a.preventDefault():a.returnValue=f}catch(e){}return this},DOM_INPUT_METHOD_UNKNOWN:0,DOM_INPUT_METHOD_KEYBOARD:1,DOM_INPUT_METHOD_PASTE:2,DOM_INPUT_METHOD_DROP:3,DOM_INPUT_METHOD_IME:4,DOM_INPUT_METHOD_OPTION:5,DOM_INPUT_METHOD_HANDWRITING:6,DOM_INPUT_METHOD_VOICE:7,DOM_INPUT_METHOD_MULTIMODAL:8,DOM_INPUT_METHOD_SCRIPT:9,DOM_KEY_LOCATION_STANDARD:0,DOM_KEY_LOCATION_LEFT:1,DOM_KEY_LOCATION_RIGHT:2,DOM_KEY_LOCATION_NUMPAD:3,DOM_KEY_LOCATION_MOBILE:4,DOM_KEY_LOCATION_JOYSTICK:5,getModifierState:function(){a("NOT IMPLEMENTED!")},
DOM_DELTA_PIXEL:0,DOM_DELTA_LINE:1,DOM_DELTA_PAGE:2,deltaMode:0,preventUnload:function(a){if(this.type==="beforeunload")this.nativeEvent.returnValue=a;return this},clone:function(){return new j(this)}})}})(nokia.maps.dom);ovi.provide("nokia.maps.gfx.GraphicsImage");
(function(){var h=Array.prototype.slice,g=nokia.maps.gfx,f=nokia.maps.util,c=ovi.type,a=g.IDL,j=g.Painter,b=g.Image,e=g.Graphics,l=new g.SvgParser,d=nokia.maps.util.c,n=nokia.maps.gfx.GraphicsImage=new ovi.Class({Extends:nokia.maps.gfx.Image,initialize:function(k,l,p,n){var g=h.call(arguments,0),u=k,s=k;this.d=b.d++;if(c(k)!=="function")s instanceof e&&(u=s.getIDL()),u instanceof a?(this.e=u,this.width=u.width,this.height=u.height,this.state=1,k=f.u):d("GraphicsImage: Illegal render function or IDL!");
this.D=p||document;this.Mb=k;this.$k=l||this;this.opacity=1;g.splice(0,4,null);this.Ak=g;this.Eh=n instanceof j?n:new j.defaultPainter},isGraphics:1,getDocument:function(){return this.D},getIDL:function(){return this.e},prepare:function(a,d){var b,l;if(!this.state)b=new e,l=this.Ak,l[0]=b,this.Mb.apply(this.$k,l),this.e=b.getIDL(),this.width=this.e.width,this.height=this.e.height,this.state=1;if(c(a)==="function")this.Sb||(this.Sb=[]),l=[].concat(arguments),l.splice(0,2,this),a.apply(d||this,l)},
createElement:function(a){this.state||this.prepare();return this.Eh.createElement(this.e,this.D,typeof a==="number"?a:this.opacity)},setOpacity:function(a,d){this.Eh.setOpacity(a,d);return this},clone:function(a){var d,b;d=new n(this.Mb);for(b in this)d[b]=this[b];if(a)d.D=a;return d}});b.fromObjectListener.unshift(function(d){if(d instanceof n)return d;if(d instanceof a)return new n(a);if(typeof d==="string"&&d.indexOf("<svg")>=0)return new n(l.parseSvg(d))})})();ovi.provide("nokia.maps.geo.BoundingBox");
(function(h){function g(a,d){var b=a+d/2;b-=b>180?360:0;return b}function f(a,d){var b=d-a;b+=b<0?360:0;return b}var c=Math,a=c.min,j=c.max,b=c.abs,e=h.geo,l=h.util.c,d=e.Coordinate,n=e.BoundingBox=function(a,b,e){var a=d.fromObject(a),c;if(!a||b&&!(c=d.fromObject(b)))l(a?"bottomRight":"topLeft");this.topLeft=a;c?e||a.latitude<c.latitude&&l("BoundingBox top latitude < bottom latitude"):c=a;if((this.bottomRight=c)&&a.longitude>c.longitude)this.isCDB=!0};ovi.extend(n.prototype,{isCDB:!1,Hn:void 0,Fl:void 0,
Ik:void 0,contains:function(a){var b,e;a instanceof d&&(a=new n(a,a));a=this.merge(a);e=a.getCenter();b=this.getCenter();return e.latitude==b.latitude&&e.longitude==b.longitude&&this.getHeight()==a.getHeight()&&this.getWidth()==a.getWidth()},intersects:function(a){var d=this.topLeft,b=this.bottomRight,e=a.topLeft,a=a.bottomRight,c=d.longitude<=b.longitude,l=e.longitude<=a.longitude,j=d.longitude<a.longitude,f=e.longitude<b.longitude;return b.latitude<=e.latitude&&a.latitude<=d.latitude&&(!c&&(!l||
j||f)||!l&&(j||f)||j&&f)},isEmpty:function(){return this.topLeft.longitude===this.bottomRight.longitude&&this.topLeft.latitude===this.bottomRight.latitude},getCenter:function(){var a=this.Ik;if(a==void 0)var a=this.topLeft.longitude,b=this.bottomRight.latitude,a=new d(b+(this.topLeft.latitude-b)/2,g(a,f(a,this.bottomRight.longitude)));return a},getWidth:function(){var a=this.Hn;a==void 0&&(a=f(this.topLeft.longitude,this.bottomRight.longitude));return a},getHeight:function(){var a=this.Fl;a==void 0&&
(a=this.topLeft.latitude-this.bottomRight.latitude);return a},resizeToCenter:function(a){a instanceof d||l("Parameter center must be an instance of nokia.maps.geo.Coordinate");var b=this.topLeft.longitude,e=this.topLeft.latitude,c=this.bottomRight.longitude,j=this.bottomRight.latitude,h=g(b,f(b,c)),s=a.latitude-j-(e-j)/2,w=a.longitude-h,w=w>180||w<-180?-(h+a.longitude):w,a=b+(w<0?2*w:0);c+=w>0?2*w:0;c=c>180?c-360:c;e=s>0?e+2*s:e;e>=90&&(e=90);j=s<0?j+2*s:j;j<=-90&&(j=-90);return new n(new d(e,a<-180?
360+a:a),new d(j,c))},merge:function(a){a&&a.push?a.push(this):a=[this,a];return n.merge(a)}});ovi.extend(n,{fromObject:function(a,b){var e;if(a&&(e=a.length)!==void 0){if(e===2&&a[0]instanceof d&&a[1]instanceof d)return new n(a[0],a[1],b);if(e===4)return new n(new d(a[0],a[1],void 0,b),new d(a[2],a[3],void 0,b),b)}return a instanceof n?a:null},coverAll:function(a){(!a||a.length===void 0)&&l("no argument was given, array is expected");!a.length&&l("empty array was given");for(var d=a[0],b=d.latitude,
e=d.longitude,c=[b,e,b,e],j=a.length;--j;)d=a[j],c=n.oc(c,[b=d.latitude,e=d.longitude,b,e]);return n.fromObject(c)},fromPath:function(a,d){!a&&l("no argument was given, geo strip is expected");!(a instanceof e.Strip)&&l("geo strip is expected");var b=null,c,j,f=a.getLength(),g;if(f)if(f==1)c=a.get(0),b=[c.latitude,c.longitude,c.latitude,c.longitude];else if(f==2)c=a.getLatLng(0),c.push(c[0]),c.push(c[1]),j=a.getLatLng(1),j.push(j[0]),j.push(j[1]),b=n.fromObject(n.oc(c,j),d);else{c=a.getLatLng(0);
j=a.getLatLng(1);n.Lg(c=[c[0],c[1],j[0],j[1]]);b=c;for(g=2;g<f;g++)c=a.getLatLng(g-1),j=a.getLatLng(g),n.Lg(c=[c[0],c[1],j[0],j[1]]),b=n.oc(b,c)}return n.fromObject(b,d)},merge:function(a){(!a||!a.length||!(a[0]instanceof n))&&l("array of bounding boxes is expected");for(var d=a[0],b=d.topLeft,e=d.bottomRight,c=[b.latitude,b.longitude,e.latitude,e.longitude],j=a.length;--j;)(d=a[j])instanceof n?c=n.oc(c,[(b=d.topLeft).latitude,b.longitude,(e=d.bottomRight).latitude,e.longitude]):l("it is possible to merge bounding boxes only");
return n.fromObject(c)},oc:function(d,b){var e,c,l=d[1],n=d[3],h=b[1],w=b[3],x,y,v,z,B;e=a(d[2],b[2]);c=j(d[0],b[0]);x=f(l,n);y=g(l,x);v=f(h,w);B=g(h,v)-y;B+=B-1.0E-6<0?360:0;B-1.0E-6<180?(y=l,z=w):(B=360-B,y=h,z=n);B=B+x/2+v/2;B+5.0E-7>=360?(y=-180,z=180):B-5.0E-7<x?(y=l,z=n):B-5.0E-7<v&&(y=h,z=w);return[c,y,e,z]},Lg:function(a){var d=a[1],e=a[3],c=a[0],l=a[2];if(d>e&&e-d>180||d<e&&d-e<-180||e<d&&b(e-d)<180)a[1]=e,a[3]=d;c<l&&(a[0]=l,a[2]=c)}})})(nokia.maps);ovi.provide("nokia.maps.geo.QuadTree");
(function(h){function g(a,e){if(Array.prototype.indexOf){var c=e.length,d;if(c)for(;c--;)a.indexOf(d=e[c])!==-1||a.push(d)}else{var j=a.length,c=e.length,k={};if(c){for(;j--;)k[a[j].id]=1;for(;c--;)(d=e[c]).id in k||a.push(d)}}}var f=h.geo,c=h.util,a=f.BoundingBox,h=c.QuadTree,j=h.Entry,h=f.QuadTree=new ovi.Class({initialize:function(a){this.A=new c.QuadTree(a,180,90,0,0);this.zc=ovi.Array()},isCDB:!1,getBoundingBox:function(){var b;if(!this.T&&!this.isCDB&&(b=this.A.getExtremes()))this.T=new a([-b["4"],
b["7"]],[-b["6"],b["5"]]);return this.T||null},insertBoundingBox:function(a){var e=a.topLeft,c=a.bottomRight,d=e.longitude,f=c.longitude,k;this.T=null;if(a.isCDB)this.zc.push(k=new j(null,d,-e.latitude,f+360,-c.latitude)),this.isCDB=!0;return k||this.A.insertSorted(d,-e.latitude,f,-c.latitude)},insertCoordinate:function(a){var e=a.longitude,a=-a.latitude;this.T=null;return this.A.insertSorted(e,a,e,a)},insertLine:function(a,e,c,d){var f,k;this.T=null;e<d?f=e:(f=d,d=e);a<c?(e=-c,a=-a):(e=-a,a=-c);
if(d-f>180)this.zc.push(k=new j(null,d,e,f+360,a)),this.isCDB=!0;return k||this.A.insertSorted(f,e,d,a)},insertLineAlt:function(a,e,c,d,j){return this.insertLine(a,e,d,j)},remove:function(a){var e;if(a.fa)this.A.remove(a);else if((a=(e=this.zc).indexOf(a))>=0)e.splice(a,1),this.isCDB=e.length>0;this.T=null},Yd:function(a,e,c,d,j){for(var k=this.zc,m=k.length,f,g=[],h=a+360,u=c+360;m--;)f=k[m],eMinX=f[7],eMinY=f[4],eMaxX=f[5],eMaxY=f[6],this.ah(f,a,e,c,d,j)?g.push(f):this.ah(f,h,e,u,d,j)&&g.push(f);
return g},ah:function(a,e,c,d,j,k){var m=a[7],f=a[4],g=a[5],a=a[6];return!(m>d||g<e||f>j||a<c)&&(k||m>=e&&g<=d&&f<=j&&a>=c)},intersectBoundingBox:function(a,e){var c=this.A,d=a.topLeft,j=a.bottomRight,k=-d.latitude,d=d.longitude,m=-j.latitude,j=j.longitude,f;a.isCDB?(f=c.intersect(-180,k,j,m,e),g(f,c.intersect(d,k,180,m,e)),g(f,this.Yd(j,k,d+360,m,e))):(f=c.intersect(d,k,j,m,e),g(f,this.Yd(d,k,j,m,e)));return f},intersectCoordinate:function(a){var e=-a.latitude,a=a.longitude,c=this.A.intersect(a,
e,a,e,1);g(c,this.Yd(a,e,a,e,1));return c}})})(nokia.maps);ovi.provide("nokia.maps.geo.Shape");
(function(h){function g(a,d){return a/d<0&&j(d-a)>180}var f=Math,c=f.min,a=f.max,j=f.abs,b=f.pow,e=f.sqrt,l=f.round,d=h.geo,n=h.util,k=n.Point,m=d.Coordinate,p=d.BoundingBox,r=n.clipping,q=n.Coroutine,u=[],s=!s;d.Shape=new ovi.Class({Extends:d.Strip,initialize:function(a,b){this.A=new d.QuadTree(+b||10);this._super(u);this.eb=!!a;this.mi=[];this.gb=0;this.addObserver(this.ul,this)},Statics:{gk:u,Ng:function(a,b){var e=0,c=a.arr,k,l,m,j,f,p,n,h,r=c.length;a.shape?(j=+c[a.i-2],h=+c[a.i-1]):(a.shape=
new d.Shape(a.closed),a.i=0,r>2&&(j=+c[a.i++],h=+c[a.i++],a.shape.internalArray.push(j,h,0)));l=a.shape;m=l.A;f=l.mi;for(k=l.internalArray;a.i<r;)if(p=+c[a.i++],n=+c[a.i++],k.push(p,n,0),(j=m.insertLine(j,h,p,n)).ab=f.length,f.push(j),l.gb+=g(n,h),j=p,h=n,!(++e&15)&&q.shallYield())return q.yield();if(l.closed&&c.length>=2)p=+c[0],n=+c[1],k.push(p,n,0),(j=m.insertLine(j,h,p,n)).ab=f.length,j.$closing=1,f.push(enty),l.gb+=g(n,h);if(b&&a.callback)return q.kill(b),a.callback.call(a.ctx,l);return l},fromLatLngArray:function(a,
d,b,e){var c;if(n.isFunction(b))return c=q.create("nokia.maps.geo.Shape#fromLatLngArrayCo",this.Ng,"arr","closed","callback","ctx"),this.Og=c(a,d,b,e||void 0),null;return this.Ng({arr:a,closed:d},null)}},destroy:function(){this.Og&&q.kill(this.Og);this._super()},getBoundingBox:function(){var a,d,b=this.T;if(!b)b=this.A.getBoundingBox()||p.fromPath(this),this.eb&&this.gb&&(a=this.get(0),d=this.get(this.getLength()-1),b=b.merge(p.coverAll([a,d]))),this.T=b;return this.T},tl:function(a){var d=this.internalArray;
this.internalArray=a.internalArray;this.wa(this,0,a.internalArray.length/3,d)},ul:function(d,b,e,k){var d=this.eb,l=this.A,m=this.mi,j=m.length,f=k.length/3,k=a(b-1,0),p;this.T=null;d&&j&&l.remove(m.splice(--j,1)[0]);if(f){j=c(b-1+f,j-1);for(p=k;p<=j;p++)l.remove(m[p]);f=[k,j-k+1]}else j>0&&b<=j&&b>0?(l.remove(m[k]),f=[k,1]):f=[k,0];k=a(b-1,0);j=c(b-1+e,this.getLength()-2);for(p=k;p<=j;p++)f.push(l.insertLineAlt.apply(l,this.internalArray.slice(p*3,p*3+6)));m.splice.apply(m,f);j=m.length;d&&j&&((m[j++]=
l.insertLine.apply(l,this.getLatLng(this.getLength()-1).concat(this.getLatLng(0)))).$closing=1);for(p=j;p--;)m[p].ab=p;this.gb=this.wg(this.internalArray,3)},xg:function(d,b,e){if(!this.eb)return!1;for(var k=b.length,l=1,m=0,j=b[0],f,p;l<k;l++)f=b[l],p=j.y+(f.y-j.y)*((d.x-j.x)/(f.x-j.x)),c(j.x,f.x)<=d.x&&a(j.x,f.x)>=d.x&&(e?p>d.y:p<d.y)&&m++,j=f;return!!(m%2)},wg:function(a,d){var b=this.eb?0:d,e=0,c=a.length,k=a[b?1:c-d+1],l;for(++b;b<c;b+=d)e+=g(l=a[b],k),k=l;return e},Il:function(a,d){return a.ab-
d.ab},Fm:function(a,d,b,e,c,l){var m=a.x,a=-a.y,j=d.x,d=-d.y,f,p,n,b=-b,l=-l;if(m>j){if(j>c||m<e)return;n=m;p=a;m=j;a=d;j=n;d=p;n=1}else if(m>c||j<e)return;if(a>d){if(d>b||a<l)return;f=1;a=-a;d=-d;p=l;l=-b;b=-p}else if(a>b||d<l)return;if(m<e){if((a+=(e-m)*(d-a)/(j-m))>b)return;m=e}if(a<l){if((m+=(l-a)*(j-m)/(d-a))>c)return;a=l}j>c&&(d=a+(c-m)*(d-a)/(j-m),j=c);d>b&&(j=m+(b-a)*(j-m)/(d-a),d=b);f&&(a=-a,d=-d);return n?[new k(j,-d),new k(m,-a)]:[new k(m,-a),new k(j,-d)]},Gc:function(a,d,b,e){function c(a,
d){l&&j(l-d)>180&&(d+=l<0?-360:360);l=d;return b.latLngToPixel(a,d+(e?e:0))}var k=[],l,m=a.length,f,p=0;for(f=0;f<m;f+=2)k[p++]=c(a[f],a[f+1]);d&&(k[p]=c(a[0],a[1]));return k},Zh:function(a,d){for(var b=[],e=Infinity,c=-1,k,b=0;b<a.length;b+=2)k=j(a[b+1]-d),k+=k>180?360-k:k,k<e&&(e=k,c=b);if(b>0)return b=a.splice(c,a.length-c),b.concat(a);return a},Ac:function(a,d,b,e,c){if(!a.length)return a;for(var k=[],l,m=a.length,j,f,p,n,g,h,q;m--;){h=a[m];n=h.length;g=0;for(j=1;j<n;j++)if(q=this.Fm(h[j-1],h[j],
d,b,e,c))f=q[0],p=q[1],g&&g.equals(f)?l.push(p):k.push(l=q),g=p}n=k.length;n>1&&k[0][0].equals(k[n-1][k[n-1].length-1])&&k[0].splice.apply(k[0],[0,1].concat(k.splice(n-1,1)[0]));return k},pk:function(a){var d=a.length,b,e=0,c,k,l,f=[],n;k=!1;for(b=0;b<d;b+=2)f[e++]=a[b],f[e++]=a[b+1],l=new m(a[b],a[b+1],void 0,s),c=a[b+2]!==void 0?new m(a[b+2],a[b+3],void 0,s):new m(a[0],a[1],void 0,s),l=p.coverAll([l,c]),!k&&j(a[b+1])!==180&&j(c.longitude)!==180&&l.contains(new m(l.topLeft.latitude,180,void 0,s))&&
(k=j(c.latitude-a[b]),l=j(c.longitude-a[b+1]),l+=l>180?-360:0,n=j(180-c.longitude),n+=n>180?-360:0,k/=j(l)/j(n),c=c.latitude+(c.latitude>a[b]?-k:k),k=a[b+1]>0?180:-180,f[e++]=c,f[e++]=k,f[e++]=c,f[e++]=-k,k=!0);return f.length?f:a},ol:function(a,d,b,e){var c=[],k=a.length,l,m,f,p,n,g,h=!1;for(l=0;l<k;l+=e)if(m=a[l],f=a[l+1],l==0||((g=j(n-f))>180?360-g:g)>b||j(p-m)>d)!h&&j(f)==180&&(c.push(m),c.push(f),c.push(m),c.push(-f),h=!0),c.push(m),c.push(f),p=m,n=f;return c},Ug:function(a){var d=[],c,m=a,j,
f;do{j=l((m.origx?m.origx:m.x)*100)/100;f=l((m.origy?m.origy:m.y)*100)/100;if(!c||e(b(c.x-j,2)+b(c.y-f,2))>0.01)c=new k(j,f),d.push(c);m=m.next}while(m&&m!=a);return d},clip:function(a,b,e,c,l,f,n){var h=this.eb,q=this.internalArray,T=b.topLeft,D=b.bottomRight,G=T.y,A=D.y,C=T.x,V=D.x,P=b.getCenter(),b=new k(V,G),Z=new k(C,A),b=[T,b,D,Z],Z=a.pixelToGeo(T),D=a.pixelToGeo(D),ga=a.pixelToGeo(P),Z=p.fromPath(new d.Strip([Z.latitude,Z.longitude,Z.latitude,ga.longitude,Z.latitude,D.longitude,D.latitude,
D.longitude,D.latitude,ga.longitude,D.latitude,Z.longitude],"unsafe values lat lng")),ga=!1,J=0,I,F=-2,D=[],L,J=[],ra,za,ua=0,na=0,W;I=[];var Q=[],R;if(e)e/=2,na=P.x,ua=P.y,J=a.xyToGeo(na-e,ua-e),I=a.xyToGeo(na+e,ua+e),ua=j(J.latitude-I.latitude),na=j(J.longitude-I.longitude);if(h){D=[[]];I=this.ol(q,ua,na,3);R=p.fromPath(new nokia.maps.geo.Strip(I,"unsafe values lat lng"),s);h&&(R=R.merge((new p(new m(I[I.length-2],I[I.length-1],void 0,s),void 0,s)).merge(new p(new m(I[0],I[1],void 0,s),void 0,s))));
(J=R.getWidth())<360&&R.topLeft.longitude==-180&&(R=new p(new m(R.topLeft.latitude,180,void 0,s),R.bottomRight,s));J<360&&R.bottomRight.longitude==180&&(R=new p(R.topLeft,new m(R.bottomRight.latitude,-180,void 0,s),s));J<360?f==0?L=Z:(f=R.getCenter().longitude,W=a.geoToPixel(R.topLeft),W.x-=n,W.y-=n,W=a.pixelToGeo(W),L=a.geoToPixel(R.bottomRight),L.x+=n,W.y+=n,L=a.pixelToGeo(L),L=p.fromPath(new d.Strip([W.latitude,W.longitude,W.latitude,f,W.latitude,L.longitude,L.latitude,L.longitude,L.latitude,f,
L.latitude,W.longitude],"unsafe values lat lng"),s)):L=R;h&&(I=this.Zh(this.pk(I),R.topLeft.longitude));D[0]=this.Gc(I,h,a);if(R.getWidth()==360&&this.wg(I,2)%2==1){D[0][1].x>D[0][D[0].length-1].x&&(D[0]=D[0].reverse());Q=[];J=D[0].length-1;for(e=0;e<J;e++)q=D[0][e],Q[e]=new k(q.x-2*a.w,q.y),Q[e+J]=new k(q.x-a.w,q.y),Q[e+2*J]=new k(q.x,q.y),Q[e+3*J]=new k(q.x+a.w,q.y),Q[e+4*J]=new k(q.x+2*a.w,q.y);D[0]=Q;W=a.latLngToPixel(c?90:-90,0);W.y=c?W.y-51:W.y+51;f=W.clone();W.x=D[0][D[0].length-1].x+1;f.x=
D[0][0].x-1;D[0].push(W,f)}ga=this.xg(T,D[0],c);Q=this.Ac(D,G,C,V,A);W=Q.length;J=D;R.getWidth()<360&&R.contains(new m(R.topLeft.latitude,180,void 0,s))&&(D=[],I=this.Zh(I,R.bottomRight.longitude),D[0]=this.Gc(I,h,a),ga=!!(ga^this.xg(T,D[0],c)),Q=this.Ac(D,G,C,V,A),W+=Q.length,J=J.concat(D));R.getWidth()<360&&!R.contains(new m(R.topLeft.latitude,180,void 0,s))&&L.contains(new m(R.topLeft.latitude,180,void 0,s))&&(D=R.getCenter().longitude>0?-360:360,L=this.Gc(I,h,a,D),D=[L],Q=this.Ac(D,G,C,V,A),W+=
Q.length,J.push(L))}else{n=this.A.intersectBoundingBox(Z,s).sort(this.Il);J=n.length;for(c=0;c<J;c++)P=n[c],T=P.ab,I=T*3,F+1!==T&&D.push(L=[ra=q[I],za=q[I+1]]),F=T,I=P.$closing?0:I+3,P=q[I],I=q[I+1],(!e||c===J-1||n[c+1].ab!==T+1||j(za-I)>na||j(ra-P)>ua)&&L.push(ra=P,za=I);if(this.gb){T=[];for(c=0;c<D.length;c++)if(L=D[c],J=L.length){q=[];for(e=0;e<J;e+=2)e==0||e>0&&!g(L[e+1],L[e-1])?q.push(L[e],L[e+1]):(q.push(L[e],L[e+1]),T.push(q),q=[],L[e-1]+=L[e-1]<0?360:-360,q.push(L[e-2],L[e-1],L[e],L[e+1]));
T.push(q)}D=T}I=[];c=q=0;for(J=D.length;c<J;c++)L=D[c],L.length&&(I[q++]=this.Gc(L,h,a));J=f?this.Ac(I,G,C,V,A):I}if(!h||!W)if(h)if(ga){if(l)return J=[b],J.fullfilled=1,J;return u}else return[];else return J;if(Z.contains(R))return J;D=[];for(c=J.length;c--;)if(a=J[c],l=r.prepareList(a),a=r.prepareList(b),a=r.clip(a,l)){L=this.Ug(a);for(D.push(L);a.nextPoly;)a=a.nextPoly,L=this.Ug(a),D.push(L)}return D}})})(nokia.maps);ovi.provide("nokia.maps.dom._packaging.base");ovi.provide("nokia.maps.gfx._packaging.base");
ovi.provide("nokia.maps.geo._packaging.base");var Cb=nokia.maps,Db=Cb.config.params.language||"auto";delete Cb.config.params;Cb.loadPath=Cb.config.baseUrl;Cb.Config.setDefaults(nokia.maps.config);Cb.util.ApplicationContext.set("defaultLanguage",Db);window.nokia.maps=nokia.maps;})();